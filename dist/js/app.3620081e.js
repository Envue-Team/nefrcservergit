(function(t){function e(e){for(var n,i,s=e[0],l=e[1],c=e[2],u=0,p=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);d&&d(e);while(p.length)p.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,s=1;s<a.length;s++){var l=a[s];0!==o[l]&&(n=!1)}n&&(r.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},o={app:0},r=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var d=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},2136:function(t,e,a){"use strict";var n=a("add6"),o=a.n(n);o.a},"275d":function(t,e,a){"use strict";var n=a("999d"),o=a.n(n);o.a},3770:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[a("div",{staticClass:"d-flex align-center"},[a("v-img",{staticClass:"shrink mr-2",attrs:{alt:"Vuetify Logo",contain:"",src:"https://cdn.vuetifyjs.com/images/logos/vuetify-logo-dark.png",transition:"scale-transition",width:"40"}}),a("v-img",{staticClass:"shrink mt-1 hidden-sm-and-down",attrs:{alt:"Vuetify Name",contain:"","min-width":"100",src:"https://cdn.vuetifyjs.com/images/logos/vuetify-name-dark.png",width:"100"}})],1),a("v-spacer"),a("v-btn",{attrs:{href:"https://github.com/vuetifyjs/vuetify/releases/latest",target:"_blank",text:""}},[a("span",{staticClass:"mr-2"},[t._v("Latest Release")]),a("v-icon",[t._v("mdi-open-in-new")])],1)],1),a("v-main",[a("router-view")],1)],1)},r=[],i={name:"App",data:function(){return{}}},s=i,l=a("2877"),c=a("6544"),d=a.n(c),u=a("7496"),p=a("40dc"),v=a("8336"),f=a("132d"),_=a("adda"),h=a("f6c4"),m=a("2fa4"),g=Object(l["a"])(s,o,r,!1,null,null,null),b=g.exports;d()(g,{VApp:u["a"],VAppBar:p["a"],VBtn:v["a"],VIcon:f["a"],VImg:_["a"],VMain:h["a"],VSpacer:m["a"]});var y=a("8c4f"),x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("hello-world")},w=[],k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-row",{staticClass:"text-center"},[n("v-col",{attrs:{cols:"12"}},[n("v-img",{staticClass:"my-3",attrs:{src:a("9b19"),contain:"",height:"200"}})],1),n("v-col",{staticClass:"mb-4"},[n("h1",{staticClass:"display-2 font-weight-bold mb-3"},[t._v("\n        Welcome to Vuetify\n      ")]),n("p",{staticClass:"subheading font-weight-regular"},[t._v("\n        For help and collaboration with other Vuetify developers,\n        "),n("br"),t._v("please join our online\n        "),n("a",{attrs:{href:"https://community.vuetifyjs.com",target:"_blank"}},[t._v("Discord Community")])])]),n("v-col",{staticClass:"mb-5",attrs:{cols:"12"}},[n("h2",{staticClass:"headline font-weight-bold mb-3"},[t._v("\n        What's next?\n      ")]),n("v-row",{attrs:{justify:"center"}},t._l(t.whatsNext,(function(e,a){return n("a",{key:a,staticClass:"subheading mx-3",attrs:{href:e.href,target:"_blank"}},[t._v("\n          "+t._s(e.text)+"\n        ")])})),0)],1),n("v-col",{staticClass:"mb-5",attrs:{cols:"12"}},[n("h2",{staticClass:"headline font-weight-bold mb-3"},[t._v("\n        Important Links\n      ")]),n("v-row",{attrs:{justify:"center"}},t._l(t.importantLinks,(function(e,a){return n("a",{key:a,staticClass:"subheading mx-3",attrs:{href:e.href,target:"_blank"}},[t._v("\n          "+t._s(e.text)+"\n        ")])})),0)],1),n("v-col",{staticClass:"mb-5",attrs:{cols:"12"}},[n("h2",{staticClass:"headline font-weight-bold mb-3"},[t._v("\n        Ecosystem\n      ")]),n("v-row",{attrs:{justify:"center"}},t._l(t.ecosystem,(function(e,a){return n("a",{key:a,staticClass:"subheading mx-3",attrs:{href:e.href,target:"_blank"}},[t._v("\n          "+t._s(e.text)+"\n        ")])})),0)],1)],1)],1)},C=[],z={name:"HelloWorld",data:function(){return{ecosystem:[{text:"vuetify-loader",href:"https://github.com/vuetifyjs/vuetify-loader"},{text:"github",href:"https://github.com/vuetifyjs/vuetify"},{text:"awesome-vuetify",href:"https://github.com/vuetifyjs/awesome-vuetify"}],importantLinks:[{text:"Documentation",href:"https://vuetifyjs.com"},{text:"Chat",href:"https://community.vuetifyjs.com"},{text:"Made with Vuetify",href:"https://madewithvuejs.com/vuetify"},{text:"Twitter",href:"https://twitter.com/vuetifyjs"},{text:"Articles",href:"https://medium.com/vuetify"}],whatsNext:[{text:"Explore components",href:"https://vuetifyjs.com/components/api-explorer"},{text:"Select a layout",href:"https://vuetifyjs.com/getting-started/pre-made-layouts"},{text:"Frequently Asked Questions",href:"https://vuetifyjs.com/getting-started/frequently-asked-questions"}]}}},S=z,V=a("62ad"),D=a("a523"),I=a("0fd9"),O=Object(l["a"])(S,k,C,!1,null,null,null),$=O.exports;d()(O,{VCol:V["a"],VContainer:D["a"],VImg:_["a"],VRow:I["a"]});var j={name:"Home",components:{HelloWorld:$}},F=j,A=Object(l["a"])(F,x,w,!1,null,null,null),P=A.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("div",{staticClass:"text-h1 red--text text--lighten-1"},[t._v("Connections")])])],1),a("v-row",[a("v-col",{staticClass:"col-10 offset-1"},[a("v-row",[a("v-col",{staticClass:"col-3"},[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search Table","single-line":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1),a("v-row",[a("v-col",{staticClass:"col-5"},[a("v-chip",{attrs:{"input-value":t.filters.partners,filter:"",color:"#66BB"},on:{click:function(e){t.filters.partners=!t.filters.partners,t.filterOrganizations()}}},[t._v("Partners")]),a("v-chip",{attrs:{"input-value":t.filters.relationships,filter:"",color:"deep-orange"},on:{click:function(e){t.filters.relationships=!t.filters.relationships,t.filterOrganizations()}}},[t._v("Relationships")]),a("v-chip",{attrs:{"input-value":t.filters.public_safety,filter:"",color:"green lighten-1"},on:{click:function(e){t.filters.public_safety=!t.filters.public_safety,t.filterOrganizations()}}},[t._v("Public Safety")]),a("v-chip",{attrs:{"input-value":t.filters.my_assignments,filter:"",color:"blue lighten-1"},on:{click:function(e){t.filters.my_assignments=!t.filters.my_assignments,t.filterOrganizations()}}},[t._v("My Assignments")])],1)],1),a("v-data-table",{attrs:{headers:t.headers,search:t.search,items:t.organizations,"item-key":"id","multi-sort":""},on:{"click:row":t.nav},scopedSlots:t._u([{key:"item.name",fn:function(e){var n=e.item;return[null!==n.relationship?[a("span",{staticClass:"red--text"},[t._v(t._s(n.name))]),n.public_safety?a("span",[t._v(" (Public Safety)")]):t._e()]:null!==n.partner?[a("span",{staticClass:"purple--text"},[t._v(t._s(n.name))]),n.public_safety?a("span",[t._v(" (Public Safety)")]):t._e()]:t._e()]}},{key:"item.address",fn:function(e){var n=e.item;return[a("address",[t._v("\n                "+t._s(n.street_number)+" "+t._s(n.street_name)),a("br"),t._v("\n                "+t._s(n.city)+", "+t._s(n.state)+" "+t._s(n.zip)+"\n              ")])]}},{key:"item.manager",fn:function(e){var a=e.item;return[t._v("\n            "+t._s(a.manager)+"\n\n          ")]}}])})],1)],1),a("v-row",[a("v-col",{staticClass:"offset-1"},[a("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[a("v-hover",{attrs:{"open-delay":"200"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.hover;return[a("v-btn",t._g(t._b({class:{"on-hover":r},attrs:{text:"",elevation:r?16:2}},"v-btn",o,!1),n),[t._v("\n        Add Organization\n        "),a("v-icon",[t._v("\n          mdi-plus\n        ")])],1)]}}],null,!0)})]}}]),model:{value:t.add_organization_dlg,callback:function(e){t.add_organization_dlg=e},expression:"add_organization_dlg"}},[a("v-card",[a("v-form",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Organization Information")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Agency Name*",required:""},model:{value:t.add_organization.name,callback:function(e){t.$set(t.add_organization,"name",e)},expression:"add_organization.name"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-checkbox",{attrs:{label:"Public Safety"},model:{value:t.add_organization.public_safety,callback:function(e){t.$set(t.add_organization,"public_safety",e)},expression:"add_organization.public_safety"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Street Number"},model:{value:t.add_organization.street_number,callback:function(e){t.$set(t.add_organization,"street_number",e)},expression:"add_organization.street_number"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Street Name"},model:{value:t.add_organization.street_name,callback:function(e){t.$set(t.add_organization,"street_name",e)},expression:"add_organization.street_name"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"3",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"City"},model:{value:t.add_organization.city,callback:function(e){t.$set(t.add_organization,"city",e)},expression:"add_organization.city"}})],1),a("v-col",{attrs:{cols:"2"}},[a("v-text-field",{attrs:{label:"State"},model:{value:t.add_organization.state,callback:function(e){t.$set(t.add_organization,"state",e)},expression:"add_organization.state"}})],1),a("v-col",{attrs:{cols:"3"}},[a("v-text-field",{attrs:{label:"Zip"},model:{value:t.add_organization.zip,callback:function(e){t.$set(t.add_organization,"zip",e)},expression:"add_organization.zip"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"County"},model:{value:t.add_organization.county,callback:function(e){t.$set(t.add_organization,"county",e)},expression:"add_organization.county"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"Website"},model:{value:t.add_organization.website,callback:function(e){t.$set(t.add_organization,"website",e)},expression:"add_organization.website"}})],1)],1),a("v-row",[a("div",{staticClass:"headline"},[t._v("Point of Contact")])]),a("v-row",[a("v-col",{staticClass:"col-12"},[a("v-row",[a("v-col",[a("v-text-field",{attrs:{label:"First Name"},model:{value:t.add_organization.poc.first_name,callback:function(e){t.$set(t.add_organization.poc,"first_name",e)},expression:"add_organization.poc.first_name"}})],1),a("v-col",[a("v-text-field",{attrs:{label:"Last Name"},model:{value:t.add_organization.poc.last_name,callback:function(e){t.$set(t.add_organization.poc,"last_name",e)},expression:"add_organization.poc.last_name"}})],1)],1),a("v-row",[a("v-col",[a("v-text-field",{attrs:{label:"Phone"},model:{value:t.add_organization.poc.phone,callback:function(e){t.$set(t.add_organization.poc,"phone",e)},expression:"add_organization.poc.phone"}})],1)],1),a("v-row",[a("v-col",[a("v-text-field",{attrs:{label:"Email Address"},model:{value:t.add_organization.poc.email.address,callback:function(e){t.$set(t.add_organization.poc.email,"address",e)},expression:"add_organization.poc.email.address"}})],1)],1)],1)],1),a("v-row",[a("v-col",[a("v-row",{staticClass:"headline"},[t._v("Organization Type")]),a("v-row",[a("v-select",{attrs:{label:"Type",items:t.organization_types},model:{value:t.add_organization.type,callback:function(e){t.$set(t.add_organization,"type",e)},expression:"add_organization.type"}})],1),"Relationship"==t.add_organization.type?a("v-row",[a("v-select",{staticClass:"text-capitalize",attrs:{items:t.relationship_statuses},model:{value:t.add_organization.status,callback:function(e){t.$set(t.add_organization,"status",e)},expression:"add_organization.status"}})],1):t._e(),"Partner"==t.add_organization.type?a("span",[a("v-row",[a("v-text-field",{attrs:{label:"Services"},model:{value:t.add_organization.services,callback:function(e){t.$set(t.add_organization,"services",e)},expression:"add_organization.services"}})],1),a("v-row",[a("v-text-field",{attrs:{label:"Critical Relationship Information"},model:{value:t.add_organization.critical_relationship_information,callback:function(e){t.$set(t.add_organization,"critical_relationship_information",e)},expression:"add_organization.critical_relationship_information"}})],1)],1):t._e()],1)],1)],1),a("small",[t._v("*indicates required field")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.add_organization_dlg=!1}}},[t._v("\n            Close\n          ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.addOrganization}},[t._v("\n            Save\n          ")])],1)],1)],1)],1)],1)],1)],1)},E=[],L=(a("ac6a"),a("7f7f"),a("d225")),T=a("b0b4"),R=a("bc3a"),M=a.n(R),H=M.a.create({baseURL:"http://localhost:8080",headers:{"Content-type":"application/json"}}),B=function(){function t(){Object(L["a"])(this,t)}return Object(T["a"])(t,[{key:"getAll",value:function(){return H.get("organizations")}},{key:"get",value:function(t){return H.get("/oganizations/".concat(t))}},{key:"create",value:function(t){return H.post("/organizations",t)}},{key:"update",value:function(t,e){return H.put("/organizations/".concat(t),e)}},{key:"delete",value:function(t){return H.delete("/organizations/".concat(t))}},{key:"deleteAll",value:function(){return H.delete("/organizations")}}]),t}(),q=new B,U=function(){function t(){Object(L["a"])(this,t)}return Object(T["a"])(t,[{key:"getAll",value:function(){return H.get("partners")}},{key:"get",value:function(t){return H.get("/partners/".concat(t))}},{key:"create",value:function(t){return H.post("/partners",t)}},{key:"update",value:function(t,e){return H.put("/partners/".concat(t),e)}},{key:"delete",value:function(t){return H.delete("/partners/".concat(t))}},{key:"deleteAll",value:function(){return H.delete("/partners")}}]),t}(),W=new U,G=function(){function t(){Object(L["a"])(this,t)}return Object(T["a"])(t,[{key:"getAll",value:function(){return H.get("relationships")}},{key:"get",value:function(t){return H.get("/relationships/".concat(t))}},{key:"create",value:function(t){return H.post("/relationships",t)}},{key:"update",value:function(t,e){return H.put("/relationships/".concat(t),e)}},{key:"delete",value:function(t){return H.delete("/relationships/".concat(t))}},{key:"deleteAll",value:function(){return H.delete("/relationshipss")}}]),t}(),Z=new G,J={name:"organizations",data:function(){return{filters:{partners:!0,relationships:!0,public_safety:!0,my_assignments:!1},add_organization_dlg:!1,search:"",organizations:[],orgCache:[],organization_types:["Relationship","Partner"],relationship_statuses:["hot","warm","cold"],add_organization:{name:"",public_safety:!1,street_number:"",street_name:"",city:"",state:"",zip:"",county:"",website:"",poc:{phone:"",email:""},type:"",critical_relationship_information:"",services:"",status:""}}},computed:{headers:function(){var t=[{text:"Agency",value:"name",width:"80px"},{text:"Address",value:"address",width:"80px"},{text:"County",value:"county",width:"100px"},{text:"Manager",value:"manager",width:"100px"}];return this.filters.partners&&t.push({text:"Services",value:"partner.services",width:"80px"}),this.filters.relationships&&t.push({text:"Status",value:"relationship.status",width:"80px"}),t}},methods:{nav:function(t){null!==t.partner?this.$router.push({path:"partner/"+t.id}):null!=t.relationship&&this.$router.push({path:"relationship/"+t.id})},addOrganization:function(){var t=this,e={name:this.add_organization.name,street_number:this.add_organization.street_number,street_name:this.add_organization.street_name,city:this.add_organization.city,state:this.add_organization.state,zip:this.add_organization.zip,website:this.add_organization.website};"Partner"==this.add_organization.type?(e.services=this.add_organization.services,e.critical_relationship_information=this.add_organization.critical_relationship_information,W.create(e).then((function(e){console.log(e),t.retrieveOrganizations(),t.add_organization_dlg=!1})).catch((function(t){console.log(t)}))):"Relationship"==this.add_organization.type&&(e.status=this.add_organization.status,Z.create(e).then((function(e){console.log(e),t.retrieveOrganizations(),t.add_organization_dlg=!1})).catch((function(t){console.log(t)})))},retrieveOrganizations:function(){var t=this;q.getAll().then((function(e){t.orgCache=e.data,t.orgCache.forEach((function(t){if(console.log(t.relationship_managers),null!==t.relationship_managers&&0!==t.relationship_managers.length){var e=t.relationship_managers[0].person,a=e.first_name+" "+e.last_name;t.manager=a;var n="";e.phones.forEach((function(t){n+=t.number+" \n"}));var o="";e.emails.forEach((function(t){o+=t.address+" \n"})),t.manager=a+"\n"+n+"\n"+o,t.managerId=e.id}else t.manager="Not yet assigned",t.managerId=0})),t.organizations=e.data,t.organizations.forEach((function(t){if(null!==t.relationship_managers&&0!==t.relationship_managers.length){var e=t.relationship_managers[0].person,a=e.first_name+" "+e.last_name,n="";e.phones.forEach((function(t){n+=t.number+" \n"}));var o="";e.emails.forEach((function(t){o+=t.address+" \n"})),t.manager=a+"\n"+n+"\n"+o,t.managerId=e.id}else t.manager="Not yet assigned",t.managerId=0}))})).catch((function(t){console.log(t.message)}))},filterOrganizations:function(){var t=this;this.organizations=this.orgCache.filter((function(e){var a=!t.filters["my_assignments"]||"5693164c-5da4-4d07-ad24-d9f39befc823"==e.managerId;return(t.filters["partners"]&&null!==e.partner&&a)|(t.filters["relationships"]&&null!==e.relationship&&a)|(t.filters["public_safety"]&&e.public_safety&&a)}))}},mounted:function(){this.retrieveOrganizations()}},Q=J,X=a("b0af"),K=a("99d9"),Y=a("ac7c"),tt=a("cc20"),et=a("8fea"),at=a("169a"),nt=a("4bd4"),ot=a("ce87"),rt=a("b974"),it=a("8654"),st=Object(l["a"])(Q,N,E,!1,null,null,null),lt=st.exports;d()(st,{VBtn:v["a"],VCard:X["a"],VCardActions:K["a"],VCardText:K["b"],VCardTitle:K["c"],VCheckbox:Y["a"],VChip:tt["a"],VCol:V["a"],VContainer:D["a"],VDataTable:et["a"],VDialog:at["a"],VForm:nt["a"],VHover:ot["a"],VIcon:f["a"],VRow:I["a"],VSelect:rt["a"],VSpacer:m["a"],VTextField:it["a"]});var ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",[a("v-col",{staticClass:"col-7"},[a("div",{staticClass:"text-h5 font-weight-thin"},[t._v("\n\t\t\t\t\t\t"+t._s(t.partner.county)+"\n\t\t\t\t\t")]),a("div",{staticClass:"text-h3 font-weight-thin"},[t._v(t._s(t.partner.name)+"\n\t\t\t\t\t"),a("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[a("v-hover",{attrs:{"open-delay":"200"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.hover;return[a("v-btn",t._g(t._b({class:{"on-hover":r},attrs:{icon:"",elevation:r?16:2}},"v-btn",o,!1),n),[a("v-icon",[t._v("\n\t\t\t\t\t\t\tmdi-pencil\n\t\t\t\t\t\t")])],1)]}}],null,!0)})]}}]),model:{value:t.partner_edit_dlg,callback:function(e){t.partner_edit_dlg=e},expression:"partner_edit_dlg"}},[a("v-card",[a("v-form",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Partner Information")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Agency Name*",required:""},model:{value:t.partner.name,callback:function(e){t.$set(t.partner,"name",e)},expression:"partner.name"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-checkbox",{attrs:{label:"Public Safety"},model:{value:t.partner.public_safety,callback:function(e){t.$set(t.partner,"public_safety",e)},expression:"partner.public_safety"}})],1)],1),a("v-row",[a("v-label",[t._v("Critical Relationship Information")]),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-textarea",{attrs:{solo:""},model:{value:t.partner_secondary_info.critical_relationship_information,callback:function(e){t.$set(t.partner_secondary_info,"critical_relationship_information",e)},expression:"partner_secondary_info.critical_relationship_information"}})],1)],1),a("v-row",[a("v-label",[t._v("Services")]),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-textarea",{attrs:{solo:""},model:{value:t.partner_secondary_info.services,callback:function(e){t.$set(t.partner_secondary_info,"services",e)},expression:"partner_secondary_info.services"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Street Number"},model:{value:t.partner.street_number,callback:function(e){t.$set(t.partner,"street_number",e)},expression:"partner.street_number"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Street Name"},model:{value:t.partner.street_name,callback:function(e){t.$set(t.partner,"street_name",e)},expression:"partner.street_name"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"3",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"City"},model:{value:t.partner.city,callback:function(e){t.$set(t.partner,"city",e)},expression:"partner.city"}})],1),a("v-col",{attrs:{cols:"2"}},[a("v-text-field",{attrs:{label:"State"},model:{value:t.partner.state,callback:function(e){t.$set(t.partner,"state",e)},expression:"partner.state"}})],1),a("v-col",{attrs:{cols:"3"}},[a("v-text-field",{attrs:{label:"Zip"},model:{value:t.partner.zip,callback:function(e){t.$set(t.partner,"zip",e)},expression:"partner.zip"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"County"},model:{value:t.partner.county,callback:function(e){t.$set(t.partner,"county",e)},expression:"partner.county"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"Website"},model:{value:t.partner.website,callback:function(e){t.$set(t.partner,"website",e)},expression:"partner.website"}})],1)],1),a("v-row",[a("div",{staticClass:"headline"},[t._v("Points of Contact")])]),t._l(t.partner.point_of_contacts,(function(e){return a("v-row",{key:e.personId},[a("v-col",{staticClass:"col-12"},[a("v-row",[a("v-col",[a("v-text-field",{attrs:{label:"First Name"},model:{value:e.person.first_name,callback:function(a){t.$set(e.person,"first_name",a)},expression:"poc.person.first_name"}})],1),a("v-col",[a("v-text-field",{attrs:{label:"Last Name"},model:{value:e.person.last_name,callback:function(a){t.$set(e.person,"last_name",a)},expression:"poc.person.last_name"}})],1)],1),t._l(e.person.phones,(function(e){return a("v-row",{key:e.id},[a("v-col",[a("v-text-field",{attrs:{label:"Phone"},model:{value:e.number,callback:function(a){t.$set(e,"number",a)},expression:"phone.number"}})],1)],1)})),t._l(e.person.emails,(function(e){return a("v-row",{key:e.id},[a("v-col",[a("v-text-field",{attrs:{label:"Email Address"},model:{value:e.address,callback:function(a){t.$set(e,"address",a)},expression:"email.address"}})],1)],1)}))],2)],1)}))],2),a("small",[t._v("*indicates required field")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.partner_edit_dlg=!1}}},[t._v("\n\t\t\t\t\t\t\t\tClose\n\t\t\t\t\t\t\t")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.updatePartner}},[t._v("\n\t\t\t\t\t\t\t\tSave\n\t\t\t\t\t\t\t")])],1)],1)],1)],1)],1),a("div",{staticClass:"body-3 mt-3"},[t._v("\n\t\t\t\t\t\t"+t._s(t.partner.street_number)+" "+t._s(t.partner.street_name)),a("br"),t._v("\n\t\t\t\t\t\t"+t._s(t.partner.city)+", "+t._s(t.partner.state)+" "+t._s(t.partner.zip)+"\n\t\t\t\t\t")]),a("a",{staticClass:"blue--text text--darken-1 body-3 mt-3",attrs:{href:t.partner.website}},[t._v(t._s(t.partner.website))]),a("div",{staticClass:"text-h5 mt-3"},[t._v("Services"),t.partner.public_safety?a("span",[t._v(" (Safety) ")]):t._e()]),a("div",{staticClass:"text-h5 font-weight-light"},[t._v(t._s(t.partner_secondary_info.services))]),t._l(t.partner.point_of_contacts,(function(e){return a("div",{key:e.personId,staticClass:"mt-3"},[a("div",{staticClass:"text-h5 font-weight-light"},[a("span",{ref:"first_name_"+e.personId,refInFor:!0},[t._v(t._s(e.person.first_name)+" ")]),a("span",{ref:"last_name_"+e.personId,refInFor:!0},[t._v(t._s(e.person.last_name))])]),t._l(e.person.phones,(function(e){return a("div",{key:e.number,staticClass:"text-h5 font-weight-thin"},[a("span",{ref:"phone_"+e.id,refInFor:!0},[t._v(t._s(e.number))])])})),t._l(e.person.emails,(function(e){return a("div",{key:e.address,staticClass:"text-h5 font-weight-thin"},[a("span",{ref:"email_"+e.id,refInFor:!0},[t._v(t._s(e.address))])])}))],2)})),t._l(t.organization_relationship_managers,(function(e){return a("div",{key:e.id},[a("div",{staticClass:"text-h5 font-weight-light mt-3"},[a("span",{ref:"relationship_manager_"+e.personId,refInFor:!0},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.person.first_name)+" "+t._s(e.person.last_name)+" (Relationship Manager)\n\t\t\t\t\t\t\t")]),a("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[a("v-hover",{attrs:{"open-delay":"200"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.hover;return[a("v-btn",t._g(t._b({class:{"on-hover":r},attrs:{icon:"",elevation:r?16:2}},"v-btn",o,!1),n),[a("v-icon",[t._v("\n\t\t\t\t\t\t\tmdi-pencil\n\t\t\t\t\t\t")])],1)]}}],null,!0)})]}}],null,!0),model:{value:t.assign_mgr_dlg,callback:function(e){t.assign_mgr_dlg=e},expression:"assign_mgr_dlg"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Assign Relationship Manager")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-autocomplete",{attrs:{label:"Relationship Manager",items:t.all_relationship_managers,"item-text":"name","item-value":"value","return-object":""},on:{change:t.updateRelationshipManager}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.assign_mgr_dlg=!1}}},[t._v("\n\t\t\t\t\t\t\t\tClose\n\t\t\t\t\t\t\t")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.updateRelationshipManager}},[t._v("\n\t\t\t\t\t\t\t\tSave\n\t\t\t\t\t\t\t")])],1)],1)],1)],1),t._l(e.person.phones,(function(e){return a("div",{key:e.number,staticClass:"text-h5 font-weight-thin"},[t._v(t._s(e.number))])})),t._l(e.person.emails,(function(e){return a("div",{key:e.address,staticClass:"text-h5 font-weight-thin"},[t._v(" "+t._s(e.address))])}))],2)})),a("v-data-table",{attrs:{headers:t.headers,search:t.search,items:t.files,"item-key":"id","multi-sort":""},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-text-field",{staticClass:"mx-4",attrs:{label:"Search Files"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})]},proxy:!0},{key:"item.name",fn:function(e){return[a("p",[t._v(t._s(e.item.name))])]}},{key:"item.date",fn:function(e){return[a("p",[t._v(t._s(e.item.date))])]}},{key:"item.author",fn:function(e){return[a("p",[t._v(t._s(e.item.author))])]}},{key:"item.download",fn:function(e){return[a("v-btn",{attrs:{depressed:"",small:""},on:{click:function(a){return t.downloadFile(e)}}},[t._v("\n\t\t\t\t\t\tDownload\n\t\t\t\t\t\t"),a("v-icon",{attrs:{color:"orange darken-4",right:""}},[t._v("\n\t\t\t\t\t\t\tmdi-arrow-down\n\t\t\t\t\t\t")])],1)]}},{key:"item.remove",fn:function(e){return[a("v-btn",{attrs:{depressed:"",small:""},on:{click:function(a){return t.deleteFile(e)}}},[t._v("\n\t\t\t\t\t\tDelete\n\t\t\t\t\t\t"),a("v-icon",{attrs:{color:"orange darken-4",right:""}},[t._v("\n\t\t\t\t\t\t\tmdi-trash-can\n\t\t\t\t\t\t")])],1)]}},{key:"footer",fn:function(){return[a("v-row",[a("v-file-input",{attrs:{label:"Upload new file","show-size":"",counter:"",dense:""},on:{change:t.filesChange}}),a("v-btn",{attrs:{depressed:"",small:"",disabled:t.upload_disabled},on:{click:t.uploadFile}},[t._v("\n\t\t\t\t\t\tUpload\n\t\t\t\t\t\t"),a("v-icon",{attrs:{color:"orange darken-4",right:""}},[t._v("\n\t\t\t\t\t\t\tmdi-arrow-up\n\t\t\t\t\t\t")])],1)],1)]},proxy:!0}])})],2),a("v-col",[a("NoteDialog",{attrs:{item:t.view_note_item},model:{value:t.showNoteDialog,callback:function(e){t.showNoteDialog=e},expression:"showNoteDialog"}}),[a("v-card",{staticClass:"mx-auto"},[a("v-card-title",{staticClass:"white--text orange darken-4"},[t._v("\n\t\t\t\t\t\tNotes:\n\n\t\t\t\t\t\t"),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[a("v-hover",{attrs:{"open-delay":"200"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.hover;return[a("v-btn",t._g(t._b({staticClass:"text--primary",class:{"on-hover":r},attrs:{color:"white",fab:"",small:"",elevation:r?16:2}},"v-btn",o,!1),n),[a("v-icon",[t._v("\n\t\t\t\t\t\t\tmdi-plus\n\t\t\t\t\t\t")])],1)]}}],null,!0)})]}}]),model:{value:t.add_note_dlg,callback:function(e){t.add_note_dlg=e},expression:"add_note_dlg"}},[a("v-form",{ref:"new_note_form",model:{value:t.valid_note,callback:function(e){t.valid_note=e},expression:"valid_note"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Note")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{staticClass:"col-3"},[a("v-autocomplete",{attrs:{items:t.add_note_form.types,label:"Type"},model:{value:t.add_note_form.type,callback:function(e){t.$set(t.add_note_form,"type",e)},expression:"add_note_form.type"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-textarea",{attrs:{rules:t.note_text_rule},model:{value:t.add_note_form.text,callback:function(e){t.$set(t.add_note_form,"text",e)},expression:"add_note_form.text"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.add_note_dlg=!1}}},[t._v("\n\t\t\t\t\t\t\t\t\tClose\n\t\t\t\t\t\t\t\t")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.addNote}},[t._v("\n\t\t\t\t\t\t\t\t\tSave\n\t\t\t\t\t\t\t\t")])],1)],1)],1)],1)],1),a("v-card-text",{staticClass:"pt-4"},[a("v-card-title",[t._v("Important information")]),a("v-row",{staticStyle:{"margin-top":"-10px","margin-bottom":"20px"}},[a("v-col",{staticClass:"offset-1"},[a("div",{staticClass:"body-1 font-weight-light"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.partner_secondary_info.critical_relationship_information)+"\n\t\t\t\t\t\t\t")])])],1),a("v-divider"),a("v-row",[a("v-col",[a("v-switch",{attrs:{label:t.switch_label(),color:"red","hide-details":""},on:{change:t.set_notes_view},model:{value:t.history_switch,callback:function(e){t.history_switch=e},expression:"history_switch"}})],1)],1),a("v-row",{staticStyle:{"margin-top":"-30px"}},[a("v-col",{staticClass:"col-5"},[a("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{label:"From","prepend-icon":"mdi-calendar",readonly:"",clearable:""},model:{value:t.formattedStartDate,callback:function(e){t.formattedStartDate=e},expression:"formattedStartDate"}},"v-text-field",o,!1),n))]}}]),model:{value:t.menu1,callback:function(e){t.menu1=e},expression:"menu1"}},[a("v-date-picker",{on:{input:function(e){t.menu1=!1}},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}})],1)],1),a("v-col",{staticClass:"col-5"},[a("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{label:"To","prepend-icon":"mdi-calendar",readonly:"",clearable:""},model:{value:t.formattedEndDate,callback:function(e){t.formattedEndDate=e},expression:"formattedEndDate"}},"v-text-field",o,!1),n))]}}]),model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[a("v-date-picker",{on:{input:function(e){t.menu2=!1}},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}})],1)],1)],1),a("v-row",{staticStyle:{"margin-top":"-30px"}},[a("v-col",{staticClass:"col-5 offset-1"},[a("v-text-field",{attrs:{placeholder:"Search Author","append-icon":"mdi-magnify"},model:{value:t.note_search,callback:function(e){t.note_search=e},expression:"note_search"}})],1)],1)],1),a("v-divider"),a("v-virtual-scroll",{attrs:{items:t.filteredList,"item-height":50,height:"300"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.item;return[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"font-weight-thin"},[t._v("\n\t\t\t\t\t\t\t\t\tAuthor: "+t._s(n.author.first_name)+" "+t._s(n.author.last_name)+" - "+t._s(n.date)+"\n\t\t\t\t\t\t\t\t")]),a("v-list-item-subtitle",[t._v(t._s(n.text))])],1),a("v-list-item-action",[a("v-btn",{attrs:{depressed:"",small:""},on:{click:function(e){return e.stopPropagation(),t.openNoteDialog(n)}}},[t._v("\n\t\t\t\t\t\t\t\t\tOpen\n\t\t\t\t\t\t\t\t"),a("v-icon",{attrs:{color:"orange darken-4",right:""}},[t._v("\n\t\t\t\t\t\t\t\t\tmdi-open-in-new\n\t\t\t\t\t\t\t\t")])],1)],1)],1)]}}])})],1)]],2)],1)],1)},dt=[],ut=(a("6762"),a("2fdb"),a("28a5"),a("768b")),pt=function(){function t(){Object(L["a"])(this,t)}return Object(T["a"])(t,[{key:"getAll",value:function(){return H.get("persons")}},{key:"get",value:function(t){return H.get("/persons/".concat(t))}},{key:"create",value:function(t){return H.post("/persons",t)}},{key:"update",value:function(t,e){return H.put("/persons/".concat(t),e)}},{key:"delete",value:function(t){return H.delete("/persons/".concat(t))}},{key:"deleteAll",value:function(){return H.delete("/persons")}}]),t}(),vt=new pt,ft=function(){function t(){Object(L["a"])(this,t)}return Object(T["a"])(t,[{key:"getAll",value:function(){return H.get("relationship_managers")}},{key:"get",value:function(t){return H.get("/relationship_managers/".concat(t))}},{key:"create",value:function(t){return H.post("/relationship_managers",t)}},{key:"update",value:function(t,e,a){return H.put("/relationship_managers/".concat(t,"/").concat(e),a)}},{key:"delete",value:function(t){return H.delete("/relationship_managers/".concat(t))}},{key:"deleteAll",value:function(){return H.delete("/relationship_managers")}}]),t}(),_t=new ft,ht=function(){function t(){Object(L["a"])(this,t)}return Object(T["a"])(t,[{key:"getAll",value:function(){return H.get("phones")}},{key:"get",value:function(t){return H.get("/phones/".concat(t))}},{key:"create",value:function(t){return H.post("/phones",t)}},{key:"update",value:function(t,e){return H.put("/phones/".concat(t),e)}},{key:"delete",value:function(t){return H.delete("/phones/".concat(t))}},{key:"deleteAll",value:function(){return H.delete("/phones")}}]),t}(),mt=new ht,gt=function(){function t(){Object(L["a"])(this,t)}return Object(T["a"])(t,[{key:"getAll",value:function(){return H.get("notes")}},{key:"get",value:function(t){return H.get("/notes/".concat(t))}},{key:"create",value:function(t){return H.post("/notes",t)}},{key:"update",value:function(t,e){return H.put("/notes/".concat(t),e)}},{key:"delete",value:function(t){return H.delete("/notes/".concat(t))}},{key:"deleteAll",value:function(){return H.delete("/notes")}}]),t}(),bt=new gt,yt=function(){function t(){Object(L["a"])(this,t)}return Object(T["a"])(t,[{key:"getAll",value:function(t){return H.get("files/organization/".concat(t))}},{key:"get",value:function(t){return H.get("/files/".concat(t))}},{key:"upload",value:function(t){return H.post("/files",t,{headers:{"Content-Type":"multipart/form-data"}})}},{key:"download",value:function(t,e){return H.get("/files/".concat(t),e)}},{key:"update",value:function(t,e){return H.put("/files/".concat(t),e)}},{key:"delete",value:function(t){return H.delete("/files/".concat(t))}},{key:"deleteAll",value:function(){return H.delete("/files")}}]),t}(),xt=new yt,wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{"max-width":"600px"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"body-3 font-weight-light"})]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{staticClass:"col-12"},[a("p",{staticClass:"body-2"},[t._v(t._s(t.item.text))])])],1),a("v-row",[a("div",{staticClass:"body-3 font-weight-light"},[a("p",{staticClass:"text-capitalize"},[t._v(t._s(t.item.type))])])])],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(e){return t.deleteNote(t.item)}}},[t._v("\n\t\tDelete\n\t")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){e.stopPropagation(),t.show=!1}}},[t._v("\n\t\t\tClose\n\t")])],1)],1)],1)},kt=[],Ct={props:{value:Boolean,item:Object},methods:{deleteNote:function(t){this.$emit("input",!1),this.$parent.deleteNote(t)}},computed:{show:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},zt=Ct,St=Object(l["a"])(zt,wt,kt,!1,null,null,null),Vt=St.exports;d()(St,{VBtn:v["a"],VCard:X["a"],VCardActions:K["a"],VCardText:K["b"],VCardTitle:K["c"],VCol:V["a"],VContainer:D["a"],VDialog:at["a"],VRow:I["a"],VSpacer:m["a"]});var Dt=0,It=1,Ot=2,$t=3,jt={name:"partner",components:{NoteDialog:Vt},data:function(){return{showNoteDialog:!1,partner:"",partner_edit_dlg:!1,partner_secondary_info:"",search:"",assign_mgr_dlg:!1,all_relationship_managers:[],organization_relationship_managers:[],files:[],uploadedFiles:[],uploadError:null,currentStatus:null,uploadFieldName:"files",file_upload:"",upload_disabled:!0,view_note_item:{},note_search:"",history_switch:!0,notes:[],add_note_dlg:!1,valid_note:!0,note_text_rule:[function(t){return!!t||"Text is required"}],add_note_form:{types:["General","Contact"],text:"",type:"General"},view_note_dlg:!1,notes_type_selected:{general:!1,contact:!0},menu1:!1,menu2:!1,start_date:"",end_date:"",formattedStartDate:"",formattedEndDate:""}},watch:{start_date:function(t){this.formattedStartDate=this.formatDate(this.start_date)},end_date:function(t){this.formattedEndDate=this.formatDate(this.end_date)}},methods:{close_note_dlg:function(){this.view_note_dlg=!1},openNoteDialog:function(t){this.showNoteDialog=!0,this.view_note_item=t},setModal:function(t){this.view_note_item=t,this.open_note_dlg()},switch_label:function(){return this.history_switch?"Contact History":"General History"},addNote:function(t){var e=this;if(this.$refs.new_note_form.validate()){var a={organizationId:this.partner.id,personId:"5693164c-5da4-4d07-ad24-d9f39befc823",text:this.add_note_form.text,type:this.add_note_form.type.toLowerCase()};bt.create(a).then((function(t){e.setPartner(e.partner.id)})).catch((function(t){console.log(t)})),this.add_note_form.text="",this.add_note_dlg=!1}},deleteNote:function(t){var e=this;bt.delete(t.id).then((function(t){e.setPartner(e.partner.id)})).catch((function(t){console.log(t)})),this.showNoteDialog=!1},set_notes_view:function(){this.notes_type_selected.general=!this.history_switch,this.notes_type_selected.contact=this.history_switch},downloadFile:function(t){var e={fileId:t.item.id};xt.download(t.item.filepath,e).then((function(t){var e=window.URL.createObjectURL(new Blob([t.data])),a=document.createElement("a");a.href=e,a.setAttribute("download","file.pdf"),document.body.appendChild(a),a.click()})).catch((function(t){console.log(t)}))},deleteFile:function(t){var e=this,a={filePath:t.item.filePath};xt.delete(t.item.id,a).then((function(t){e.populateFiles(e.partner.id)})).catch((function(t){console.log(t)}))},reset:function(){this.currentStatus=Dt,this.uploadedFiles=[],this.uploadError=null},uploadFile:function(){var t=this,e=new FormData;e.append("file",this.file_upload),e.append("organizationId",this.partner.id),e.append("personId","5693164c-5da4-4d07-ad24-d9f39befc823"),this.formData=e,this.currentStatus=It,xt.upload(this.formData).then((function(e){t.uploadedFiles=[].concat(e),t.currentStatus=Ot})).catch((function(e){t.uploadError=e.response,t.currentStatus=$t})),this.formData="",this.upload_disabled=!0,this.populateFiles(this.partner.id)},filesChange:function(t){this.file_upload=t,this.upload_disabled=!1},populateFiles:function(t){var e=this;xt.getAll(t).then((function(t){e.files=t.data.map((function(t){var e=Intl.DateTimeFormat("en-US").format(new Date(t.createdAt));return{filepath:t.filePath.substr(t.filePath.indexOf("/")+1,t.filePath.length),date:e,author:t.person.first_name+" "+t.person.last_name,name:t.fileName,id:t.id}}))})).catch((function(t){console.log(t)}))},updatePartner:function(){var t=this;this.partner_edit_dlg=!1;var e={name:this.partner.name,street_number:this.partner.street_number,street_name:this.partner.street_name,city:this.partner.city,state:this.partner.state,zip:this.partner.zip,county:this.partner.county,website:this.partner.website,public_safety:this.partner.public_safety,services:this.partner.partner.services,critical_relationship_information:this.partner.partner.critical_relationship_information};W.update(this.partner.id,e).then((function(t){console.log(t.data)})).catch((function(t){console.log(t)})),this.partner.point_of_contacts.forEach((function(e){var a={first_name:t.$refs["first_name_"+e.personId][0]["innerHTML"],last_name:t.$refs["last_name_"+e.personId][0]["innerHTML"]};vt.update(e.personId,a).then((function(t){})).catch((function(t){console.log(t)})),e.person.phones.forEach((function(e){var a={number:t.$refs["phone_"+e.id][0]["innerHTML"]};mt.update(e.id,a).then((function(t){})).catch((function(t){console.log(t)}))})),e.person.emails.forEach((function(e){var a={number:t.$refs["email_"+e.id][0]["innerHTML"]};EmailDataService.update(e.id,a).then((function(t){})).catch((function(t){console.log(t)}))}))})),this.partner.relationship_managers.forEach((function(t){var e={organizationId:t.organizationId,personId:t.personId};OrganizationManagerDataService.update(t.organizationId,t.personId,e)}))},setPartner:function(){var t=this;W.get(this.$route.params.organizationId).then((function(e){t.notes=e.data.notes.map((function(t){var e=Intl.DateTimeFormat("en-US").format(new Date(t.createdAt));return{id:t.id,text:t.text,date:e,author:t.person,type:t.type}})),t.partner=e.data,t.organization_relationship_managers=e.data.relationship_managers,t.populateFiles(t.partner.id),t.partner_secondary_info=e.data.partner})).catch((function(t){console.log(t.message)}))},populateRelationshipManagersList:function(){var t=this;_t.getAll().then((function(e){t.all_relationship_managers=e.data.map((function(t){return{name:t.person.first_name+" "+t.person.last_name,value:t.personId}}))})).catch((function(t){console.log(t)}))},updateRelationshipManager:function(t){var e=this;this.assign_mgr_dlg=!1;var a=this.partner.id,n={organizationId:a,personId:t.value},o=this.partner.relationship_managers[0].personId;_t.update(a,o,n).then((function(t){W.get(e.partner.id).then((function(t){e.partner=t.data,e.organization_relationship_managers=t.data.relationship_managers})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))},formatDate:function(t){if(!t)return null;var e=t.split("-"),a=Object(ut["a"])(e,3),n=a[0],o=a[1],r=a[2];return"".concat(o,"/").concat(r,"/").concat(n)}},computed:{headers:function(){var t=[{text:"File Name",value:"name",width:"80px"},{text:"Date",value:"date",width:"80px"},{text:"Author",value:"author",width:"100px"},{text:"",value:"download",width:"100px"},{text:"",value:"remove",width:"100px"}];return t},filteredList:function(){var t=this;return this.notes.filter((function(e){var a=!0,n=!0,o=new Date(e.date).toISOString().substr(0,10);if(""!==t.formattedStartDate&&null!==t.formattedStartDate&&(a=new Date(t.formattedStartDate).toISOString().substr(0,10)<o),""!==t.formattedEndDate&&null!==t.formattedEndDate&&(n=new Date(t.formattedEndDate).toISOString().substr(0,10)>o),t.notes_type_selected[e.type])return(e.author.first_name.toLowerCase().includes(t.note_search.toLowerCase())||e.author.last_name.toLowerCase().includes(t.note_search.toLowerCase()))&&a&&n}))}},mounted:function(){this.reset(),this.setPartner(),this.populateRelationshipManagersList()}},Ft=jt,At=(a("68b2"),a("c6a6")),Pt=a("2e4b"),Nt=a("ce7e"),Et=a("23a7"),Lt=a("24c9"),Tt=a("da13"),Rt=a("1800"),Mt=a("5d23"),Ht=a("e449"),Bt=a("b73d"),qt=a("a844"),Ut=a("0de5"),Wt=Object(l["a"])(Ft,ct,dt,!1,null,"0e73fda2",null),Gt=Wt.exports;d()(Wt,{VAutocomplete:At["a"],VBtn:v["a"],VCard:X["a"],VCardActions:K["a"],VCardText:K["b"],VCardTitle:K["c"],VCheckbox:Y["a"],VCol:V["a"],VContainer:D["a"],VDataTable:et["a"],VDatePicker:Pt["a"],VDialog:at["a"],VDivider:Nt["a"],VFileInput:Et["a"],VForm:nt["a"],VHover:ot["a"],VIcon:f["a"],VLabel:Lt["a"],VListItem:Tt["a"],VListItemAction:Rt["a"],VListItemContent:Mt["a"],VListItemSubtitle:Mt["b"],VListItemTitle:Mt["c"],VMenu:Ht["a"],VRow:I["a"],VSpacer:m["a"],VSwitch:Bt["a"],VTextField:it["a"],VTextarea:qt["a"],VVirtualScroll:Ut["a"]});var Zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",[a("v-col",{staticClass:"col-7"},[a("div",{staticClass:"text-h5 font-weight-thin"}),a("div",{staticClass:"text-h3 font-weight-thin"},[t._v(t._s(t.relationship.name)+"\n\t\t\t\t\t"),a("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[a("v-hover",{attrs:{"open-delay":"200"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.hover;return[a("v-btn",t._g(t._b({class:{"on-hover":r},attrs:{icon:"",elevation:r?16:2}},"v-btn",o,!1),n),[a("v-icon",[t._v("\n\t\t\t\t\t\t\tmdi-pencil\n\t\t\t\t\t\t")])],1)]}}],null,!0)})]}}]),model:{value:t.relationship_edit_dlg,callback:function(e){t.relationship_edit_dlg=e},expression:"relationship_edit_dlg"}},[a("v-card",[a("v-form",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Relationship Information")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Agency Name*",required:""},model:{value:t.relationship.name,callback:function(e){t.$set(t.relationship,"name",e)},expression:"relationship.name"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-checkbox",{attrs:{label:"Public Safety"},model:{value:t.relationship.public_safety,callback:function(e){t.$set(t.relationship,"public_safety",e)},expression:"relationship.public_safety"}})],1)],1),a("v-row",[a("v-label",[t._v("Relationship Status")]),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-select",{staticClass:"text-capitalize",attrs:{items:t.status_options},model:{value:t.current_status,callback:function(e){t.current_status=e},expression:"current_status"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Street Number"},model:{value:t.relationship.street_number,callback:function(e){t.$set(t.relationship,"street_number",e)},expression:"relationship.street_number"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Street Name"},model:{value:t.relationship.street_name,callback:function(e){t.$set(t.relationship,"street_name",e)},expression:"relationship.street_name"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"3",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"City"},model:{value:t.relationship.city,callback:function(e){t.$set(t.relationship,"city",e)},expression:"relationship.city"}})],1),a("v-col",{attrs:{cols:"2"}},[a("v-text-field",{attrs:{label:"State"},model:{value:t.relationship.state,callback:function(e){t.$set(t.relationship,"state",e)},expression:"relationship.state"}})],1),a("v-col",{attrs:{cols:"3"}},[a("v-text-field",{attrs:{label:"Zip"},model:{value:t.relationship.zip,callback:function(e){t.$set(t.relationship,"zip",e)},expression:"relationship.zip"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"County"},model:{value:t.relationship.county,callback:function(e){t.$set(t.relationship,"county",e)},expression:"relationship.county"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"Website"},model:{value:t.relationship.website,callback:function(e){t.$set(t.relationship,"website",e)},expression:"relationship.website"}})],1)],1),a("v-row",[a("div",{staticClass:"headline"},[t._v("Points of Contact")])]),t._l(t.relationship.point_of_contacts,(function(e){return a("v-row",{key:e.personId},[a("v-col",{staticClass:"col-12"},[a("v-row",[a("v-col",[a("v-text-field",{attrs:{label:"First Name"},model:{value:e.person.first_name,callback:function(a){t.$set(e.person,"first_name",a)},expression:"poc.person.first_name"}})],1),a("v-col",[a("v-text-field",{attrs:{label:"Last Name"},model:{value:e.person.last_name,callback:function(a){t.$set(e.person,"last_name",a)},expression:"poc.person.last_name"}})],1)],1),t._l(e.person.phones,(function(e){return a("v-row",{key:e.id},[a("v-col",[a("v-text-field",{attrs:{label:"Phone"},model:{value:e.number,callback:function(a){t.$set(e,"number",a)},expression:"phone.number"}})],1)],1)})),t._l(e.person.emails,(function(e){return a("v-row",{key:e.id},[a("v-col",[a("v-text-field",{attrs:{label:"Email Address"},model:{value:e.address,callback:function(a){t.$set(e,"address",a)},expression:"email.address"}})],1)],1)}))],2)],1)}))],2),a("small",[t._v("*indicates required field")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.relationship_edit_dlg=!1}}},[t._v("\n\t\t\t\t\t\t\t\tClose\n\t\t\t\t\t\t\t")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.updateRelationship}},[t._v("\n\t\t\t\t\t\t\t\tSave\n\t\t\t\t\t\t\t")])],1)],1)],1)],1)],1),a("div",{staticClass:"body-3 mt-3 text-capitalize"},[t._v("\n\t\t\t\t\t\t"+t._s(t.relationship.street_number)+" "+t._s(t.relationship.street_name)),a("br"),t._v("\n\t\t\t\t\t\t"+t._s(t.relationship.city)+", "+t._s(t.relationship.state)+" "+t._s(t.relationship.zip)),a("br"),t._v("\n\t\t\t\t\t\t"+t._s(t.relationship.county)+" County\n\t\t\t\t\t")]),a("a",{staticClass:"blue--text text--darken-1 body-3 mt-3",attrs:{href:t.relationship.website}},[t._v(t._s(t.relationship.website))]),a("div",{staticClass:"text-h5 mt-3"},[t._v("Services"),t.relationship.public_safety?a("span",[t._v(" (Safety) ")]):t._e()]),a("div",{staticClass:"text-h5 font-weight-light"},[t._v(t._s(t.relationship_secondary_info.services))]),t._l(t.relationship.point_of_contacts,(function(e){return a("div",{key:e.personId,staticClass:"mt-3"},[a("div",{staticClass:"text-h5 font-weight-light"},[a("span",{ref:"first_name_"+e.personId,refInFor:!0},[t._v(t._s(e.person.first_name)+" ")]),a("span",{ref:"last_name_"+e.personId,refInFor:!0},[t._v(t._s(e.person.last_name))])]),t._l(e.person.phones,(function(e){return a("div",{key:e.number,staticClass:"text-h5 font-weight-thin"},[a("span",{ref:"phone_"+e.id,refInFor:!0},[t._v(t._s(e.number))])])})),t._l(e.person.emails,(function(e){return a("div",{key:e.address,staticClass:"text-h5 font-weight-thin"},[a("span",{ref:"email_"+e.id,refInFor:!0},[t._v(t._s(e.address))])])}))],2)})),t._l(t.organization_relationship_managers,(function(e){return a("div",{key:e.id},[a("div",{staticClass:"text-h5 font-weight-light mt-3"},[a("span",{ref:"relationship_manager_"+e.personId,refInFor:!0},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.person.first_name)+" "+t._s(e.person.last_name)+" (Relationship Manager)\n\t\t\t\t\t\t\t")]),a("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[a("v-hover",{attrs:{"open-delay":"200"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.hover;return[a("v-btn",t._g(t._b({class:{"on-hover":r},attrs:{icon:"",elevation:r?16:2}},"v-btn",o,!1),n),[a("v-icon",[t._v("\n\t\t\t\t\t\t\tmdi-pencil\n\t\t\t\t\t\t")])],1)]}}],null,!0)})]}}],null,!0),model:{value:t.assign_mgr_dlg,callback:function(e){t.assign_mgr_dlg=e},expression:"assign_mgr_dlg"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Assign Relationship Manager")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-autocomplete",{attrs:{label:"Relationship Manager",items:t.all_relationship_managers,"item-text":"name","item-value":"value","return-object":""},on:{change:t.updateRelationshipManager}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.assign_mgr_dlg=!1}}},[t._v("\n\t\t\t\t\t\t\t\tClose\n\t\t\t\t\t\t\t")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.updateRelationshipManager}},[t._v("\n\t\t\t\t\t\t\t\tSave\n\t\t\t\t\t\t\t")])],1)],1)],1)],1),t._l(e.person.phones,(function(e){return a("div",{key:e.number,staticClass:"text-h5 font-weight-thin"},[t._v(t._s(e.number))])})),t._l(e.person.emails,(function(e){return a("div",{key:e.address,staticClass:"text-h5 font-weight-thin"},[t._v(" "+t._s(e.address))])}))],2)})),a("v-data-table",{attrs:{headers:t.headers,search:t.search,items:t.files,"item-key":"id","multi-sort":""},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-text-field",{staticClass:"mx-4",attrs:{label:"Search Files"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})]},proxy:!0},{key:"item.name",fn:function(e){return[a("p",[t._v(t._s(e.item.name))])]}},{key:"item.date",fn:function(e){return[a("p",[t._v(t._s(e.item.date))])]}},{key:"item.author",fn:function(e){return[a("p",[t._v(t._s(e.item.author))])]}},{key:"item.download",fn:function(e){return[a("v-btn",{attrs:{depressed:"",small:""},on:{click:function(a){return t.downloadFile(e)}}},[t._v("\n\t\t\t\t\t\tDownload\n\t\t\t\t\t\t"),a("v-icon",{attrs:{color:"orange darken-4",right:""}},[t._v("\n\t\t\t\t\t\t\tmdi-arrow-down\n\t\t\t\t\t\t")])],1)]}},{key:"item.remove",fn:function(e){return[a("v-btn",{attrs:{depressed:"",small:""},on:{click:function(a){return t.deleteFile(e)}}},[a("v-icon",{attrs:{color:"orange darken-4",right:""}},[t._v("\n\t\t\t\t\t\t\tmdi-trash-can\n\t\t\t\t\t\t")])],1)]}},{key:"footer",fn:function(){return[a("v-row",[a("v-file-input",{attrs:{label:"Upload new file","show-size":"",counter:"",dense:""},on:{change:t.filesChange}}),a("v-btn",{attrs:{depressed:"",small:"",disabled:t.upload_disabled},on:{click:t.uploadFile}},[t._v("\n\t\t\t\t\t\tUpload\n\t\t\t\t\t\t"),a("v-icon",{attrs:{color:"orange darken-4",right:""}},[t._v("\n\t\t\t\t\t\t\tmdi-arrow-up\n\t\t\t\t\t\t")])],1)],1)]},proxy:!0}])})],2),a("v-col",[a("NoteDialog",{attrs:{item:t.view_note_item},model:{value:t.showNoteDialog,callback:function(e){t.showNoteDialog=e},expression:"showNoteDialog"}}),[a("v-card",{staticClass:"mx-auto"},[a("v-card-title",{staticClass:"white--text orange darken-4"},[t._v("\n\t\t\t\t\t\tNotes:\n\n\t\t\t\t\t\t"),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[a("v-hover",{attrs:{"open-delay":"200"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.hover;return[a("v-btn",t._g(t._b({staticClass:"text--primary",class:{"on-hover":r},attrs:{color:"white",fab:"",small:"",elevation:r?16:2}},"v-btn",o,!1),n),[a("v-icon",[t._v("\n\t\t\t\t\t\t\tmdi-plus\n\t\t\t\t\t\t")])],1)]}}],null,!0)})]}}]),model:{value:t.add_note_dlg,callback:function(e){t.add_note_dlg=e},expression:"add_note_dlg"}},[a("v-form",{ref:"new_note_form",model:{value:t.valid_note,callback:function(e){t.valid_note=e},expression:"valid_note"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Note")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{staticClass:"col-3"},[a("v-autocomplete",{attrs:{items:t.add_note_form.types,label:"Type"},model:{value:t.add_note_form.type,callback:function(e){t.$set(t.add_note_form,"type",e)},expression:"add_note_form.type"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-textarea",{attrs:{rules:t.note_text_rule},model:{value:t.add_note_form.text,callback:function(e){t.$set(t.add_note_form,"text",e)},expression:"add_note_form.text"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.add_note_dlg=!1}}},[t._v("\n\t\t\t\t\t\t\t\t\tClose\n\t\t\t\t\t\t\t\t")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.addNote}},[t._v("\n\t\t\t\t\t\t\t\t\tSave\n\t\t\t\t\t\t\t\t")])],1)],1)],1)],1)],1),a("v-card-text",{staticClass:"pt-4"},[a("v-card-title",[t._v("Relationship History")]),a("v-divider"),a("v-row",[a("v-col",[a("v-text-field",{attrs:{placeholder:"Search","append-icon":"mdi-magnify"},model:{value:t.note_search,callback:function(e){t.note_search=e},expression:"note_search"}})],1),a("v-col",[a("v-switch",{attrs:{label:t.switch_label(),color:"red","hide-details":""},on:{change:t.set_notes_view},model:{value:t.history_switch,callback:function(e){t.history_switch=e},expression:"history_switch"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{label:"Start Date","prepend-icon":"mdi-calendar",readonly:"",clearable:""},model:{value:t.formattedStartDate,callback:function(e){t.formattedStartDate=e},expression:"formattedStartDate"}},"v-text-field",o,!1),n))]}}]),model:{value:t.menu1,callback:function(e){t.menu1=e},expression:"menu1"}},[a("v-date-picker",{on:{input:function(e){t.menu1=!1}},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}})],1)],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{label:"End Date","prepend-icon":"mdi-calendar",readonly:"",clearable:""},model:{value:t.formattedEndDate,callback:function(e){t.formattedEndDate=e},expression:"formattedEndDate"}},"v-text-field",o,!1),n))]}}]),model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[a("v-date-picker",{on:{input:function(e){t.menu2=!1}},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}})],1)],1),a("v-spacer")],1)],1),a("v-divider"),a("v-virtual-scroll",{attrs:{items:t.filteredList,"item-height":50,height:"300"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.item;return[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"font-weight-thin"},[t._v("\n\t\t\t\t\t\t\t\t\tAuthor: "+t._s(n.author.first_name)+" "+t._s(n.author.last_name)+" - "+t._s(n.date)+"\n\t\t\t\t\t\t\t\t")]),a("v-list-item-subtitle",[t._v(t._s(n.text))])],1),a("v-list-item-action",[a("v-btn",{attrs:{depressed:"",small:""},on:{click:function(e){return e.stopPropagation(),t.openNoteDialog(n)}}},[t._v("\n\t\t\t\t\t\t\t\t\tOpen\n\t\t\t\t\t\t\t\t"),a("v-icon",{attrs:{color:"orange darken-4",right:""}},[t._v("\n\t\t\t\t\t\t\t\t\tmdi-open-in-new\n\t\t\t\t\t\t\t\t")])],1)],1)],1)]}}])})],1)]],2)],1)],1)},Jt=[],Qt=a("bd86"),Xt=0,Kt=1,Yt=2,te=3,ee={name:"relationship",components:{NoteDialog:Vt},data:function(){var t;return t={showNoteDialog:!1,relationship:"",relationship_edit_dlg:!1,relationship_secondary_info:"",search:"",status_options:["hot","warm","cold"],current_status:"",assign_mgr_dlg:!1,all_relationship_managers:[],organization_relationship_managers:[],files:[],uploadedFiles:[],uploadError:null,currentStatus:null,uploadFieldName:"files",file_upload:"",upload_disabled:!0},Object(Qt["a"])(t,"search",""),Object(Qt["a"])(t,"view_note_item",{}),Object(Qt["a"])(t,"note_search",""),Object(Qt["a"])(t,"history_switch",!0),Object(Qt["a"])(t,"notes",[]),Object(Qt["a"])(t,"add_note_dlg",!1),Object(Qt["a"])(t,"valid_note",!0),Object(Qt["a"])(t,"note_text_rule",[function(t){return!!t||"Text is required"}]),Object(Qt["a"])(t,"add_note_form",{types:["General","Contact"],text:"",type:"General"}),Object(Qt["a"])(t,"view_note_dlg",!1),Object(Qt["a"])(t,"notes_type_selected",{general:!1,contact:!0}),Object(Qt["a"])(t,"menu1",!1),Object(Qt["a"])(t,"menu2",!1),Object(Qt["a"])(t,"start_date",(new Date).toISOString().substr(0,10)),Object(Qt["a"])(t,"end_date",(new Date).toISOString().substr(0,10)),Object(Qt["a"])(t,"formattedStartDate",""),Object(Qt["a"])(t,"formattedEndDate",""),t},watch:{start_date:function(t){this.formattedStartDate=this.formatDate(this.start_date)},end_date:function(t){this.formattedEndDate=this.formatDate(this.end_date)}},methods:Object(Qt["a"])({close_note_dlg:function(){this.view_note_dlg=!1},openNoteDialog:function(t){this.showNoteDialog=!0,this.view_note_item=t},setModal:function(t){this.view_note_item=t,this.open_note_dlg()},switch_label:function(){return this.history_switch?"Contact History":"General History"},addNote:function(t){var e=this;if(this.$refs.new_note_form.validate()){var a={organizationId:this.relationship.id,personId:"5693164c-5da4-4d07-ad24-d9f39befc823",text:this.add_note_form.text,type:this.add_note_form.type.toLowerCase()};bt.create(a).then((function(t){e.setRelationship(e.relationship.id)})).catch((function(t){console.log(t)})),this.add_note_form.text="",this.add_note_dlg=!1}},deleteNote:function(t){var e=this;bt.delete(t.id).then((function(t){e.setRelationship(e.relationship.id)})).catch((function(t){console.log(t)})),this.showNoteDialog=!1},set_notes_view:function(){this.notes_type_selected.general=!this.history_switch,this.notes_type_selected.contact=this.history_switch},formatDate:function(t){if(!t)return null;var e=t.split("-"),a=Object(ut["a"])(e,3),n=a[0],o=a[1],r=a[2];return"".concat(o,"/").concat(r,"/").concat(n)},downloadFile:function(t){var e={fileId:t.item.id};xt.download(t.item.filepath,e).then((function(t){var e=window.URL.createObjectURL(new Blob([t.data])),a=document.createElement("a");a.href=e,a.setAttribute("download","file.pdf"),document.body.appendChild(a),a.click()})).catch((function(t){console.log(t)}))},deleteFile:function(t){var e=this,a={filePath:t.item.filePath};xt.delete(t.item.id,a).then((function(t){e.populateFiles(e.reltionship.id)})).catch((function(t){console.log(t)}))},reset:function(){this.currentStatus=Xt,this.uploadedFiles=[],this.uploadError=null},uploadFile:function(){var t=this,e=new FormData;e.append("file",this.file_upload),e.append("organizationId",this.relationship.id),e.append("personId","5693164c-5da4-4d07-ad24-d9f39befc823"),this.formData=e,this.currentStatus=Kt,xt.upload(this.formData).then((function(e){t.uploadedFiles=[].concat(e),t.currentStatus=Yt})).catch((function(e){t.uploadError=e.response,t.currentStatus=te})),this.formData="",this.upload_disabled=!0,this.populateFiles(this.relationship.id)},filesChange:function(t){this.file_upload=t,this.upload_disabled=!1},populateFiles:function(t){var e=this;xt.getAll(t).then((function(t){e.files=t.data.map((function(t){var e=Intl.DateTimeFormat("en-US").format(new Date(t.createdAt));return{filepath:t.filePath.substr(t.filePath.indexOf("/")+1,t.filePath.length),date:e,author:t.person.first_name+" "+t.person.last_name,name:t.fileName,id:t.id}}))})).catch((function(t){console.log(t)}))},updateRelationship:function(){var t=this;this.relationship_edit_dlg=!1;var e={name:this.relationship.name,street_number:this.relationship.street_number,street_name:this.relationship.street_name,city:this.relationship.city,state:this.relationship.state,zip:this.relationship.zip,county:this.relationship.county,website:this.relationship.website,public_safety:this.relationship.public_safety,status:this.current_status};Z.update(this.relationship.id,e).then((function(t){console.log(t.data)})).catch((function(t){console.log(t)})),this.relationship.point_of_contacts.forEach((function(e){var a={first_name:t.$refs["first_name_"+e.personId][0]["innerHTML"],last_name:t.$refs["last_name_"+e.personId][0]["innerHTML"]};vt.update(e.personId,a).then((function(t){})).catch((function(t){console.log(t)})),e.person.phones.forEach((function(e){var a={number:t.$refs["phone_"+e.id][0]["innerHTML"]};mt.update(e.id,a).then((function(t){})).catch((function(t){console.log(t)}))})),e.person.emails.forEach((function(e){var a={number:t.$refs["email_"+e.id][0]["innerHTML"]};EmailDataService.update(e.id,a).then((function(t){})).catch((function(t){console.log(t)}))}))})),this.relationship.relationship_managers.forEach((function(t){var e={organizationId:t.organizationId,personId:t.personId};OrganizationManagerDataService.update(t.organizationId,t.personId,e)}))},setRelationship:function(){var t=this;Z.get(this.$route.params.organizationId).then((function(e){t.notes=e.data.notes.map((function(t){var e=Intl.DateTimeFormat("en-US").format(new Date(t.createdAt));return{id:t.id,text:t.text,date:e,author:t.person,type:t.type}})),t.relationship=e.data,t.organization_relationship_managers=e.data.relationship_managers,t.populateFiles(t.relationship.id),t.relationship_secondary_info=e.data.relationship,t.current_status=e.data.relationship.status,console.log(t.relationship)})).catch((function(t){console.log(t.message)}))},populateRelationshipManagersList:function(){var t=this;_t.getAll().then((function(e){t.all_relationship_managers=e.data.map((function(t){return{name:t.person.first_name+" "+t.person.last_name,value:t.personId}}))})).catch((function(t){console.log(t)}))},updateRelationshipManager:function(t){var e=this;this.assign_mgr_dlg=!1;var a=this.relationship.id,n={organizationId:a,personId:t.value},o=this.relationship.relationship_managers[0].personId;_t.update(a,o,n).then((function(t){PartnerDataService.get(e.relationship.id).then((function(t){e.relationship=t.data,e.organization_relationship_managers=t.data.relationship_managers})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))}},"formatDate",(function(t){if(!t)return null;var e=t.split("-"),a=Object(ut["a"])(e,3),n=a[0],o=a[1],r=a[2];return"".concat(o,"/").concat(r,"/").concat(n)})),computed:{headers:function(){var t=[{text:"File Name",value:"name",width:"80px"},{text:"Date",value:"date",width:"80px"},{text:"Author",value:"author",width:"100px"},{text:"",value:"download",width:"100px"},{text:"",value:"remove",width:"100px"}];return t},filteredList:function(){var t=this;return this.notes.filter((function(e){var a=!0,n=!0,o=new Date(e.date).toISOString().substr(0,10);if(""!==t.formattedStartDate&&null!==t.formattedStartDate&&(a=new Date(t.formattedStartDate).toISOString().substr(0,10)<o),""!==t.formattedEndDate&&null!==t.formattedEndDate&&(n=new Date(t.formattedEndDate).toISOString().substr(0,10)>o),t.notes_type_selected[e.type])return(e.author.first_name.toLowerCase().includes(t.note_search.toLowerCase())||e.author.last_name.toLowerCase().includes(t.note_search.toLowerCase()))&&a&&n}))}},mounted:function(){this.reset(),this.setRelationship(),this.populateRelationshipManagersList()}},ae=ee,ne=(a("2136"),Object(l["a"])(ae,Zt,Jt,!1,null,"6bce6ae6",null)),oe=ne.exports;d()(ne,{VAutocomplete:At["a"],VBtn:v["a"],VCard:X["a"],VCardActions:K["a"],VCardText:K["b"],VCardTitle:K["c"],VCheckbox:Y["a"],VCol:V["a"],VContainer:D["a"],VDataTable:et["a"],VDatePicker:Pt["a"],VDialog:at["a"],VDivider:Nt["a"],VFileInput:Et["a"],VForm:nt["a"],VHover:ot["a"],VIcon:f["a"],VLabel:Lt["a"],VListItem:Tt["a"],VListItemAction:Rt["a"],VListItemContent:Mt["a"],VListItemSubtitle:Mt["b"],VListItemTitle:Mt["c"],VMenu:Ht["a"],VRow:I["a"],VSelect:rt["a"],VSpacer:m["a"],VSwitch:Bt["a"],VTextField:it["a"],VTextarea:qt["a"],VVirtualScroll:Ut["a"]});var re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list row"},[a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search by name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.searchTitle}},[t._v("\n          Search\n        ")])])])]),a("div",{staticClass:"col-md-12"},[a("h4",[t._v("Contacts Table")]),a("v-data-table",{attrs:{headers:t.headers,items:t.volunteers,"item-key":"id","multi-sort":""},on:{"click:row":t.nav},scopedSlots:t._u([{key:"item.name",fn:function(e){var n=e.item;return[null!==n.first_name?[a("button",{on:{click:function(e){return t.removePerson(n)}}},[t._v("X")]),a("span",{staticClass:"red--text"},[t._v(t._s(n.first_name+" "+n.last_name))]),n.public_safety?a("span",[t._v(" (Public Safety)")]):t._e()]:null!==n.partner?[a("span",{staticClass:"purple--text"},[t._v(t._s(n.name))]),n.public_safety?a("span",[t._v(" (Public Safety)")]):t._e()]:t._e()]}},{key:"item.address",fn:function(e){var n=e.item;return[a("address",[t._v("\n              "+t._s(n.street_number)+" "+t._s(n.street_name)),a("br"),t._v("\n              "+t._s(n.city)+", "+t._s(n.state)+" "+t._s(n.zip)+"\n            ")])]}}])}),a("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[a("v-hover",{attrs:{"open-delay":"200"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.hover;return[a("v-btn",t._g(t._b({class:{"on-hover":r},attrs:{text:"",elevation:r?16:2}},"v-btn",o,!1),n),[t._v("\n      Add Contact\n      "),a("v-icon",[t._v("\n        mdi-plus\n      ")])],1)]}}],null,!0)})]}}]),model:{value:t.add_person_dlg,callback:function(e){t.add_person_dlg=e},expression:"add_person_dlg"}},[a("v-card",[a("v-form",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Contact Information")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"First Name",required:""},model:{value:t.add_person.firstname,callback:function(e){t.$set(t.add_person,"firstname",e)},expression:"add_person.firstname"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Last Name",required:""},model:{value:t.add_person.lastname,callback:function(e){t.$set(t.add_person,"lastname",e)},expression:"add_person.lastname"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}})],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Street Number"},model:{value:t.add_person.street_number,callback:function(e){t.$set(t.add_person,"street_number",e)},expression:"add_person.street_number"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Street Name"},model:{value:t.add_person.street_name,callback:function(e){t.$set(t.add_person,"street_name",e)},expression:"add_person.street_name"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"3",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"City"},model:{value:t.add_person.city,callback:function(e){t.$set(t.add_person,"city",e)},expression:"add_person.city"}})],1),a("v-col",{attrs:{cols:"2"}},[a("v-text-field",{attrs:{label:"State"},model:{value:t.add_person.state,callback:function(e){t.$set(t.add_person,"state",e)},expression:"add_person.state"}})],1),a("v-col",{attrs:{cols:"3"}},[a("v-text-field",{attrs:{label:"Zip"},model:{value:t.add_person.zip,callback:function(e){t.$set(t.add_person,"zip",e)},expression:"add_person.zip"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"County"},model:{value:t.add_person.county,callback:function(e){t.$set(t.add_person,"county",e)},expression:"add_person.county"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"Primary Phone"},model:{value:t.add_person.primaryPhone,callback:function(e){t.$set(t.add_person,"primaryPhone",e)},expression:"add_person.primaryPhone"}})],1)],1)],1),a("small",[t._v("*indicates required field")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.add_person_dlg=!1}}},[t._v("\n          Close\n        ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.addPerson}},[t._v("\n          Save\n        ")])],1)],1)],1)],1),a("br"),a("button",{staticClass:"m-3 btn btn-sm btn-danger",on:{click:t.removeAllVolunteers}},[t._v("\n      Remove All\n    ")]),a("br"),a("button",{staticClass:"m-3 btn btn-sm btn-danger",on:{click:t.refreshList}},[t._v("\n      Refresh List\n    ")])],1),a("div",{staticClass:"col-md-6"},[t.currentVolunteer?a("div",[a("h4",[t._v("Volunteer")]),a("div",[t._m(0),t._v(" "+t._s(t.currentVolunteer.name)+"\n      ")]),a("div",[t._m(1),t._v(" "+t._s(t.currentVolunteer.description)+"\n      ")]),a("div",[t._m(2),t._v(" "+t._s(t.currentVolunteer.published?"Published":"Pending")+"\n      ")]),a("a",{staticClass:"badge badge-warning",attrs:{href:"/Volunteers/"+t.currentVolunteer.id}},[t._v("\n        Edit\n      ")]),a("p",[t._v("hit3")])]):a("div",[a("br"),a("p",[t._v("Please click on a Volunteer...")])])])])},ie=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[a("strong",[t._v("Title:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[a("strong",[t._v("Description:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[a("strong",[t._v("Status:")])])}],se=function(){function t(){Object(L["a"])(this,t)}return Object(T["a"])(t,[{key:"getAll",value:function(){return H.get("emails")}},{key:"get",value:function(t){return H.get("/emails/".concat(t))}},{key:"create",value:function(t){return H.post("/emails",t)}},{key:"update",value:function(t,e){return H.put("/emails/".concat(t),e)}},{key:"delete",value:function(t){return H.delete("/emails/".concat(t))}},{key:"deleteAll",value:function(){return H.delete("/emails")}}]),t}(),le=(new se,{name:"volunteers-list",data:function(){return{volunteers:[],add_person_dlg:!1,currentVolunteer:null,currentIndex:-1,name:"",add_person:{firstname:"",lastname:"",street_number:"",street_name:"",city:"",state:"",zip:"",county:"",primaryPhone:"",secondaryPhone:""}}},computed:{headers:function(){var t=[{text:"Name",value:"name",width:"80px"},{text:"Address",value:"address",width:"100px"},{text:"Email",value:"email",width:"80px"},{text:"Phone",value:"primaryPhone",width:"100px"},{text:"County",value:"county",width:"80px"},{text:"ZIP",value:"zip",width:"80px"}];return t}},methods:{nav:function(t){console.log(t.id+" is the ID")},retrieveVolunteers:function(){var t=this;vt.getAll().then((function(e){t.volunteers=e.data})).catch((function(t){console.log(t.message)}))},refreshList:function(){this.retrieveVolunteers(),this.currentVolunteers=null,this.currentIndex=-1},setActiveVolunteer:function(t,e){this.currentVolunteer=t,this.currentIndex=e},removeAllVolunteers:function(){var t=this;vt.deleteAll().then((function(e){console.log(e.data),t.refreshList()})).catch((function(t){console.log(t)}))},searchTitle:function(){var t=this;vt.findByName(this.first_name).then((function(e){t.volunteers=e.data,console.log(e.data)})).catch((function(t){console.log(t)}))},addPerson:function(){var t=this,e={first_name:this.add_person.firstname,last_name:this.add_person.lastname,street_number:this.add_person.street_number,street_name:this.add_person.street_name,city:this.add_person.city,state:this.add_person.state,zip:this.add_person.zip,county:this.add_person.county};this.add_person.primaryPhone;e.services=this.add_person.services,vt.create(e).then((function(e){console.log(e),t.retrieveVolunteers(),t.add_organization_dlg=!1})).catch((function(t){console.log(t)}))},removePerson:function(t){var e=this;confirm("Are you sure you want to remove "+t.first_name+" "+t.last_name+" from the table?")&&vt.delete(t.id).then((function(t){console.log(t.data),e.refreshList()})).catch((function(t){console.log(t)}))}},mounted:function(){this.retrieveVolunteers()}}),ce=le,de=(a("275d"),Object(l["a"])(ce,re,ie,!1,null,"091947ec",null)),ue=de.exports;d()(de,{VBtn:v["a"],VCard:X["a"],VCardActions:K["a"],VCardText:K["b"],VCardTitle:K["c"],VCol:V["a"],VContainer:D["a"],VDataTable:et["a"],VDialog:at["a"],VForm:nt["a"],VHover:ot["a"],VIcon:f["a"],VRow:I["a"],VSpacer:m["a"],VTextField:it["a"]}),n["a"].use(y["a"]);var pe=new y["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:P},{path:"/organizations",name:"organizations",component:lt},{path:"/partner/:organizationId",name:"partner",component:Gt,props:!0},{path:"/relationship/:organizationId",name:"relationship",component:oe},{path:"/contacts",name:"contacts",component:ue}]}),ve=a("f309"),fe=new ve["a"]({rtl:!1,theme:{dark:!1,themes:{dark:{primary:"#E57373",accent:"#FF4081",secondary:"#ffe18d",success:"#4CAF50",info:"#2196F3",warning:"#FB8C00",error:"#FF5252"},light:{primary:"#E8E8E0",accent:"#C62828",secondary:"#30b1dc",success:"#4CAF50",info:"#2196F3",warning:"#FB8C00",error:"#FF5252"}}}});n["a"].use(ve["a"]),n["a"].config.productionTip=!1,new n["a"]({router:pe,vuetify:fe,render:function(t){return t(b)}}).$mount("#app")},"68b2":function(t,e,a){"use strict";var n=a("3770"),o=a.n(n);o.a},"999d":function(t,e,a){},"9b19":function(t,e,a){t.exports=a.p+"img/logo.63a7d78d.svg"},add6:function(t,e,a){}});
//# sourceMappingURL=app.3620081e.js.map