(function(e){function t(t){for(var a,s,r=t[0],l=t[1],c=t[2],u=0,p=[];u<r.length;u++)s=r[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&p.push(o[s][0]),o[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);d&&d(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,r=1;r<n.length;r++){var l=n[r];0!==o[l]&&(a=!1)}a&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},o={app:0},i=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var d=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var a=n("64a9"),o=n.n(a);o.a},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-app-bar",{attrs:{app:"",color:"primary"}},[a("v-app-bar",{staticClass:"hidden-md-and-down",attrs:{color:"primary",flat:""}},[a("v-toolbar-title",[a("router-link",{attrs:{to:"/"}},[a("v-img",{staticClass:"mx-2",attrs:{src:n("8e48"),"max-height":"auto","max-width":"60%",contain:""}})],1)],1),a("router-link",{staticClass:"red--text text--darken-2 mr-3",attrs:{to:"/home"}},[e._v("Home")]),e._v(" |\n    "),a("router-link",{staticClass:"red--text text--darken-2 mr-3 ml-3 ",attrs:{to:"/contacts"}},[e._v("Contacts")]),e._v(" |\n    "),a("router-link",{staticClass:"red--text text--darken-2 ml-3 mr-3",attrs:{to:"/organizations"}},[e._v("Connections")]),e._v(" |\n    "),a("router-link",{directives:[{name:"show",rawName:"v-show",value:e.verifyAccess("modify"),expression:"verifyAccess('modify')"}],staticClass:"red--text text--darken-2 ml-3 mr-3",attrs:{to:"/users"}},[e._v("Users")]),a("v-spacer"),a("v-btn",{attrs:{depressed:"",color:"red"},on:{click:e.logout}},[e._v("\n      Log Out\n    ")])],1)],1),a("v-main",{staticStyle:{"background-color":"rgba(45, 70, 40, 0.04)"}},[a("v-app-bar",{staticClass:"hidden-lg-and-up",attrs:{app:"",color:"primary"}},[a("router-link",{attrs:{to:"/home"}},[a("v-img",{staticClass:"mx-2",attrs:{src:n("8e48"),"max-height":"auto","max-width":"50%",contain:""}})],1),a("v-spacer"),a("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,o=t.attrs;return[a("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",o,!1),n),[a("v-app-bar-nav-icon")],1)]}},{key:"default",fn:function(t){return[a("v-card",[a("v-toolbar",{attrs:{flat:"",color:"primary"}},[a("v-toolbar-title",[a("router-link",{attrs:{to:"/home"}},[a("v-img",{staticClass:"mx-2",attrs:{src:n("8e48"),"max-height":"auto","max-width":"60%",contain:""}})],1)],1),a("v-spacer"),a("v-btn",{attrs:{flat:"",icon:""},on:{click:function(e){t.value=!1}}},[a("v-icon",[e._v("close")])],1)],1),a("v-list",{attrs:{nav:"",dense:""}},[a("v-list-item-group",{attrs:{"active-class":"deep-purple--text text--accent-4"},model:{value:e.group,callback:function(t){e.group=t},expression:"group"}},[a("v-list-item",[a("v-list-item-icon",[a("v-icon",[e._v("home")])],1),a("v-list-item-title",[a("btn",{on:{click:function(e){t.value=!1}}},[a("router-link",{staticClass:"red--text text--darken-2 mr-3",attrs:{to:"/home"}},[e._v("Home")])],1)],1)],1),a("v-list-item",{directives:[{name:"show",rawName:"v-show",value:e.verifyAccess("modify"),expression:"verifyAccess('modify')"}]},[a("v-list-item-icon",[a("v-icon",[e._v("groups")])],1),a("v-list-item-title",[a("btn",{on:{click:function(e){t.value=!1}}},[a("router-link",{staticClass:"red--text text--darken-2 mr-3",attrs:{to:"/home"}},[e._v("Users")])],1)],1)],1),a("v-list-item",[a("v-list-item-icon",[a("v-icon",[e._v("contacts")])],1),a("v-list-item-title",[a("btn",{on:{click:function(e){t.value=!1}}},[a("router-link",{staticClass:"red--text text--darken-2 mr-3",attrs:{to:"/home"}},[e._v("Contacts")])],1)],1)],1),a("v-list-item",[a("v-list-item-icon",[a("v-icon",[e._v("domain")])],1),a("v-list-item-title",[a("btn",{on:{click:function(e){t.value=!1}}},[a("router-link",{staticClass:"red--text text--darken-2 mr-3",attrs:{to:"/home"}},[e._v("Connections")])],1)],1)],1)],1)],1)],1)]}}]),model:{value:e.navDialog,callback:function(t){e.navDialog=t},expression:"navDialog"}})],1),a("router-view")],1)],1)},i=[],s=(n("7f7f"),n("6762"),n("2fdb"),n("a481"),n("d225")),r=n("b0b4"),l=n("bc3a"),c=n.n(l),d=c.a.create({baseURL:"http://ec2-3-84-201-28.compute-1.amazonaws.com:8080",headers:{"Content-type":"application/json"}}),u=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("roles")}},{key:"get",value:function(e){return d.get("/roles/".concat(e))}}]),e}(),p=new u,m=(n("c1c3"),{name:"App",data:function(){return{navDialog:!1,group:null,permissions:[],userRole:!1}},methods:{logout:function(){this.$authenticated=!1,this.$session.destroy(),this.$router.replace({name:"login"})},verifyAccess:function(e){switch(e){case"modify":return!!this.permissions.includes("modifyUsers");default:return!1}},setPagePermissions:function(){var e=this,t=this.$session.get("userRole");p.get(t).then((function(t){e.permissions=t.data.permissions.map((function(e){return e.name})),console.log(e.permissions)})).catch((function(e){console.log(e)}))},findUserRole:function(){var e=this.$session.get("userRole");1==e&&(this.userRole=!0)}},mounted:function(){this.setPagePermissions()}}),_=m,v=(n("034f"),n("2877")),f=n("6544"),h=n.n(f),g=n("7496"),b=n("40dc"),y=n("5bc1"),x=n("8336"),k=n("b0af"),w=n("169a"),z=n("132d"),C=n("adda"),O=n("8860"),R=n("da13"),P=n("1baa"),A=n("34c3"),I=n("5d23"),V=n("f6c4"),N=n("2fa4"),S=n("71d9"),$=n("2a7f"),E=Object(v["a"])(_,o,i,!1,null,null,null),j=E.exports;h()(E,{VApp:g["a"],VAppBar:b["a"],VAppBarNavIcon:y["a"],VBtn:x["a"],VCard:k["a"],VDialog:w["a"],VIcon:z["a"],VImg:C["a"],VList:O["a"],VListItem:R["a"],VListItemGroup:P["a"],VListItemIcon:A["a"],VListItemTitle:I["b"],VMain:V["a"],VSpacer:N["a"],VToolbar:S["a"],VToolbarTitle:$["a"]});var D=n("8c4f"),M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",[n("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[n("div",{staticClass:"text-h2 red--text text--darken-4"},[e._v("Northeast Florida Data Dashboard")])])],1),n("v-row",{staticClass:"text-center"},[n("v-col",{staticClass:"cols-7"},[n("router-link",{staticClass:"text-h4 grey--text text--darken-2",attrs:{to:"/contacts"}},[e._v("Contacts")]),n("router-link",{staticClass:"text-h4 grey--text text--darken-2",attrs:{to:"/organizations"}},[e._v(" | Connections")]),n("router-link",{directives:[{name:"show",rawName:"v-show",value:e.verifyAccess("modify"),expression:"verifyAccess('modify')"}],staticClass:"text-h4 grey--text text--darken-2",attrs:{to:"/users"}},[e._v(" | Users")])],1)],1)],1)},T=[],F={name:"Home",data:function(){return{permissions:[]}},beforeCreate:function(){this.$session.exists()||this.$router.push("/")},methods:{logout:function(){this.$session.destroy(),this.$router.push("/")},verifyAccess:function(e){switch(e){case"modify":return!!this.permissions.includes("modifyUsers");default:return!1}},setPagePermissions:function(){var e=this,t=this.$session.get("userRole");p.get(t).then((function(t){e.permissions=t.data.permissions.map((function(e){return e.name})),console.log(e.permissions)})).catch((function(e){console.log(e)}))}},mounted:function(){this.setPagePermissions()}},q=F,L=n("62ad"),X=n("a523"),U=n("0fd9"),B=Object(v["a"])(q,M,T,!1,null,null,null),H=B.exports;h()(B,{VCol:L["a"],VContainer:X["a"],VRow:U["a"]});var W=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",[n("v-col",{attrs:{sm:"12",md:"6",lg:"6"}},[n("div",{staticClass:"red--text text--darken-2 page-title"},[e._v("Connections")])])],1),n("v-row",[n("v-col",[n("v-row",{directives:[{name:"show",rawName:"v-show",value:e.verifyAccess("create"),expression:"verifyAccess('create')"}]},[n("v-col",[n("v-hover",{attrs:{"open-delay":"200"},scopedSlots:e._u([{key:"default",fn:function(t){t.hover;return[n("v-btn",{attrs:{text:"",color:"red"},on:{click:function(t){e.add_organization_dlg=!0}}},[e._v("\n              Add New Organization\n              "),n("v-icon",[e._v("\n                mdi-plus\n              ")])],1)]}}])})],1)],1),n("v-card",{attrs:{outlined:"",elevation:"3 text-wrap"}},[n("v-card-text",[n("v-row",[n("v-col",{staticClass:"col-6"},[n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search Table","single-line":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),n("v-data-table",{staticClass:"text-capitalize",attrs:{headers:e.headers,search:e.search,items:e.organizations,"item-key":"id","multi-sort":""},on:{"click:row":e.nav},scopedSlots:e._u([{key:"body.append",fn:function(t){t.item;return[n("div",{staticClass:"row",staticStyle:{"padding-bottom":"20px"}},[n("div",{staticClass:"col",staticStyle:{"margin-bottom":"-25px",padding:"5px"}},[n("JsonExcel",{staticClass:"btn btn-default",attrs:{data:e.excel_data,fields:e.excel_fields,worksheet:"My Worksheet",name:"filename.xls"}},[n("v-btn",{attrs:{text:"",color:"blue"}},[e._v("\n                    Download to Excel File\n                  ")])],1)],1)])]}},{key:"item.name",fn:function(t){var n=t.item;return[e._v("\n            "+e._s(n.name)+"\n          ")]}},{key:"item.address",fn:function(t){var a=t.item;return[n("address",{staticClass:"text-capitalize"},[e._v("\n              "+e._s(a.address)+"\n            ")])]}},{key:"item.county",fn:function(t){var n=t.item;return[e._v("\n          "+e._s(n.counties)+"\n        ")]}},{key:"item.manager",fn:function(t){var n=t.item;return[e._v("\n          "+e._s(n.manager)+"\n        ")]}}])})],1)],1)],1)],1),n("v-dialog",{attrs:{"max-width":"700px"},model:{value:e.add_organization_dlg,callback:function(t){e.add_organization_dlg=t},expression:"add_organization_dlg"}},[n("v-card",[n("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Add a New Organization")])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"8",sm:"8",md:"8"}},[n("v-text-field",{attrs:{label:"*Agency Name",required:"",rules:e.businessNameRule},model:{value:e.add_organization.name,callback:function(t){e.$set(e.add_organization,"name",t)},expression:"add_organization.name"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"4",sm:"12",md:"4"}},[n("v-text-field",{attrs:{label:"*St Number",required:"",rules:e.streetNumberRule},model:{value:e.add_organization.street_number,callback:function(t){e.$set(e.add_organization,"street_number",t)},expression:"add_organization.street_number"}})],1),n("v-col",{attrs:{cols:"6",sm:"12",md:"6"}},[n("v-text-field",{attrs:{label:"*Street Name",required:""},model:{value:e.add_organization.street_name,callback:function(t){e.$set(e.add_organization,"street_name",t)},expression:"add_organization.street_name"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"5",sm:"12",md:"5"}},[n("v-text-field",{attrs:{label:"*City",required:"",rules:e.streetNameRule},model:{value:e.add_organization.city,callback:function(t){e.$set(e.add_organization,"city",t)},expression:"add_organization.city"}})],1),n("v-col",{attrs:{cols:"3",sm:"12",md:"3"}},[n("v-select",{attrs:{required:"",items:e.states,label:"*State",rules:e.stateRule},model:{value:e.add_organization.state,callback:function(t){e.$set(e.add_organization,"state",t)},expression:"add_organization.state"}})],1),n("v-col",{attrs:{cols:"3",sm:"12",md:"3"}},[n("v-text-field",{attrs:{label:"*Zip",required:"",rules:e.zipRule},model:{value:e.add_organization.zip,callback:function(t){e.$set(e.add_organization,"zip",t)},expression:"add_organization.zip"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"4",sm:"12",md:"4"}},[n("v-text-field",{attrs:{label:"Website"},model:{value:e.add_organization.website,callback:function(t){e.$set(e.add_organization,"website",t)},expression:"add_organization.website"}})],1),n("v-col",{attrs:{cols:"3",sm:"12",md:"3"}},[n("v-text-field",{attrs:{label:"Phone",rules:e.businessPhoneRule},model:{value:e.add_organization.phone,callback:function(t){e.$set(e.add_organization,"phone",t)},expression:"add_organization.phone"}})],1),n("v-col",{attrs:{cols:"4",sm:"12",md:"4"}},[n("v-select",{attrs:{multiple:"",required:"",items:e.all_counties,rules:e.countyRule,label:"*Counties"},model:{value:e.add_organization.county,callback:function(t){e.$set(e.add_organization,"county",t)},expression:"add_organization.county"}})],1)],1),n("v-row"),n("v-row",[n("v-col",{attrs:{cols:"4",sm:"12",md:"4"}},[n("v-select",{attrs:{items:e.mou_options,required:"",label:"*MOU Partner?",rules:e.mouRule},model:{value:e.add_organization.mou,callback:function(t){e.$set(e.add_organization,"mou",t)},expression:"add_organization.mou"}})],1),n("v-col",{attrs:{cols:"5",sm:"12",md:"5"}},[n("v-select",{attrs:{multiple:"",required:"",items:e.all_lines_of_business,rules:e.lobRule,label:"*Line of Business"},model:{value:e.add_organization.line_of_business,callback:function(t){e.$set(e.add_organization,"line_of_business",t)},expression:"add_organization.line_of_business"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"5",sm:"12",md:"5"}},[n("v-select",{attrs:{multiple:"",required:"",items:e.all_arc_relationships,rules:e.arcFunctionRule,label:"*Arc Relationships"},model:{value:e.add_organization.arc_relationship,callback:function(t){e.$set(e.add_organization,"arc_relationship",t)},expression:"add_organization.arc_relationship"}})],1),n("v-col",{attrs:{cols:"5",sm:"12",md:"5"}},[n("v-select",{attrs:{multiple:"",required:"",items:e.all_agency_types,rules:e.agencyRule,label:"*Agency Types"},model:{value:e.add_organization.agency_type,callback:function(t){e.$set(e.add_organization,"agency_type",t)},expression:"add_organization.agency_type"}})],1)],1),n("v-row",{staticClass:"mt-3"},[n("v-col",{attrs:{cols:"5",sm:"12",md:"5"}},[n("v-textarea",{attrs:{rows:"2",label:"Contact Protocol"}})],1),n("v-col",{attrs:{cols:"5",sm:"12",md:"5"}},[n("v-textarea",{attrs:{rows:"2",label:"*Services",rules:e.serviceDescriptionRule}})],1)],1)],1),n("small",[e._v("*indicates required field")])],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.add_organization_dlg=!1}}},[e._v("\n          Close\n        ")]),n("v-btn",{attrs:{disabled:!e.valid,color:"blue darken-1",text:""},on:{click:e.addOrganization}},[e._v("\n          Save\n        ")])],1)],1)],1)],1)],1)},Z=[],Y=(n("ac6a"),n("bd86")),K=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("organizations")}},{key:"get",value:function(e){return d.get("/organizations/".concat(e))}},{key:"create",value:function(e){return d.post("/organizations",e)}},{key:"update",value:function(e,t){return d.put("/organizations/".concat(e),t)}},{key:"delete",value:function(e){return d.delete("/organizations/".concat(e))}},{key:"deleteAll",value:function(){return d.delete("/organizations")}}]),e}(),G=new K,J=n("f2d9"),Q=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("counties")}},{key:"get",value:function(e){return d.get("/counties/".concat(e))}},{key:"getByName",value:function(e){return d.get("/counties/name/".concat(e))}},{key:"create",value:function(e){return d.post("/counties",e)}},{key:"update",value:function(e,t){return d.put("/counties/".concat(e),t)}},{key:"delete",value:function(e){return d.delete("/counties/".concat(e))}},{key:"deleteAll",value:function(){return d.delete("/counties")}}]),e}(),ee=new Q,te=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("lines_of_business")}},{key:"get",value:function(e){return d.get("/lines_of_business/".concat(e))}},{key:"getByName",value:function(e){return d.get("/lines_of_business/name/".concat(e))}},{key:"create",value:function(e){return d.post("/lines_of_business",e)}},{key:"update",value:function(e,t){return d.put("/lines_of_business/".concat(e),t)}},{key:"delete",value:function(e){return d.delete("/lines_of_business/".concat(e))}},{key:"deleteAll",value:function(){return d.delete("/counties")}}]),e}(),ne=new te,ae=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("arc_relationships")}},{key:"get",value:function(e){return d.get("/arc_relationships/".concat(e))}},{key:"getByName",value:function(e){return d.get("/arc_relationships/name/".concat(e))}},{key:"create",value:function(e){return d.post("/arc_relationships",e)}},{key:"update",value:function(e,t){return d.put("/arc_relationships/".concat(e),t)}},{key:"delete",value:function(e){return d.delete("/arc_relationships/".concat(e))}},{key:"deleteAll",value:function(){return d.delete("/arc_relationships")}}]),e}(),oe=new ae,ie=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("agency_types")}},{key:"get",value:function(e){return d.get("/agency_types/".concat(e))}},{key:"getByName",value:function(e){return d.get("/agency_types/name/".concat(e))}},{key:"create",value:function(e){return d.post("/agency_types",e)}},{key:"update",value:function(e,t){return d.put("/counties/".concat(e),t)}},{key:"delete",value:function(e){return d.delete("/agency_types/".concat(e))}},{key:"deleteAll",value:function(){return d.delete("/agency_types")}}]),e}(),se=new ie,re=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("phones")}},{key:"get",value:function(e){return d.get("/phones/".concat(e))}},{key:"create",value:function(e){return d.post("/phones",e)}},{key:"update",value:function(e,t){return d.put("/phones/".concat(e),t)}},{key:"delete",value:function(e){return d.delete("/phones/".concat(e))}},{key:"deleteAll",value:function(){return d.delete("/phones")}}]),e}(),le=new re,ce=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("organization_counties")}},{key:"get",value:function(e){return d.get("/organization_counties/".concat(e))}},{key:"create",value:function(e){return d.post("/organization_counties",e)}},{key:"update",value:function(e,t,n){return d.put("/organization_counties/".concat(e,"/").concat(t),n)}},{key:"deleteOrganizationCounties",value:function(e){return d.delete("/organization_counties/".concat(e))}},{key:"delete",value:function(e,t){return d.delete("/organization_counties/".concat(e,"/").concat(t))}},{key:"deleteAll",value:function(){return d.delete("/organization_counties")}}]),e}(),de=new ce,ue=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("organization_lines_of_business")}},{key:"get",value:function(e){return d.get("/organization_lines_of_business/".concat(e))}},{key:"create",value:function(e){return d.post("/organization_lines_of_business",e)}},{key:"update",value:function(e,t,n){return d.put("/organization_lines_of_business/".concat(e,"/").concat(t),n)}},{key:"deleteOrganizationLinesOfBusiness",value:function(e){return d.delete("/organization_lines_of_business/".concat(e))}},{key:"delete",value:function(e,t){return d.delete("/organization_lines_of_business/".concat(e,"/").concat(t))}},{key:"deleteAll",value:function(){return d.delete("/organization_lines_of_business")}}]),e}(),pe=new ue,me=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("organization_arc_relationships")}},{key:"get",value:function(e){return d.get("/organization_arc_relationships/".concat(e))}},{key:"create",value:function(e){return d.post("/organization_arc_relationships",e)}},{key:"update",value:function(e,t,n){return d.put("/organization_arc_relationships/".concat(e,"/").concat(t),n)}},{key:"deleteOrganizationArcRelationships",value:function(e){return d.delete("/organization_arc_relationships/".concat(e))}},{key:"delete",value:function(e,t){return d.delete("/organization_arc_relationships/".concat(e,"/").concat(t))}},{key:"deleteAll",value:function(){return d.delete("/organization_arc_relationships")}}]),e}(),_e=new me,ve=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("organization_agency_types")}},{key:"get",value:function(e){return d.get("/organization_agency_types/".concat(e))}},{key:"create",value:function(e){return d.post("/organization_agency_types",e)}},{key:"update",value:function(e,t,n){return d.put("/organization_agency_types/".concat(e,"/").concat(t),n)}},{key:"deleteOrganizationAgencyTypes",value:function(e){return d.delete("/organization_agency_types/".concat(e))}},{key:"delete",value:function(e,t){return d.delete("/organization_counties/".concat(e,"/").concat(t))}},{key:"deleteAll",value:function(){return d.delete("/organization_agency_types")}}]),e}(),fe=new ve,he={name:"organizations",components:{JsonExcel:J["a"]},data:function(){var e;return e={isOwner:!1,permissions:[],valid:!1,businessNameRule:[function(e){return!!e||"A business name is required"}],contactNameRule:[function(e){return!!e||"A contact name is required"}],streetNumberRule:[function(e){return/^[0-9]+$/.test(e)||"The street number is required and must only be numeric"}],streetNameRule:[function(e){return!!e||"A street name is required"}],cityRule:[function(e){return!!e||"A city must be selected"}],stateRule:[function(e){return!!e||"A state must be selected"}],countyRule:[function(e){return!!e||"At least one county must be selected"}]},Object(Y["a"])(e,"countyRule",[function(e){return!!e||"At least one county must be selected"}]),Object(Y["a"])(e,"zipRule",[function(e){return!!e||"A zip code is required"},function(e){return/(^\d{5}$)|(^\d{9}$)|(^\d{5}-\d{4}$)/.test(e)||"Please, input a valid zip code"}]),Object(Y["a"])(e,"businessPhoneRule",[function(e){return/^((1-)?\d{3}-\d{3}-\d{4}){0,1}$/.test(e)||"Please, input a valid phone number with format XXX-XXX-XXXX"}]),Object(Y["a"])(e,"phoneRule",[function(e){return!!e||"Phone number is required"},function(e){return/^(1-)?\d{3}-\d{3}-\d{4}$/.test(e)||"Please, input a valid phone number with format XXX-XXX-XXXX"}]),Object(Y["a"])(e,"email",[function(e){return/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e)||"Please, input a valid email address"}]),Object(Y["a"])(e,"mouRule",[function(e){return!!e||"MOU must be selected"}]),Object(Y["a"])(e,"lobRule",[function(e){return!!e||"A line of business must be selected"}]),Object(Y["a"])(e,"arcFunctionRule",[function(e){return!!e||"ARC type must be selected"}]),Object(Y["a"])(e,"serviceDescriptionRule",[function(e){return!!e||"Please provide a service description"}]),Object(Y["a"])(e,"agencyRule",[function(e){return!!e||"An agency type must be selected"}]),Object(Y["a"])(e,"arcFunctionRule",[function(e){return!!e||"ARC type must be selected"}]),Object(Y["a"])(e,"all_counties",[]),Object(Y["a"])(e,"organization_counties",[]),Object(Y["a"])(e,"unmapped_counties",[]),Object(Y["a"])(e,"organization_state",""),Object(Y["a"])(e,"states",["AK","AL","AR","AS","AZ","CA","CO","CT","DC","DE","FL","GA","GU","HI","IA","ID","IL","IN","KS","KY","LA","MA","MD","ME","MI","MN","MO","MP","MS","MT","NC","ND","NE","NH","NJ","NM","NV","NY","OH","OK","OR","PA","PR","RI","SC","SD","TN","TX","UM","UT","VA","VI","VT","WA","WI","WV","WY"]),Object(Y["a"])(e,"mou_options",["Yes","No","Maybe"]),Object(Y["a"])(e,"excel_fields",{}),Object(Y["a"])(e,"excel_data",[]),Object(Y["a"])(e,"all_lines_of_business",[]),Object(Y["a"])(e,"organization_lines_of_business",[]),Object(Y["a"])(e,"unmapped_lines_of_business",[]),Object(Y["a"])(e,"all_arc_relationships",[]),Object(Y["a"])(e,"organization_arc_relationships",[]),Object(Y["a"])(e,"unmapped_arc_relationships",[]),Object(Y["a"])(e,"all_agency_types",[]),Object(Y["a"])(e,"organization_agency_types",[]),Object(Y["a"])(e,"unmapped_agency_types",[]),Object(Y["a"])(e,"json_meta",[[{key:"charset",value:"utf-8"}]]),Object(Y["a"])(e,"filters",{partners:!1,relationships:!0,my_assignments:!1}),Object(Y["a"])(e,"add_organization_dlg",!1),Object(Y["a"])(e,"search",""),Object(Y["a"])(e,"organizations",[]),Object(Y["a"])(e,"orgCache",[]),Object(Y["a"])(e,"organization_types",["Relationship","Partner"]),Object(Y["a"])(e,"relationship_statuses",["Hot","Warm","Cold"]),Object(Y["a"])(e,"add_organization",{name:"",street_number:"",street_name:"",city:"",state:"",zip:"",county:"",website:"",mou:"",contact_protocol:"",last_contact:"",service:"",notes:"",action:"",phone:"",line_of_business:"",agency_type:"",arc_relationship:""}),Object(Y["a"])(e,"type",""),Object(Y["a"])(e,"critical_relationship_information",""),Object(Y["a"])(e,"services",""),Object(Y["a"])(e,"status",""),e},computed:{headers:function(){var e=this,t=[{text:"Name",value:"name"},{text:"Address",value:"address"},{text:"City",value:"city"},{text:"Zip",value:"zip"},{text:"County",value:"county_display"},{text:"Manager",value:"manager"},{text:"MOU",value:"mou"},{text:"Line of Business",value:"lob"},{text:"Services",value:"service"},{text:"Agency Type",value:"type"},{text:"Relationship",value:"arc_rel"}];return this.filters.partners&&t.push({text:"Services",value:"partner.services"}),t.forEach((function(n){t.forEach((function(t){e.excel_fields[t.text]=t.text.toLowerCase()}))})),t}},methods:{updateExcelFields:function(){var e=this;this.headers.forEach((function(t){e.excel_fields[t.text]=t.text.toLocaleLowerCase()}))},validate:function(){this.$refs.form.validate()},nav:function(e){this.$router.push({path:"organization/"+e.id})},addOrganization:function(){var e=this,t={name:this.add_organization.name,street_number:this.add_organization.street_number,street_name:this.add_organization.street_name,city:this.add_organization.city,state:this.add_organization.state,zip:this.add_organization.zip,website:this.add_organization.website,mou:this.add_organization.mou,contact_protocol:this.add_organization.contact_protocol,last_contact:this.add_organization.last_contact,service:this.add_organization.service,notes:this.add_organization.notes,action:this.add_organization.action};G.create(t).then((function(t){var n=t.data.id;le.create({organizationId:n,number:e.add_organization.phone,isPrimary:!0}).catch((function(e){console.log(e)})),e.add_organization.county.forEach((function(t){e.unmapped_counties.filter((function(e){e.name==t&&de.create({organizationId:n,countyId:e.id}).then().catch((function(e){console.log(e)}))}))})),e.add_organization.line_of_business.forEach((function(t){e.unmapped_lines_of_business.filter((function(e){e.name==t&&pe.create({organizationId:n,lineOfBusinessId:e.id}).then().catch((function(e){console.log(e)}))}))})),e.add_organization.arc_relationship.forEach((function(t){e.unmapped_arc_relationships.filter((function(e){e.name==t&&_e.create({organizationId:n,arcRelationshipId:e.id}).then().catch((function(e){console.log(e)}))}))})),e.add_organization.agency_type.forEach((function(t){e.unmapped_agency_types.filter((function(e){e.name==t&&fe.create({organizationId:n,agencyTypeId:e.id})}))}))})).catch((function(e){console.log(e)})),this.add_organization_dlg=!1,this.retrieveOrganizations()},retrieveOrganizations:function(){var e=this;G.getAll().then((function(t){e.orgCache=t.data,console.log(e.orgCache),e.orgCache.forEach((function(t){if(null!==t.relationship_managers&&0!==t.relationship_managers.length){t.address=t.street_number+" "+t.street_name+"\n"+t.city+", "+t.state+" "+t.zip;var n=t.relationship_managers[0].person,a=n.first_name+" "+n.last_name;t.manager=a;var o="";n.phones.forEach((function(e){o+=e.number+" \n"}));var i="";n.emails.forEach((function(e){i+=e.address+" \n"})),t.manager=a+"\n"+o+"\n"+i,t.managerId=n.id}else t.manager="Not yet assigned",t.managerId=0;null!==t.partner?t.services=t.partner.services:null!==t.relationship&&(t.status=t.relationship.status),e.excel_data=e.organizations})),e.organizations=t.data,e.organizations.forEach((function(t){if(t.address=t.street_number+" "+t.street_name+"\n"+t.city+", "+t.state+" "+t.zip,t.county_display="",t.counties.forEach((function(e){t.county_display+=e.name+", "})),t.county_display=t.county_display.substr(0,t.county_display.length-2),t.lob="",t.line_of_businesses.forEach((function(e){t.lob+=e.name+"\n"})),t.lob=t.lob.substr(0,t.lob.length-2),t.type="",t.agency_types.forEach((function(e){t.type+=e.name+"\n"})),t.type=t.type.substr(0,t.type.length-2),t.arc_rel="",t.arc_relationships.forEach((function(e){t.arc_rel+=e.name+"\n"})),t.arc_rel=t.arc_rel.substr(0,t.arc_rel.length-2),null!==t.relationship_managers&&0!==t.relationship_managers.length){var n=t.relationship_managers[0].person,a=n.first_name+" "+n.last_name,o="";n.phones.forEach((function(e){o+=e.number+" \n"}));var i="";n.emails.forEach((function(e){i+=e.address+" \n"})),t.manager=a+"\n"+o+"\n"+i,t.managerId=n.id}else t.manager="Not yet assigned",t.managerId=0;null!==t.partner?t.services=t.partner.services:null!==t.relationship&&(t.status=t.relationship.status),e.excel_data=e.organizations}))})).catch((function(e){console.log(e.message)}))},populateCounties:function(){var e=this;ee.getAll().then((function(t){e.all_counties=t.data.map((function(e){return e.name})),e.unmapped_counties=t.data})).catch((function(e){console.log(e)}))},populateLinesOfBusiness:function(){var e=this;ne.getAll().then((function(t){e.all_lines_of_business=t.data.map((function(e){return e.name})),e.unmapped_lines_of_business=t.data})).catch((function(e){console.log(e)}))},populateArcRelationships:function(){var e=this;oe.getAll().then((function(t){e.all_arc_relationships=t.data.map((function(e){return e.name})),e.unmapped_arc_relationships=t.data})).catch((function(e){console.log(e)}))},populateAgencyTypes:function(){var e=this;se.getAll().then((function(t){e.all_agency_types=t.data.map((function(e){return e.name})),e.unmapped_agency_types=t.data})).catch((function(e){console.log(e)}))},filterOrganizations:function(){var e=this;this.organizations=this.orgCache.filter((function(t){var n=!e.filters["my_assignments"]||"5693164c-5da4-4d07-ad24-d9f39befc823"==t.managerId;return(e.filters["partners"]&&null!==t.partner&&n)|(e.filters["relationships"]&&null!==t.relationship&&n)})),this.updateExcelFields()},verifyAccess:function(e){switch(e){case"create":return!!this.permissions.includes("createOrgs");default:return!1}},setPagePermissions:function(){var e=this,t=this.$session.get("userRole");p.get(t).then((function(t){e.permissions=t.data.permissions.map((function(e){return e.name})),console.log(e.permissions)})).catch((function(e){console.log(e)}))}},mounted:function(){this.retrieveOrganizations(),this.populateCounties(),this.populateArcRelationships(),this.populateLinesOfBusiness(),this.populateAgencyTypes(),this.setPagePermissions()}},ge=he,be=n("99d9"),ye=n("8fea"),xe=n("4bd4"),ke=n("ce87"),we=n("b974"),ze=n("8654"),Ce=n("a844"),Oe=Object(v["a"])(ge,W,Z,!1,null,null,null),Re=Oe.exports;h()(Oe,{VBtn:x["a"],VCard:k["a"],VCardActions:be["a"],VCardText:be["c"],VCardTitle:be["d"],VCol:L["a"],VContainer:X["a"],VDataTable:ye["a"],VDialog:w["a"],VForm:xe["a"],VHover:ke["a"],VIcon:z["a"],VRow:U["a"],VSelect:we["a"],VSpacer:N["a"],VTextField:ze["a"],VTextarea:Ce["a"]});var Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("span",{staticClass:"hidden-md-and-down"},[e.verifyAccess("update")?n("span",[n("a",{staticClass:"btn text-md-h2 text-sm-h5 font-weight-bold blue-grey--text text-capitalize",on:{click:function(t){return e.openDialog("Edit")}}},[e._v("\n          "+e._s(e.organization.name)+"\n        ")]),n("br")]):n("span",{staticClass:"text-md-h2 text-sm-h5 font-weight-bold blue-grey--text text-capitalize"},[e._v("\n                "+e._s(e.organization.name)),n("br")]),n("a",{staticClass:"red--text text--darken-3",attrs:{href:e.organization.website}},[e._v("\n          "+e._s(e.organization.website)+"\n        ")]),""!=e.organization.phones?n("span",[e._v(" | "+e._s(e.organization.phones[0].number))]):e._e(),n("address",{staticClass:"text-capitalize"},[e._v("\n          "+e._s(e.organization.street_number)+" "+e._s(e.organization.street_name)+"\n          "+e._s(e.organization.city)+", "+e._s(e.organization.state)+" "+e._s(e.organization.zip)+"\n          "),n("br"),e._l(e.organization.counties,(function(t){return n("span",{key:t.id},[e._v("\n            "+e._s(t.name)+"\n          ")])}))],2)]),n("v-row",[n("v-col",{staticClass:"hidden-md-and-up",attrs:{cols:"12"}},[n("v-card",[n("v-toolbar",{attrs:{color:"grey"}},[n("v-toolbar-title",{staticClass:"white--text"},[e.verifyAccess("update")?n("span",[n("a",{staticClass:"btn text-md-h2 text-sm-h5 text-capitalize",on:{click:function(t){return e.openDialog("Edit")}}},[e._v("\n                  "+e._s(e.organization.name)+"\n                ")]),n("br")]):n("span",{staticClass:"text-md-h2 text-sm-h5 text-capitalize"},[e._v("\n                  "+e._s(e.organization.name)),n("br")])])],1),n("v-card-title",[n("v-card-subtitle",[n("a",{staticClass:"red--text text--darken-3",attrs:{href:e.organization.website}},[e._v("\n                "+e._s(e.organization.website)+"\n              ")]),""!=e.organization.phones?n("span",[n("br"),e._v(" "+e._s(e.organization.phones[0].number))]):e._e(),n("br"),e._v("\n              "+e._s(e.organization.street_number)+" "+e._s(e.organization.street_name)+"\n              "+e._s(e.organization.city)+", "+e._s(e.organization.state)+" "+e._s(e.organization.zip)+"\n              "),n("br"),e._l(e.organization.counties,(function(t){return n("span",{key:t.id},[e._v("\n                "+e._s(t.name)+"\n              ")])}))],2)],1),n("v-divider"),n("v-card-title",[e._v("Notes")]),n("v-card-text",[e.verifyAccess("update")?n("span",[n("a",{staticClass:"btn font-weight-bold blue-grey--text",on:{click:function(t){e.contact_note_dlg=!0}}},[n("strong",[e._v("Last Contact Made: ")])])]):n("span",[n("strong",[e._v("\n                 Last Contact Made:\n              ")])]),e._v("\n            "+e._s(e.organization.last_contact)),n("br"),e.verifyAccess("update")?n("span",[n("a",{staticClass:"btn font-weight-bold blue-grey--text",on:{click:function(t){e.op_action_dlg=!0}}},[e._v("\n               Opportunities/Actions Needed to Improve Profile:\n             ")])]):n("span",[n("strong",[e._v("\n               Opportunities/Actions Needed to Improve Profile:\n              ")])]),e._v("\n            "+e._s(e.organization.action)),n("br"),e.verifyAccess("update")?n("span",[n("a",{staticClass:"btn font-weight-bold blue-grey--text",on:{click:function(t){e.add_note_dlg=!0}}},[n("strong",[e._v("Note: ")])])]):n("span",[n("strong",[e._v("\n                 Note:\n               ")])]),e._v("\n            "+e._s(e.organization.notes)+"\n          ")]),n("v-divider"),n("v-card-title",[e._v("Information")]),n("v-card-text",[n("strong",[e._v("National DCS MOU Partner: ")]),e._v(" "+e._s(e.organization.mou)),n("br"),n("strong",[e._v("Organization Service: ")]),e._v(" "+e._s(e.organization.service)),n("br"),n("strong",[e._v("Lines of Business: ")]),n("br"),e._l(e.organization.line_of_businesses,(function(t){return n("span",{key:t.id},[e._v("\n                      "+e._s(t.name)+"\n                  ")])})),n("br"),e._v(" ARC Relationship:\n            "),e._l(e.organization.arc_relationships,(function(t){return n("span",{key:t.id},[e._v("\n                      "+e._s(t.name)+"\n                  ")])})),n("br"),n("strong",[e._v("Agency Types: ")]),e._l(e.organization.agency_types,(function(t){return n("span",{key:t.id},[e._v("\n                      "+e._s(t.name)+"\n                  ")])})),n("br"),n("strong",[e._v("Service: ")]),e._v("\n            "+e._s(e.organization.service)+"\n          ")],2),n("v-divider"),n("v-card-title",[e._v("Contacts")]),n("v-card-text",[n("div",[n("strong",[e._v("Organization Contact Protocol:"),n("br")]),e._v(" "+e._s(e.organization.contact_protocol)),n("br"),n("a",{directives:[{name:"show",rawName:"v-show",value:e.verifyAccess("update"),expression:"verifyAccess('update')"}],staticClass:"btn font-weight-bold blue-grey--text",on:{click:function(t){return e.openDialog("Add POC")}}},[e._v("\n              Add New Point of Contact\n            ")])]),e._l(e.organization_points_of_contact,(function(t){return n("div",{key:t.id},[n("a",{staticClass:"btn font-weight-bold blue-grey--text",on:{click:function(n){return e.openDialog("Edit POC",t.id)}}},[n("span",{ref:"first_name_"+t.personId,refInFor:!0},[e._v(e._s(t.first_name)+" ")]),n("span",{ref:"last_name_"+t.personId,refInFor:!0},[e._v(e._s(t.last_name)+" ")])]),e._l(t.phones,(function(t){return n("span",{staticClass:"font-weight-thin"},[n("span",{ref:"phone_"+t.id,refInFor:!0},[1==t.isPrimary?n("span",[n("br"),e._v(e._s(t.number)+"(P)\n                    ")]):e._e()])])})),e._l(t.phones,(function(t){return n("span",{staticClass:"font-weight-thin"},[n("span",{ref:"phone_"+t.id,refInFor:!0},[0==t.isPrimary?n("span",[e._v("\n                     | "+e._s(t.number)+"\n                    ")]):e._e()])])})),e._l(t.emails,(function(t){return n("span",{staticClass:"font-weight-thin"},[n("span",{ref:"email_"+t.id,refInFor:!0},[1==t.isPrimary?n("span",[n("br"),e._v(e._s(t.address)+"(P)\n                    ")]):e._e()])])})),e._l(t.emails,(function(t){return n("span",{staticClass:"font-weight-thin"},[n("span",{ref:"email_"+t.id,refInFor:!0},[0==t.isPrimary?n("span",[e._v("\n                       | "+e._s(t.address)+"\n                    ")]):e._e()])])}))],2)}))],2),n("v-divider"),n("v-card-title",[e._v("Relationship Manager")]),n("v-card-text",[n("div",[n("a",{directives:[{name:"show",rawName:"v-show",value:e.verifyAccess("reassign"),expression:"verifyAccess('reassign')"}],staticClass:"btn font-weight-bold blue-grey--text",on:{click:function(t){return e.openDialog("Add RM")}}},[e._v("\n                Add an Organization Manager\n              ")])]),e._l(e.organization_relationship_managers,(function(t){return n("div",{key:t.id},[e.verifyAccess("reassign")?n("a",{staticClass:"btn font-weight-bold blue-grey--text",on:{click:function(n){return e.openDialog("RM",t.personId)}}},[n("div",{staticClass:"font-weight-black mt-3"},[n("strong",[n("span",{ref:"relationship_manager_"+t.personId,refInFor:!0},[e._v("\n                      "+e._s(t.person.first_name)+" "+e._s(t.person.last_name)+" (Relationship Manager)\n                    ")])])])]):n("span",{staticClass:"btn font-weight-bold blue-grey--text"},[n("div",{staticClass:"font-weight-black mt-3"},[n("strong",[n("span",{ref:"relationship_manager_"+t.personId,refInFor:!0},[e._v("\n                      "+e._s(t.person.first_name)+" "+e._s(t.person.last_name)+" (Relationship Manager)\n                    ")])])])]),e._l(t.person.phones,(function(t){return n("div",{key:t.number,staticClass:"font-weight-thin"},[e._v(e._s(t.number))])})),e._l(t.person.emails,(function(t){return n("div",{key:t.address,staticClass:"font-weight-thin"},[e._v(" "+e._s(t.address))])}))],2)}))],2)],1)],1),n("v-col",{attrs:{cols:"9"}},[n("v-row",[n("v-col",{staticClass:"hidden-md-and-down"},[n("v-card",{staticClass:"d-inline-flex",staticStyle:{"border-radius":"5px"},attrs:{elevation:"3","max-width":"100%",color:"light-grey"}},[n("v-container",{staticStyle:{"max-width":"200px"}},[n("v-card",{staticStyle:{"margin-top":"-12px","border-radius":"3% 10%","margin-left":"-15px",padding:"10px"},attrs:{color:"grey"}},[n("v-toolbar-title",{staticClass:"white--text"},[e._v("Important Notes")])],1)],1),n("v-card-text",{staticStyle:{width:"1200px"}},[e.verifyAccess("update")?n("span",[n("a",{staticClass:"btn details-font",staticStyle:{color:"#5a5b60"},on:{click:function(t){e.contact_note_dlg=!0}}},[e._v("\n               Last Contact Made:\n             ")])]):n("span",[n("span",{staticClass:"details-font",staticStyle:{color:"#5a5b60"}},[e._v("\n                 Last Contact Made:\n              ")])]),n("span",{staticClass:"details-font-body"},[n("span",{staticClass:"details-font-body"},[n("br"),e._v(e._s(e.organization.last_contact)+"\n                ")])]),e.verifyAccess("update")?n("span",[n("a",{staticClass:"btn details-font",staticStyle:{color:"#5a5b60"},on:{click:function(t){e.op_action_dlg=!0}}},[n("br"),n("br"),e._v("Opportunities/Actions Needed to Improve Profile:\n             ")])]):n("span",[n("span",{staticClass:"btn details-font",staticStyle:{color:"#5a5b60"}},[n("br"),n("br"),e._v("Opportunities/Actions Needed to Improve Profile:\n              ")])]),n("span",{staticClass:"details-font-body"},[n("span",{staticClass:"details-font-body"},[n("br"),e._v(e._s(e.organization.action)+"\n                ")])]),e.verifyAccess("update")?n("span",[n("a",{staticClass:"btn details-font",staticStyle:{color:"#5a5b60"},on:{click:function(t){e.add_note_dlg=!0}}},[n("br"),n("br"),e._v("Note:\n               ")])]):n("span",[n("span",{staticClass:"btn details-font",staticStyle:{color:"#5a5b60"}},[n("br"),n("br"),e._v("Note:\n               ")])]),n("span",{staticClass:"details-font-body"},[n("span",{staticClass:"details-font-body"},[n("br"),e._v(e._s(e.organization.notes)+"\n              ")])])])],1)],1)],1),n("v-row",[n("v-col",{staticClass:"hidden-md-and-down"},[n("v-card",{staticClass:"d-inline-flex",staticStyle:{"border-radius":"5px"},attrs:{elevation:"3","max-width":"100%",color:"light-grey"}},[n("v-container",{staticStyle:{"max-width":"200px"}},[n("v-card",{staticStyle:{"margin-top":"-12px","border-radius":"3% 10%","margin-left":"-15px",padding:"10px"},attrs:{color:"grey"}},[n("v-toolbar-title",{staticClass:"white--text"},[e._v("Information")])],1)],1),n("v-card-text",{staticStyle:{width:"1200px"}},[n("span",{staticClass:"details-font",staticStyle:{color:"#5a5b60"}},[e._v("National DCS MOU Partner: ")]),n("span",{staticClass:"details-font-body"},[n("br"),e._v(e._s(e.organization.mou)+"\n                  ")]),n("span",{staticClass:"details-font",staticStyle:{color:"#5a5b60"}},[n("br"),n("br"),e._v("Organization Service:")]),n("span",{staticClass:"details-font-body"},[n("br"),e._v(e._s(e.organization.service)+"\n                  ")]),n("span",{staticClass:"details-font",staticStyle:{color:"#5a5b60"}},[n("br"),n("br"),e._v("Lines of Business: ")]),e._l(e.organization.line_of_businesses,(function(t){return n("span",{key:t.id,staticClass:"details-font-body"},[n("br"),e._v(e._s(t.name)+"\n                ")])})),n("span",{staticClass:"details-font",staticStyle:{color:"#5a5b60"}},[n("br"),n("br"),e._v("ARC Relationship: ")]),e._l(e.organization.arc_relationships,(function(t){return n("span",{key:t.id,staticClass:"details-font-body"},[n("br"),e._v(e._s(t.name)+"\n                  ")])})),n("span",{staticClass:"details-font",staticStyle:{color:"#5a5b60"}},[n("br"),n("br"),e._v("Agency Types: ")]),e._l(e.organization.agency_types,(function(t){return n("span",{key:t.id,staticClass:"details-font-body"},[n("br"),e._v(e._s(t.name)+"\n                ")])})),n("br"),n("span",{staticClass:"details-font",staticStyle:{color:"#5a5b60"}},[n("br"),n("br"),e._v("Service: ")]),n("span",{staticClass:"details-font-body"},[n("br"),e._v(e._s(e.organization.service)+"\n                ")])],2)],1)],1)],1),n("v-row",{staticClass:"hidden-md-and-down"},[n("v-col",[n("v-card",{staticClass:"mb-3",attrs:{elevation:"3"}},[n("v-data-table",{attrs:{headers:e.headers,search:e.search,items:e.files,"item-key":"id","multi-sort":""},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-text-field",{staticClass:"mx-4",attrs:{label:"Search Files"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]},proxy:!0},{key:"item.name",fn:function(t){return[n("p",[e._v(e._s(t.item.name))])]}},{key:"item.date",fn:function(t){return[n("p",[e._v(e._s(t.item.date))])]}},{key:"item.author",fn:function(t){return[n("p",[e._v(e._s(t.item.author))])]}},{key:"item.download",fn:function(t){return[n("v-btn",{attrs:{depressed:"",small:""},on:{click:function(n){return e.downloadFile(t)}}},[e._v("\n                    Download\n                    "),n("v-icon",{attrs:{color:"orange darken-4",right:""}},[e._v("\n                      mdi-arrow-down\n                    ")])],1)]}},{key:"item.remove",fn:function(t){return[n("v-btn",{attrs:{depressed:"",small:""},on:{click:function(n){return e.deleteFile(t)}}},[n("v-icon",{attrs:{color:"orange darken-4",right:""}},[e._v("\n                      mdi-trash-can\n                    ")])],1)]}},{key:"footer",fn:function(){return[n("v-row",[n("v-col",{attrs:{cols:"7"}},[n("v-file-input",{attrs:{label:"Upload new file","show-size":"",counter:"",dense:""},on:{change:e.filesChange}})],1),n("v-col",[n("v-btn",{attrs:{depressed:"",small:"",disabled:e.upload_disabled},on:{click:e.uploadFile}},[e._v("\n                        Upload\n                        "),n("v-icon",{attrs:{color:"orange darken-4",right:""}},[e._v("\n                          mdi-arrow-up\n                        ")])],1)],1)],1)]},proxy:!0}])})],1)],1)],1)],1),n("v-col",{staticClass:"hidden-md-and-down"},[n("v-card",{staticClass:"mb-3",attrs:{elevation:"3"}},[n("v-toolbar",{attrs:{color:"grey"}},[n("v-toolbar-title",{staticClass:"white--text"},[e._v("Contact Info")])],1),n("v-card-text",[n("div",[n("strong",[e._v("Organization Contact Protocol:"),n("br")]),e._v(" "+e._s(e.organization.contact_protocol)),n("br"),n("a",{directives:[{name:"show",rawName:"v-show",value:e.verifyAccess("update"),expression:"verifyAccess('update')"}],staticClass:"btn font-weight-bold blue-grey--text",on:{click:function(t){return e.openDialog("Add POC")}}},[e._v("\n                Add New Point of Contact\n              ")])]),e._l(e.organization_points_of_contact,(function(t){return n("div",{key:t.id},[n("a",{staticClass:"btn font-weight-bold blue-grey--text",on:{click:function(n){return e.openDialog("Edit POC",t.id)}}},[n("span",{ref:"first_name_"+t.personId,refInFor:!0},[e._v(e._s(t.first_name)+" ")]),n("span",{ref:"last_name_"+t.personId,refInFor:!0},[e._v(e._s(t.last_name)+" ")])]),e._l(t.phones,(function(t){return n("span",{staticClass:"font-weight-thin"},[n("span",{ref:"phone_"+t.id,refInFor:!0},[1==t.isPrimary?n("span",[n("br"),e._v(e._s(t.number)+"(P)\n                    ")]):e._e()])])})),e._l(t.phones,(function(t){return n("span",{staticClass:"font-weight-thin"},[n("span",{ref:"phone_"+t.id,refInFor:!0},[0==t.isPrimary?n("span",[e._v("\n                     | "+e._s(t.number)+"\n                    ")]):e._e()])])})),e._l(t.emails,(function(t){return n("span",{staticClass:"font-weight-thin"},[n("span",{ref:"email_"+t.id,refInFor:!0},[1==t.isPrimary?n("span",[n("br"),e._v(e._s(t.address)+"(P)\n                    ")]):e._e()])])})),e._l(t.emails,(function(t){return n("span",{staticClass:"font-weight-thin"},[n("span",{ref:"email_"+t.id,refInFor:!0},[0==t.isPrimary?n("span",[e._v("\n                       | "+e._s(t.address)+"\n                    ")]):e._e()])])}))],2)}))],2)],1),n("v-card",{staticClass:"mb-3",attrs:{elevation:"3"}},[n("v-toolbar",{attrs:{color:"grey"}},[n("v-toolbar-title",{staticClass:"white--text"},[e._v("Relationship Manager")])],1),n("v-card-text",[n("div",[n("a",{directives:[{name:"show",rawName:"v-show",value:e.verifyAccess("reassign"),expression:"verifyAccess('reassign')"}],staticClass:"btn font-weight-bold blue-grey--text",on:{click:function(t){return e.openDialog("Add RM")}}},[e._v("\n                Add an Organization Manager\n              ")])]),e._l(e.organization_relationship_managers,(function(t){return n("div",{key:t.id},[e.verifyAccess("reassign")?n("a",{staticClass:"btn font-weight-bold blue-grey--text",on:{click:function(n){return e.openDialog("RM",t.personId)}}},[n("div",{staticClass:"font-weight-black mt-3"},[n("strong",[n("span",{ref:"relationship_manager_"+t.personId,refInFor:!0},[e._v("\n                      "+e._s(t.person.first_name)+" "+e._s(t.person.last_name)+" (Relationship Manager)\n                    ")])])])]):n("span",{staticClass:"btn font-weight-bold blue-grey--text"},[n("div",{staticClass:"font-weight-black mt-3"},[n("strong",[n("span",{ref:"relationship_manager_"+t.personId,refInFor:!0},[e._v("\n                      "+e._s(t.person.first_name)+" "+e._s(t.person.last_name)+" (Relationship Manager)\n                    ")])])])]),e._l(t.person.phones,(function(t){return n("div",{key:t.number,staticClass:"font-weight-thin"},[e._v(e._s(t.number))])})),e._l(t.person.emails,(function(t){return n("div",{key:t.address,staticClass:"font-weight-thin"},[e._v(" "+e._s(t.address))])}))],2)}))],2)],1)],1)],1),n("POCDialog",{attrs:{poc_id:e.update_poc_id,poc_title:e.poc_dlg_title,poc_dlg_action:e.poc_dlg_action},model:{value:e.showPOCDialog,callback:function(t){e.showPOCDialog=t},expression:"showPOCDialog"}}),n("RelationshipManagerDialog",{attrs:{all_relationship_managers:e.all_relationship_managers,current_relationship_manager_id:e.current_relationship_manager_id,rm_title:e.rm_dlg_title,rm_dlg_action:e.rm_dlg_action,relationship_manager:e.current_relationship_manager},model:{value:e.showRMDialog,callback:function(t){e.showRMDialog=t},expression:"showRMDialog"}}),n("v-dialog",{attrs:{"max-width":"300px"},model:{value:e.add_note_dlg,callback:function(t){e.add_note_dlg=t},expression:"add_note_dlg"}},[n("v-card",[n("v-form",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Organization Note")])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-text-field",{attrs:{label:"Notes"},model:{value:e.organization.notes,callback:function(t){e.$set(e.organization,"notes",t)},expression:"organization.notes"}})],1)],1),n("v-card-actions",[n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.add_note_dlg=!1}}},[e._v("\n                Close\n              ")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.updateOrganization}},[e._v("\n                Save\n              ")])],1)],1)],1)],1)],1),n("v-dialog",{attrs:{"max-width":"300px"},model:{value:e.contact_note_dlg,callback:function(t){e.contact_note_dlg=t},expression:"contact_note_dlg"}},[n("v-card",[n("v-form",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Last Contact Made")])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-text-field",{attrs:{label:"Last Contact"},model:{value:e.organization.last_contact,callback:function(t){e.$set(e.organization,"last_contact",t)},expression:"organization.last_contact"}})],1)],1),n("v-card-actions",[n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.contact_note_dlg=!1}}},[e._v("\n                Close\n              ")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.updateOrganization}},[e._v("\n                Save\n              ")])],1)],1)],1)],1)],1),n("v-dialog",{attrs:{"max-width":"300px"},model:{value:e.op_action_dlg,callback:function(t){e.op_action_dlg=t},expression:"op_action_dlg"}},[n("v-card",[n("v-form",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Opportunities/Actions for Improvement")])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-text-field",{attrs:{label:"Last Contact"},model:{value:e.organization.action,callback:function(t){e.$set(e.organization,"action",t)},expression:"organization.action"}})],1)],1),n("v-card-actions",[n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.op_action_dlg=!1}}},[e._v("\n                Close\n              ")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.updateOrganization}},[e._v("\n                Save\n              ")])],1)],1)],1)],1)],1),n("v-dialog",{attrs:{"max-width":"1200px"},model:{value:e.organization_edit_dlg,callback:function(t){e.organization_edit_dlg=t},expression:"organization_edit_dlg"}},[n("v-card",[n("v-form",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Organization Information")])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-text-field",{attrs:{label:"*Agency Name",required:"",rules:e.businessNameRule},model:{value:e.organization.name,callback:function(t){e.$set(e.organization,"name",t)},expression:"organization.name"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{label:"*Street Number",required:"",rules:e.streetNumberRule},model:{value:e.organization.street_number,callback:function(t){e.$set(e.organization,"street_number",t)},expression:"organization.street_number"}})],1),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{label:"*Street Name",required:"",rules:e.streetNameRule},model:{value:e.organization.street_name,callback:function(t){e.$set(e.organization,"street_name",t)},expression:"organization.street_name"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12",md:"3"}},[n("v-text-field",{attrs:{label:"City",required:"",rules:e.cityRule},model:{value:e.organization.city,callback:function(t){e.$set(e.organization,"city",t)},expression:"organization.city"}})],1),n("v-col",{attrs:{cols:"12",md:"2"}},[n("v-select",{attrs:{required:"",items:e.states,rules:e.stateRule,label:"State"},model:{value:e.organization.state,callback:function(t){e.$set(e.organization,"state",t)},expression:"organization.state"}})],1),n("v-col",{attrs:{cols:"12",md:"2"}},[n("v-text-field",{attrs:{label:"Zip",required:"",rules:e.zipRule},model:{value:e.organization.zip,callback:function(t){e.$set(e.organization,"zip",t)},expression:"organization.zip"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-text-field",{attrs:{label:"Website"},model:{value:e.organization.website,callback:function(t){e.$set(e.organization,"website",t)},expression:"organization.website"}})],1),n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-text-field",{attrs:{label:"Number",rules:e.businessPhoneRule},model:{value:e.organization.phones[0].number,callback:function(t){e.$set(e.organization.phones[0],"number",t)},expression:"organization.phones[0].number"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-select",{attrs:{multiple:"",required:"",rules:e.countyRule,items:e.all_counties,label:"Counties"},model:{value:e.organization_counties,callback:function(t){e.organization_counties=t},expression:"organization_counties"}})],1)],1),n("v-row",[n("v-col",[n("v-select",{attrs:{items:e.mou_options,required:"",rules:e.mouRule,label:"National DCS MOU Partner"},model:{value:e.organization.mou,callback:function(t){e.$set(e.organization,"mou",t)},expression:"organization.mou"}})],1)],1),n("v-row",[n("v-col",[n("v-select",{attrs:{multiple:"",required:"",rules:e.mouRule,items:e.all_lines_of_business,label:"Line of Business"},model:{value:e.organization_lines_of_business,callback:function(t){e.organization_lines_of_business=t},expression:"organization_lines_of_business"}})],1),n("v-col",[n("v-select",{attrs:{multiple:"",required:"",rules:e.arcFunctionRule,items:e.all_arc_relationships,label:"Arc Relationships"},model:{value:e.organization_arc_relationships,callback:function(t){e.organization_arc_relationships=t},expression:"organization_arc_relationships"}})],1),n("v-col",[n("v-select",{attrs:{multiple:"",rules:e.agencyRule,items:e.all_agency_types,label:"Agency Types"},model:{value:e.organization_agency_types,callback:function(t){e.organization_agency_types=t},expression:"organization_agency_types"}})],1)],1),n("v-row",[n("v-textarea",{attrs:{label:"Organization Contact Protocol"},model:{value:e.organization.contact_protocol,callback:function(t){e.$set(e.organization,"contact_protocol",t)},expression:"organization.contact_protocol"}})],1),n("v-row",[n("v-textarea",{attrs:{rules:e.serviceDescriptionRule,label:"Services"},model:{value:e.organization.service,callback:function(t){e.$set(e.organization,"service",t)},expression:"organization.service"}})],1)],1),n("small",[e._v("*indicates required field")])],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.organization_edit_dlg=!1}}},[e._v("\n              Close\n            ")]),n("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){return e.openDialog("Delete")}}},[e._v("\n              Delete\n            ")]),n("v-btn",{attrs:{disabled:!e.valid,color:"blue darken-1",text:""},on:{click:e.updateOrganization}},[e._v("\n              Save\n            ")])],1)],1)],1)],1),n("v-dialog",{attrs:{"max-width":"300"},model:{value:e.delete_organization_dialog,callback:function(t){e.delete_organization_dialog=t},expression:"delete_organization_dialog"}},[n("v-card",[n("v-card-text",[e._v("\n          Are you sure you want to delete this organization?\n        ")]),n("v-divider"),n("v-card-actions",[n("v-btn",{attrs:{text:"",color:"red text-darken-1"},on:{click:e.deleteOrganization}},[e._v("\n            Yes\n          ")]),n("v-btn",{attrs:{text:"",color:"blue text-darken-1"},on:{click:function(t){e.delete_organization_dialog=!1}}},[e._v("\n            No\n          ")])],1)],1)],1)],1)},Ae=[],Ie=(n("28a5"),n("768b")),Ve=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("persons")}},{key:"get",value:function(e){return d.get("/persons/".concat(e))}},{key:"create",value:function(e){return d.post("/persons",e)}},{key:"update",value:function(e,t){return d.put("/persons/".concat(e),t)}},{key:"delete",value:function(e){return d.delete("/persons/".concat(e))}},{key:"deleteAll",value:function(){return d.delete("/persons")}}]),e}(),Ne=new Ve,Se=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("relationship_managers")}},{key:"get",value:function(e){return d.get("/relationship_managers/".concat(e))}},{key:"create",value:function(e){return d.post("/relationship_managers",e)}},{key:"update",value:function(e,t,n){return d.put("/relationship_managers/".concat(e,"/").concat(t),n)}},{key:"delete",value:function(e,t){return d.delete("/relationship_managers/".concat(e,"/").concat(t))}},{key:"deleteAll",value:function(){return d.delete("/relationship_managers")}}]),e}(),$e=new Se,Ee=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("notes")}},{key:"get",value:function(e){return d.get("/notes/".concat(e))}},{key:"create",value:function(e){return d.post("/notes",e)}},{key:"update",value:function(e,t){return d.put("/notes/".concat(e),t)}},{key:"delete",value:function(e){return d.delete("/notes/".concat(e))}},{key:"deleteAll",value:function(){return d.delete("/notes")}}]),e}(),je=new Ee,De=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(e){return d.get("files/organization/".concat(e))}},{key:"get",value:function(e){return d.get("/files/".concat(e))}},{key:"upload",value:function(e){return d.post("/files",e,{headers:{"Content-Type":"multipart/form-data"}})}},{key:"download",value:function(e,t){return d.get("/files/".concat(e),t)}},{key:"update",value:function(e,t){return d.put("/files/".concat(e),t)}},{key:"delete",value:function(e){return d.delete("/files/".concat(e))}},{key:"deleteAll",value:function(){return d.delete("/files")}}]),e}(),Me=new De,Te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-form",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Organization Note")])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[n("v-textarea",{model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){t.stopPropagation(),e.show=!1}}},[e._v("\n          Close\n        ")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.addNote}},[e._v("\n          Save\n        ")])],1)],1)],1)],1)],1)},Fe=[],qe={data:function(){return{text:""}},props:{value:Boolean,item:Object},methods:{addNote:function(){var e={text:this.text};this.$emit("input",!1),this.$parent.addNote(e)}},computed:{show:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},Le=qe,Xe=Object(v["a"])(Le,Te,Fe,!1,null,null,null),Ue=Xe.exports;h()(Xe,{VBtn:x["a"],VCard:k["a"],VCardActions:be["a"],VCardText:be["c"],VCardTitle:be["d"],VCol:L["a"],VContainer:X["a"],VDialog:w["a"],VForm:xe["a"],VRow:U["a"],VSpacer:N["a"],VTextarea:Ce["a"]});var Be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-form",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v(e._s(e.rm_title))])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[n("p",{directives:[{name:"show",rawName:"v-show",value:"Edit"==e.rm_dlg_action,expression:"rm_dlg_action=='Edit'"}],staticClass:"text-h4"},[e._v("\n                  "+e._s(e.relationship_manager.first_name)+" "+e._s(e.relationship_manager.last_name)+"\n                ")]),n("v-autocomplete",{directives:[{name:"show",rawName:"v-show",value:"Create"==e.rm_dlg_action,expression:"rm_dlg_action=='Create'"}],attrs:{label:"Relationship Manager",items:e.all_relationship_managers,"item-text":"name","item-value":"value","return-object":""},on:{change:e.updateSelectedManager}})],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){t.stopPropagation(),e.show=!1}}},[e._v("\n            Close\n          ")]),n("v-btn",{directives:[{name:"show",rawName:"v-show",value:"Edit"==e.rm_dlg_action,expression:"rm_dlg_action=='Edit'"}],attrs:{color:"red darken-1",text:""},on:{click:function(t){return e.openDialog("Delete")}}},[e._v("\n            Remove Manager\n          ")]),n("v-btn",{directives:[{name:"show",rawName:"v-show",value:"Create"==e.rm_dlg_action,expression:"rm_dlg_action=='Create'"}],attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.openDialog(e.rm_dlg_action)}}},[e._v("\n            Save\n          ")])],1)],1)],1)],1),n("v-dialog",{attrs:{"max-width":"300"},model:{value:e.delete_relationship_manager_dialog,callback:function(t){e.delete_relationship_manager_dialog=t},expression:"delete_relationship_manager_dialog"}},[n("v-card",[n("v-card-text",[e._v("\n        Are you sure you want to remove this relationship manager?\n      ")]),n("v-divider"),n("v-card-actions",[n("v-btn",{attrs:{text:"",color:"red text-darken-1"},on:{click:e.deleteRelationshipManager}},[e._v("\n          Yes\n        ")]),n("v-btn",{attrs:{text:"",color:"blue text-darken-1"},on:{click:function(t){e.delete_relationship_manager_dialog=!1}}},[e._v("\n          No\n        ")])],1)],1)],1)],1)},He=[],We={props:{value:Boolean,rm_title:String,all_relationship_managers:Array,rm_dlg_action:String,current_relationship_manager_id:String,relationship_manager:Object},data:function(){return{delete_relationship_manager_dialog:!1,save_rm_dialog:!1,updated_relationship_manager:"",organization_relationship_managers:[]}},methods:{updateSelectedManager:function(e){this.updated_relationship_manager={value:e.value}},openDialog:function(e){switch(e){case"Create":this.addRelationshipManager();break;case"Delete":this.delete_relationship_manager_dialog=!0;break;case"Edit":this.updateRelationshipManager();break}},addRelationshipManager:function(){var e={personId:this.updated_relationship_manager.value};this.$parent.addRelationshipManager(e)},updateRelationshipManager:function(){this.update_mgr_dlg=!1;var e={personId:this.updated_relationship_manager.value};this.$parent.updateRelationshipManager(e,this.current_relationship_manager_id)},deleteRelationshipManager:function(){this.update_mgr_dlg=!1,this.delete_relationship_manager_dialog=!1,this.$emit("input",!1),this.$parent.deleteRelationshipManager(this.current_relationship_manager_id)}},computed:{show:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},Ze=We,Ye=n("c6a6"),Ke=n("ce7e"),Ge=Object(v["a"])(Ze,Be,He,!1,null,null,null),Je=Ge.exports;h()(Ge,{VAutocomplete:Ye["a"],VBtn:x["a"],VCard:k["a"],VCardActions:be["a"],VCardText:be["c"],VCardTitle:be["d"],VCol:L["a"],VContainer:X["a"],VDialog:w["a"],VDivider:Ke["a"],VForm:xe["a"],VRow:U["a"],VSpacer:N["a"]});var Qe=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("users")}},{key:"get",value:function(e){return d.get("/users/".concat(e))}},{key:"getByUserId",value:function(e){return d.get("/users/byUserId/".concat(e))}},{key:"getByEmail",value:function(e){return d.get("/users/email/".concat(e))}},{key:"create",value:function(e){return d.post("/users",e)}},{key:"update",value:function(e,t){return d.put("/users/".concat(e),t)}},{key:"delete",value:function(e){return d.delete("/users/".concat(e))}}]),e}(),et=new Qe,tt=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("contacts")}},{key:"get",value:function(e){return d.get("/contacts/".concat(e))}},{key:"create",value:function(e){return d.post("/contacts",e)}},{key:"update",value:function(e,t){return d.put("/contacts/".concat(e),t)}},{key:"delete",value:function(e){return d.delete("/contacts/".concat(e))}},{key:"deleteAll",value:function(){return d.delete("/contacts")}}]),e}(),nt=new tt,at=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(e){return d.get("pocs/".concat(e))}},{key:"create",value:function(e){return d.post("/pocs",e)}},{key:"update",value:function(e,t,n){return d.put("/pocs/".concat(e,"/").concat(t),n)}},{key:"delete",value:function(e,t){return d.delete("/pocs/".concat(e,"/").concat(t))}},{key:"deleteAll",value:function(e){return d.delete("/pocs/".concat(e))}}]),e}(),ot=new at,it=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-card-title",[n("span",{staticClass:"headline"},[e._v(e._s(e.poc_title))])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-text-field",{attrs:{label:"First Name*",required:"",rules:e.nameRules},model:{value:e.first_name,callback:function(t){e.first_name=t},expression:"first_name"}})],1),n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-text-field",{attrs:{label:"Last Name*",required:"",rules:e.nameRules},model:{value:e.last_name,callback:function(t){e.last_name=t},expression:"last_name"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12",md:"2"}},[n("v-text-field",{attrs:{label:"Street Number",rules:e.streetNumberRules},model:{value:e.street_number,callback:function(t){e.street_number=t},expression:"street_number"}})],1),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{label:"Street Name",rules:e.nameRules},model:{value:e.street_name,callback:function(t){e.street_name=t},expression:"street_name"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12",md:"3"}},[n("v-text-field",{attrs:{label:"City",rules:e.nameRules},model:{value:e.city,callback:function(t){e.city=t},expression:"city"}})],1),n("v-col",{attrs:{cols:"12",md:"2"}},[n("v-select",{attrs:{label:"State",items:e.states},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}})],1),n("v-col",{attrs:{cols:"12",md:"2"}},[n("v-text-field",{attrs:{label:"Zip",rules:e.zipRules},model:{value:e.zip,callback:function(t){e.zip=t},expression:"zip"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-text-field",{attrs:{required:"",label:"Primary Phone*",rules:e.phoneRules},model:{value:e.primary_phone,callback:function(t){e.primary_phone=t},expression:"primary_phone"}})],1),n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-text-field",{attrs:{label:"Secondary Phone",rules:e.phoneRules},model:{value:e.secondary_phone,callback:function(t){e.secondary_phone=t},expression:"secondary_phone"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-text-field",{attrs:{required:"",label:"Primary Email*",rules:e.emailRules},model:{value:e.primary_email,callback:function(t){e.primary_email=t},expression:"primary_email"}})],1),n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-text-field",{attrs:{label:"Secondary Email",rules:e.emailRules},model:{value:e.secondary_email,callback:function(t){e.secondary_email=t},expression:"secondary_email"}})],1)],1)],1),n("small",[e._v("*indicates required field")])],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){return e.openDialog("Delete")}}},[e._v("\n            Delete\n          ")]),n("v-btn",{directives:[{name:"show",rawName:"v-show",value:"Create"==e.poc_dlg_action,expression:"poc_dlg_action=='Create'"}],attrs:{disabled:!e.valid,color:"blue darken-1",text:""},on:{click:e.createPOC}},[e._v("\n            Save\n          ")]),n("v-btn",{directives:[{name:"show",rawName:"v-show",value:"Edit"==e.poc_dlg_action,expression:"poc_dlg_action=='Edit'"}],attrs:{color:"blue darken-1",text:"",disabled:!e.valid},on:{click:function(t){return e.openDialog("Update")}}},[e._v("\n            Edit\n          ")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){t.stopPropagation(),e.show=!1}}},[e._v("\n            Close\n          ")])],1)],1)],1)],1),n("v-dialog",{attrs:{"max-width":"300"},model:{value:e.delete_poc_dialog,callback:function(t){e.delete_poc_dialog=t},expression:"delete_poc_dialog"}},[n("v-card",[n("v-card-text",[e._v("\n        Are you sure you want to delete this point of contact?\n      ")]),n("v-divider"),n("v-card-actions",[n("v-btn",{attrs:{text:"",color:"red text-darken-1"},on:{click:e.deletePOC}},[e._v("\n          Yes\n        ")]),n("v-btn",{attrs:{text:"",color:"blue text-darken-1"},on:{click:function(t){e.delete_poc_dialog=!1}}},[e._v("\n          No\n        ")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"300"},model:{value:e.update_poc_dialog,callback:function(t){e.update_poc_dialog=t},expression:"update_poc_dialog"}},[n("v-card",[n("v-card-text",[e._v("\n        Save changes?\n      ")]),n("v-divider"),n("v-card-actions",[n("v-btn",{attrs:{text:"",color:"red text-darken-1"},on:{click:e.updatePOC}},[e._v("\n          Yes\n        ")]),n("v-btn",{attrs:{text:"",color:"blue text-darken-1"},on:{click:function(t){e.update_poc_dialog=!1}}},[e._v("\n          No\n        ")])],1)],1)],1)],1)},st=[],rt={props:{value:Boolean,poc_id:String,poc_title:String,poc_dlg_action:String},data:function(){return{valid:!1,update_poc_dialog:!1,delete_poc_dialog:!1,save_poc_dialog:!1,first_name:"",last_name:"",street_number:"",street_name:"",city:"",state:"",zip:"",primary_phone:"",secondary_phone:"",primary_email:"",secondary_email:"",nameRules:[function(e){return!!e||"A contact name is required"}],emailRules:[function(e){return/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e)||"Please, input a valid email address"}],phoneRules:[function(e){return/^(1-)?\d{3}-\d{3}-\d{4}$/.test(e)||"Please, input a valid phone number with format XXX-XXX-XXXX"}],streetNumberRules:[function(e){return/\S\d$/.test(e)||"Street number must be valid"}],zipRules:[function(e){return/(^\d{5}$)|(^\d{9}$)|(^\d{5}-\d{4}$)/.test(e)||"Please, input a valid zip code"}],states:["AK","AL","AR","AS","AZ","CA","CO","CT","DC","DE","FL","GA","GU","HI","IA","ID","IL","IN","KS","KY","LA","MA","MD","ME","MI","MN","MO","MP","MS","MT","NC","ND","NE","NH","NJ","NM","NV","NY","OH","OK","OR","PA","PR","RI","SC","SD","TN","TX","UM","UT","VA","VI","VT","WA","WI","WV","WY"]}},methods:{openDialog:function(e){switch(e){case"Save":this.save_poc_dialog=!0;break;case"Delete":this.delete_poc_dialog=!0;break;case"Update":this.update_poc_dialog=!0;break}},deletePOC:function(){this.delete_poc_dialog=!1,this.$emit("input",!1),this.$parent.deletePOC(this.poc_id)},createPOC:function(){var e={first_name:this.first_name,last_name:this.last_name,street_number:this.street_number,street_name:this.street_name,city:this.city,state:this.state,zip:this.zip,primary_phone:this.primary_phone,secondary_phone:this.secondary_phone,primary_email:this.primary_email,secondary_email:this.secondary_email};this.$emit("input",!1),this.$parent.createPOC(e)},updatePOC:function(){this.update_poc_dialog=!1;var e={first_name:this.first_name,last_name:this.last_name,street_number:this.street_number,street_name:this.street_name,city:this.city,state:this.state,zip:this.zip,primary_phone:this.primary_phone,secondary_phone:this.secondary_phone,primary_email:this.primary_email,secondary_email:this.secondary_email};this.$emit("input",!1),this.$parent.updatePOC(this.poc_id,e)},validate:function(){this.$refs.form.validate()}},computed:{show:{get:function(){var e=this;return"Edit"==this.poc_dlg_action&&Ne.get(this.poc_id).then((function(t){e.first_name=t.data.first_name,e.last_name=t.data.last_name,e.street_number=t.data.street_number,e.street_name=t.data.street_name,e.city=t.data.city,e.state=t.data.state,e.zip=t.data.zip,t.data.phones.forEach((function(t){t.isPrimary?e.primary_phone=t.number:e.secondary_phone=t.number})),t.data.emails.forEach((function(t){t.isPrimary?e.primary_email=t.address:e.secondary_email=t.address}))})).catch((function(e){console.log(e)})),this.value},set:function(e){this.$emit("input",e)}}}},lt=rt,ct=Object(v["a"])(lt,it,st,!1,null,null,null),dt=ct.exports;h()(ct,{VBtn:x["a"],VCard:k["a"],VCardActions:be["a"],VCardText:be["c"],VCardTitle:be["d"],VCol:L["a"],VContainer:X["a"],VDialog:w["a"],VDivider:Ke["a"],VForm:xe["a"],VRow:U["a"],VSelect:we["a"],VSpacer:N["a"],VTextField:ze["a"]});var ut=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("emails")}},{key:"get",value:function(e){return d.get("/emails/".concat(e))}},{key:"create",value:function(e){return d.post("/emails",e)}},{key:"update",value:function(e,t){return d.put("/emails/".concat(e),t)}},{key:"delete",value:function(e){return d.delete("/emails/".concat(e))}},{key:"deleteAll",value:function(){return d.delete("/emails")}}]),e}(),pt=new ut,mt=(n("d5da"),0),_t=1,vt=2,ft=3,ht={name:"organization",components:{POCDialog:dt,NoteDialog:Ue,RelationshipManagerDialog:Je},data:function(){var e;return e={isOwner:!1,permissions:[],confirm_delete:!1,valid:!1,businessNameRule:[function(e){return!!e||"A business name is required"}],contactNameRule:[function(e){return!!e||"A contact name is required"}],streetNumberRule:[function(e){return/^[0-9]+$/.test(e)||"The street number is required and must only be numeric"}],streetNameRule:[function(e){return!!e||"A street name is required"}],cityRule:[function(e){return!!e||"A city must be selected"}],stateRule:[function(e){return!!e||"A state must be selected"}],countyRule:[function(e){return!!e||"At least one county must be selected"}],zipRule:[function(e){return!!e||"A zip code is required"},function(e){return/(^\d{5}$)|(^\d{9}$)|(^\d{5}-\d{4}$)/.test(e)||"Please, input a valid zip code"}],businessPhoneRule:[function(e){return/^((1-)?\d{3}-\d{3}-\d{4}){0,1}$/.test(e)||"Please, input a valid phone number with format XXX-XXX-XXXX"}],phoneRule:[function(e){return!!e||"Phone number is required"},function(e){return/^(1-)?\d{3}-\d{3}-\d{4}$/.test(e)||"Please, input a valid phone number with format XXX-XXX-XXXX"}],email:[function(e){return/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e)||"Please, input a valid email address"}],mouRule:[function(e){return!!e||"MOU must be selected"}],lobRule:[function(e){return!!e||"A line of business must be selected"}],arcFunctionRule:[function(e){return!!e||"ARC type must be selected"}],serviceDescriptionRule:[function(e){return!!e||"Please provide a service description"}],agencyRule:[function(e){return!!e||"An agency type must be selected"}]},Object(Y["a"])(e,"arcFunctionRule",[function(e){return!!e||"ARC type must be selected"}]),Object(Y["a"])(e,"all_counties",[]),Object(Y["a"])(e,"organization_counties",[]),Object(Y["a"])(e,"unmapped_counties",[]),Object(Y["a"])(e,"organization_state",""),Object(Y["a"])(e,"states",["AK","AL","AR","AS","AZ","CA","CO","CT","DC","DE","FL","GA","GU","HI","IA","ID","IL","IN","KS","KY","LA","MA","MD","ME","MI","MN","MO","MP","MS","MT","NC","ND","NE","NH","NJ","NM","NV","NY","OH","OK","OR","PA","PR","RI","SC","SD","TN","TX","UM","UT","VA","VI","VT","WA","WI","WV","WY"]),Object(Y["a"])(e,"mou_options",["Yes","No","Maybe"]),Object(Y["a"])(e,"contact_note_dlg",!1),Object(Y["a"])(e,"op_action_dlg",!1),Object(Y["a"])(e,"all_lines_of_business",[]),Object(Y["a"])(e,"organization_lines_of_business",[]),Object(Y["a"])(e,"unmapped_lines_of_business",[]),Object(Y["a"])(e,"all_arc_relationships",[]),Object(Y["a"])(e,"organization_arc_relationships",[]),Object(Y["a"])(e,"unmapped_arc_relationships",[]),Object(Y["a"])(e,"all_agency_types",[]),Object(Y["a"])(e,"organization_agency_types",[]),Object(Y["a"])(e,"unmapped_agency_types",[]),Object(Y["a"])(e,"organization",""),Object(Y["a"])(e,"organization_edit_dlg",!1),Object(Y["a"])(e,"delete_organization_dialog",""),Object(Y["a"])(e,"delete_relationship_manager_dialog",!1),Object(Y["a"])(e,"update_mgr_dlg",!1),Object(Y["a"])(e,"add_mgr_dlg",!1),Object(Y["a"])(e,"showRMDialog",!1),Object(Y["a"])(e,"rm_dlg_action",""),Object(Y["a"])(e,"rm_dlg_title",""),Object(Y["a"])(e,"updated_relationship_manager",""),Object(Y["a"])(e,"current_relationship_manager_id",""),Object(Y["a"])(e,"current_relationship_manager",{}),Object(Y["a"])(e,"all_relationship_managers",[]),Object(Y["a"])(e,"organization_relationship_managers",[]),Object(Y["a"])(e,"delete_poc_dialog",!1),Object(Y["a"])(e,"save_poc_dialog",!1),Object(Y["a"])(e,"showPOCDialog",!1),Object(Y["a"])(e,"poc",{}),Object(Y["a"])(e,"update_poc_id",""),Object(Y["a"])(e,"edit_contact_id",""),Object(Y["a"])(e,"poc_dlg_title",""),Object(Y["a"])(e,"poc_dlg_action",""),Object(Y["a"])(e,"updated_point_of_contact",""),Object(Y["a"])(e,"all_points_of_contact",[]),Object(Y["a"])(e,"organization_points_of_contact",[]),Object(Y["a"])(e,"files",[]),Object(Y["a"])(e,"uploadedFiles",[]),Object(Y["a"])(e,"uploadError",null),Object(Y["a"])(e,"currentStatus",null),Object(Y["a"])(e,"uploadFieldName","files"),Object(Y["a"])(e,"file_upload",""),Object(Y["a"])(e,"upload_disabled",!0),Object(Y["a"])(e,"search",""),Object(Y["a"])(e,"latest_note",""),Object(Y["a"])(e,"add_note_dlg",!1),Object(Y["a"])(e,"valid_note",!0),Object(Y["a"])(e,"add_note_form",{text:""}),e},methods:{openDialog:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(e){case"Add RM":this.rm_dlg_action="Create",this.rm_dlg_title="Assign Relationship Manager",this.current_relationship_manager_id="",this.showRMDialog=!0;break;case"RM":Ne.get(n).then((function(e){t.current_relationship_manager=e.data})).catch((function(e){console.log(e)})),this.rm_dlg_title="Change Relationship Manager",this.current_relationship_manager_id=n,this.rm_dlg_action="Edit",this.showRMDialog=!0;break;case"Edit POC":this.update_poc_id=n,this.showPOCDialog=!0,this.poc_dlg_title="Edit Point of Contact",this.poc_dlg_action="Edit";break;case"Add POC":this.showPOCDialog=!0,this.poc_dlg_title="Add Point of Contact",this.poc_dlg_action="Create";break;case"Edit":this.organization_edit_dlg=!0;break;case"Delete":this.organization_edit_dlg=!1,this.delete_organization_dialog=!0;break}},addNote:function(e){var t=this;e.organizationId=this.organization.id,e.personId="9de1a7e1-8801-4024-9475-050644867c5b",e.type="general",je.create(e).then((function(e){t.setOrganization(t.organization.id)})).catch((function(e){console.log(e)})),this.add_note_dlg=!1},downloadFile:function(e){var t={fileId:e.item.id};Me.download(e.item.filepath,t).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=t,n.setAttribute("download","file.pdf"),document.body.appendChild(n),n.click()})).catch((function(e){console.log(e)}))},deleteFile:function(e){var t=this,n={filePath:e.item.filePath};Me.delete(e.item.id,n).then((function(e){t.populateFiles(t.organization.id)})).catch((function(e){console.log(e)}))},reset:function(){this.currentStatus=mt,this.uploadedFiles=[],this.uploadError=null},uploadFile:function(){var e=this,t=new FormData;t.append("file",this.file_upload),t.append("organizationId",this.organization.id),t.append("personId","9de1a7e1-8801-4024-9475-050644867c5b"),this.formData=t,this.currentStatus=_t,Me.upload(this.formData).then((function(t){e.uploadedFiles=[].concat(t),e.currentStatus=vt})).catch((function(t){e.uploadError=t.response,e.currentStatus=ft})),this.formData="",this.upload_disabled=!0,this.populateFiles(this.organization.id),this.reset()},filesChange:function(e){this.file_upload=e,this.upload_disabled=!1},populateFiles:function(e){var t=this;Me.getAll(e).then((function(e){t.files=e.data.map((function(e){var t=Intl.DateTimeFormat("en-US").format(new Date(e.createdAt));return{filepath:e.filePath.substr(e.filePath.indexOf("/")+1,e.filePath.length),date:t,author:e.person.first_name+" "+e.person.last_name,name:e.fileName,id:e.id}}))})).catch((function(e){console.log(e)}))},deleteOrganization:function(){var e=this;G.delete(this.organization.id).then((function(t){e.confirm_delete=!1})).catch((function(e){console.log(e)})),this.$router.push({path:"/organizations"}).catch((function(e){console.log(e)})),this.$toasted.show("Organization has been successfully deleted",{theme:"bubble"}).goAway(1e3)},updateOrganization:function(){var e=this;this.organization_edit_dlg=!1;var t={name:this.organization.name,street_number:this.organization.street_number,street_name:this.organization.street_name,city:this.organization.city,state:this.organization.state,zip:this.organization.zip,county:this.organization.county,website:this.organization.website,mou:this.organization.mou,contact_protocol:this.organization.contact_protocol,last_contact:this.organization.last_contact,service:this.organization.service,notes:this.organization.notes,action:this.organization.action};G.update(this.organization.id,t).then().catch((function(e){console.log(e)})),le.update(this.organization.phones[0].id,{number:this.organization.phones[0].number}).then().catch((function(e){console.log(e)})),de.deleteOrganizationCounties(this.organization.id).then((function(t){e.unmapped_counties.forEach((function(t){if(e.organization_counties.includes(t.name)){var n={organizationId:e.organization.id,countyId:t.id};de.create(n).then((function(t){e.setOrganization()})).catch((function(e){console.log(e)}))}}))})).catch((function(e){console.log(e)})),pe.deleteOrganizationLinesOfBusiness(this.organization.id).then((function(t){e.unmapped_lines_of_business.forEach((function(t){if(e.organization_lines_of_business.includes(t.name)){var n={organizationId:e.organization.id,lineOfBusinessId:t.id};pe.create(n).then((function(t){e.setOrganization()})).catch((function(e){console.log(e)}))}}))})).catch((function(e){console.log(e)})),_e.deleteOrganizationArcRelationships(this.organization.id).then((function(t){e.unmapped_arc_relationships.forEach((function(t){if(e.organization_arc_relationships.includes(t.name)){var n={organizationId:e.organization.id,arcRelationshipId:t.id};_e.create(n).then((function(t){e.setOrganization()})).catch((function(e){console.log(e)}))}}))})).catch((function(e){console.log(e)})),fe.deleteOrganizationAgencyTypes(this.organization.id).then((function(t){e.unmapped_agency_types.forEach((function(t){if(e.organization_agency_types.includes(t.name)){var n={organizationId:e.organization.id,agencyTypeId:t.id};fe.create(n).then((function(t){e.setOrganization()})).catch((function(e){console.log(e)}))}}))})).catch((function(e){console.log(e)}))},setOrganization:function(){var e=this;G.get(this.$route.params.organizationId).then((function(t){t.data.counties.forEach((function(t){e.organization_counties.push(t.name)})),t.data.line_of_businesses.forEach((function(t){e.organization_lines_of_business.push(t.name)})),t.data.arc_relationships.forEach((function(t){e.organization_arc_relationships.push(t.name)})),t.data.agency_types.forEach((function(t){e.organization_agency_types.push(t.name)})),ot.getAll(t.data.id).then(e.setPOC).catch((function(e){console.log(e)})),e.organization=t.data,0==e.organization.phones.length&&(e.organization.phones[0]=""),e.organization_state=t.data.state,e.organization_relationship_managers=t.data.relationship_managers,e.populateFiles(e.organization.id),e.setOwnerStatus()})).catch((function(e){console.log(e)})),this.add_note_dlg=!1,this.contact_note_dlg=!1,this.op_action_dlg=!1},populateCounties:function(){var e=this;ee.getAll().then((function(t){e.all_counties=t.data.map((function(e){return e.name})),e.unmapped_counties=t.data})).catch((function(e){console.log(e)}))},populateLinesOfBusiness:function(){var e=this;ne.getAll().then((function(t){e.all_lines_of_business=t.data.map((function(e){return e.name})),e.unmapped_lines_of_business=t.data})).catch((function(e){console.log(e)}))},populateArcRelationships:function(){var e=this;oe.getAll().then((function(t){e.all_arc_relationships=t.data.map((function(e){return e.name})),e.unmapped_arc_relationships=t.data})).catch((function(e){console.log(e)}))},populateAgencyTypes:function(){var e=this;se.getAll().then((function(t){e.all_agency_types=t.data.map((function(e){return e.name})),e.unmapped_agency_types=t.data})).catch((function(e){console.log(e)}))},setPOC:function(e){this.organization_points_of_contact=e.data},populateRelationshipManagersList:function(){var e=this;et.getAll().then((function(t){e.all_relationship_managers=t.data.map((function(e){return{name:e.first_name+" "+e.last_name,value:e.id}}))})).catch((function(e){console.log(e)}))},updateSelectedManager:function(e){this.updated_relationship_manager={value:e.value}},addRelationshipManager:function(e){var t=this;this.showRMDialog=!1,e.organizationId=this.organization.id,$e.create(e).then((function(e){t.organization.relationship_managers=e.data,t.setOrganization()})).catch((function(e){console.log(e)}))},updateRelationshipManager:function(e,t){var n=this;this.showRMDialog=!1,e.organizationId=this.organization.id,$e.update(this.organization.id,t,e).then((function(e){n.organization.relationship_managers=e.data,n.setOrganization()})).catch((function(e){console.log(e)}))},deleteRelationshipManager:function(e){var t=this;this.showRMDialog=!1,$e.delete(this.organization.id,e).then((function(e){t.setOrganization()})).catch((function(e){console.log(e)}))},updateContactInfo:function(e,t,n){var a=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;t.isPrimary=e,0!=o?n.update(o,t).then((function(e){a.setOrganization()})).catch((function(e){console.log(e)})):n.create(t).then((function(e){a.setOrganization()})).catch((function(e){console.log(e)}))},deletePOC:function(e){var t=this;Ne.get(e).then((function(e){var t=e.data;return t.phones.forEach((function(e){le.delete(e.id).catch((function(e){console.log(e)}))})),t.emails.forEach((function(e){pt.delete(e.id).catch((function(e){console.log(e)}))})),t.id})).then((function(e){console.log("called"),Ne.delete(e).catch((function(e){console.log(e)})),t.setOrganization()})).catch((function(e){console.log(e)}))},updatePOC:function(e,t){var n=this;Ne.get(e).then((function(e){var a=e.data,o={};if(t.primary_phone){o={number:t.primary_phone};var i=a.phones.filter((function(e){return e.isPrimary}));i.length>0?n.updateContactInfo(!0,o,le,i[0].id):(o.personId=a.id,n.updateContactInfo(!0,o,le))}if(t.secondary_phone){o={number:t.secondary_phone};var s=a.phones.filter((function(e){return 0==e.isPrimary}));s.length>0?n.updateContactInfo(!1,o,le,s[0].id):(o.personId=a.id,n.updateContactInfo(!1,o,le))}var r={};if(t.primary_email){r={address:t.primary_email};var l=a.emails.filter((function(e){return e.isPrimary}));l.length>0?n.updateContactInfo(!0,r,pt,l[0].id):(r.personId=a.id,n.updateContactInfo(!0,r,pt))}if(t.secondary_email){r={address:t.secondary_email};var c=a.emails.filter((function(e){return 0==e.isPrimary}));c.length>0?n.updateContactInfo(!1,r,pt,c[0].id):(r.personId=a.id,n.updateContactInfo(!1,r,pt))}})).catch((function(e){console.log(e)})),Ne.update(e,t).then().catch((function(e){console.log(e)}))},createPOC:function(e){var t=this;Ne.create(e).then((function(n){var a=n.data.id,o={personId:a,organizationId:t.organization.id};if(e.primary_phone){var i={personId:a,number:e.primary_phone,isPrimary:!0};le.create(i).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}if(e.secondary_phone){var s={personId:a,number:e.secondary_phone,isPrimary:!1};le.create(s).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}if(e.primary_email){var r={personId:a,address:e.primary_email,isPrimary:!0};pt.create(r).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}if(e.secondary_email){var l={personId:a,address:e.secondary_email,isPrimary:!1};pt.create(l).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}ot.create(o).then((function(e){console.log("POC Created:\n"+e),console.log(e),t.setOrganization()})).catch((function(e){console.log(e)}))}))},setEditContact:function(e){this.edit_contact_id=e},populatePointOfContactList:function(){var e=this;nt.getAll().then((function(t){e.all_points_of_contact=t.data.map((function(e){return{name:e.first_name+" "+e.last_name,value:e.id}}))})).catch((function(e){console.log(e)}))},updateSelectedPointOfContact:function(e){this.updated_point_of_contact={value:e.value}},addPointOfContact:function(){var e=this;this.assign_poc_dlg=!1;var t=this.organization.id,n={organizationId:t,personId:this.updated_point_of_contact.value};ot.create(n).then((function(t){e.setOrganization()})).catch((function(e){console.log(e)}))},updatePointOfContact:function(){var e=this;this.assign_poc_dlg=!1;var t={},n=this.organization_points_of_contact[0].id;Ne.update(n,t).then((function(t){e.setOrganization()})).catch((function(e){console.log(e)}))},formatDate:function(e){if(!e)return null;var t=e.split("-"),n=Object(Ie["a"])(t,3),a=n[0],o=n[1],i=n[2];return"".concat(o,"/").concat(i,"/").concat(a)},verifyAccess:function(e){switch(e){case"read":return!!this.permissions.includes("readAllOrgs");case"update":return!!this.permissions.includes("editAllOrgs")||!(!this.permissions.includes("editOwnOrgs")||!this.isOwner);case"delete":return!!this.permissions.includes("deleteAllOrgs")||!(!this.permissions.includes("deleteOwnOrgs")||!this.isOwner);case"reassign":return this.permissions.includes("reassignAccountOwner");default:return!1}},setPagePermissions:function(){var e=this,t=this.$session.get("userRole");p.get(t).then((function(t){e.permissions=t.data.permissions.map((function(e){return e.name})),console.log(e.permissions)})).catch((function(e){console.log(e)}))},setOwnerStatus:function(){var e=this,t=this.$session.get("userID");et.getByUserId(t).then((function(t){var n=t.data.person.id,a=e.organization.relationship_managers.map((function(e){return e.person.id}));e.isOwner=a.includes(n)})).catch((function(e){console.log(e)}))},validate:function(){this.$refs.form.validate()}},computed:{headers:function(){var e=[{text:"File Name",value:"name",width:"80px"},{text:"Date",value:"date",width:"80px"},{text:"Author",value:"author",width:"100px"},{text:"",value:"download",width:"100px"},{text:"",value:"remove",width:"100px"}];return e}},mounted:function(){this.reset(),this.setOrganization(),this.populateRelationshipManagersList(),this.populatePointOfContactList(),this.populateCounties(),this.populateLinesOfBusiness(),this.populateArcRelationships(),this.populateAgencyTypes(),this.setPagePermissions()}},gt=ht,bt=n("23a7"),yt=Object(v["a"])(gt,Pe,Ae,!1,null,null,null),xt=yt.exports;h()(yt,{VBtn:x["a"],VCard:k["a"],VCardActions:be["a"],VCardSubtitle:be["b"],VCardText:be["c"],VCardTitle:be["d"],VCol:L["a"],VContainer:X["a"],VDataTable:ye["a"],VDialog:w["a"],VDivider:Ke["a"],VFileInput:bt["a"],VForm:xe["a"],VIcon:z["a"],VRow:U["a"],VSelect:we["a"],VSpacer:N["a"],VTextField:ze["a"],VTextarea:Ce["a"],VToolbar:S["a"],VToolbarTitle:$["a"]});var kt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search Table","single-line":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),n("div",{staticClass:"red--text text--darken-2 page-title"},[e._v("Contacts")]),n("v-row",[n("v-col",{staticClass:"col-12"},[n("v-card",{attrs:{outlined:"",elevation:"3 text-wrap"}},[n("v-card-text",[n("v-data-table",{staticClass:"text-capitalize",attrs:{headers:e.headers,items:e.volunteers,search:e.search,"item-key":"id","multi-sort":""},scopedSlots:e._u([{key:"item.name",fn:function(t){var a=t.item;return[null!==a.first_name?[n("a",{on:{click:function(t){return e.nav(a)}}},[n("span",{staticClass:"red--text"},[e._v(e._s(a.name))])])]:null!==a.partner?[n("a",{on:{click:function(t){return e.nav(a)}}},[n("span",{staticClass:"purple--text"},[e._v(e._s(a.name))]),a.public_safety?n("span",[e._v(" (Public Safety)")]):e._e()])]:e._e()]}},{key:"item.address",fn:function(t){var a=t.item;return[n("address",[n("a",{on:{click:function(t){return e.nav(a)}}},[n("span",{staticClass:"black--text"},[e._v(e._s(a.address))])])])]}},{key:"item.emails",fn:function(t){var a=t.item;return[n("a",{on:{click:function(t){return e.nav(a)}}},[n("span",[e._v("\n                  "+e._s(e.email.address)+"\n                ")])])]}},{key:"item.phones",fn:function(t){var a=t.item;return[n("a",{on:{click:function(t){return e.nav(a)}}},[n("span",[e._v("\n                  "+e._s(e.phone.number)+"\n                ")])])]}},{key:"item.actions",fn:function(t){var a=t.item;return[n("v-icon",{attrs:{small:""},on:{click:function(t){return e.removePerson(a)}}},[e._v("mdi-delete")])]}}],null,!0)})],1)],1),n("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,o=t.attrs;return[n("v-hover",{attrs:{"open-delay":"200"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.hover;return[n("v-btn",e._g(e._b({class:{"on-hover":i},attrs:{text:"",elevation:i?16:2}},"v-btn",o,!1),a),[e._v("\n              Add Contact\n              "),n("v-icon",[e._v(" mdi-plus ")])],1)]}}],null,!0)})]}}]),model:{value:e.add_person_dlg,callback:function(t){e.add_person_dlg=t},expression:"add_person_dlg"}},[n("v-card",[n("v-form",{attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Contact Information")])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[n("v-text-field",{attrs:{label:"First Name",required:"",rules:e.nameRules},model:{value:e.add_person.firstname,callback:function(t){e.$set(e.add_person,"firstname",t)},expression:"add_person.firstname"}})],1),n("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[n("v-text-field",{attrs:{label:"Last Name",required:"",rules:e.nameRules},model:{value:e.add_person.lastname,callback:function(t){e.$set(e.add_person,"lastname",t)},expression:"add_person.lastname"}})],1),n("v-col",{attrs:{cols:"6",sm:"6",md:"6"}})],1),n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Street Number",rules:e.streetNumberRules},model:{value:e.add_person.street_number,callback:function(t){e.$set(e.add_person,"street_number",t)},expression:"add_person.street_number"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Street Name",rules:e.nameRules},model:{value:e.add_person.street_name,callback:function(t){e.$set(e.add_person,"street_name",t)},expression:"add_person.street_name"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"3",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"City",rules:e.nameRules},model:{value:e.add_person.city,callback:function(t){e.$set(e.add_person,"city",t)},expression:"add_person.city"}})],1),n("v-col",{attrs:{cols:"2"}},[n("v-select",{attrs:{label:"State",rules:e.nameRules,items:e.states},model:{value:e.add_person.state,callback:function(t){e.$set(e.add_person,"state",t)},expression:"add_person.state"}})],1),n("v-col",{attrs:{cols:"3"}},[n("v-text-field",{attrs:{label:"Zip",rules:e.zipRules},model:{value:e.add_person.zip,callback:function(t){e.$set(e.add_person,"zip",t)},expression:"add_person.zip"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"County",rules:e.nameRules},model:{value:e.add_person.county,callback:function(t){e.$set(e.add_person,"county",t)},expression:"add_person.county"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Primary Phone",placeholder:"(XXX) XXX-XXXX",rules:e.phoneRules},on:{keyup:e.formatPrimaryPhone},model:{value:e.add_person.primaryPhone,callback:function(t){e.$set(e.add_person,"primaryPhone",t)},expression:"add_person.primaryPhone"}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Secondary Phone",placeholder:"(XXX) XXX-XXXX",rules:e.phoneRules},on:{keyup:e.formatSecondaryPhone},model:{value:e.add_person.secondaryPhone,callback:function(t){e.$set(e.add_person,"secondaryPhone",t)},expression:"add_person.secondaryPhone"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Primary Email",rules:e.emailRules},model:{value:e.add_person.primaryEmail,callback:function(t){e.$set(e.add_person,"primaryEmail",t)},expression:"add_person.primaryEmail"}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Secondary Email",rules:e.emailRules},model:{value:e.add_person.secondaryEmail,callback:function(t){e.$set(e.add_person,"secondaryEmail",t)},expression:"add_person.secondaryEmail"}})],1)],1)],1),n("small",[e._v("*indicates required field")])],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.add_person_dlg=!1}}},[e._v("\n                Close\n              ")]),n("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:!e.valid},on:{click:e.addPerson}},[e._v("\n                Save\n              ")])],1)],1)],1)],1)],1)],1)],1)},wt=[],zt={name:"volunteers-list",data:function(){return{volunteers:[],add_person_dlg:!1,phone1:"",phone2:"",currentVolunteer:null,search:"",currentIndex:-1,name:"",add_person:{firstname:"",lastname:"",street_number:"",street_name:"",city:"",state:"",zip:"",county:"",organization:"",primaryPhone:"",secondaryPhone:"",primaryEmail:"",secondaryEmail:""},view_person:{firstname:"",lastname:"",street_number:"",street_name:"",city:"",state:"",zip:"",county:"",organization:"",primaryPhone:"",secondaryPhone:"",primaryEmail:"",secondaryEmail:""},states:["AK","AL","AR","AS","AZ","CA","CO","CT","DC","DE","FL","GA","GU","HI","IA","ID","IL","IN","KS","KY","LA","MA","MD","ME","MI","MN","MO","MP","MS","MT","NC","ND","NE","NH","NJ","NM","NV","NY","OH","OK","OR","PA","PR","RI","SC","SD","TN","TX","UM","UT","VA","VI","VT","WA","WI","WV","WY"],nameRules:[function(e){return!!e||"Required"},function(e){return/\D\S$/.test(e)||"No white or empty spaces"}],emailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],phoneRules:[function(e){return!!e||"Required"},function(e){return/\S\d$/.test(e)||"Phone number must be valid"}],streetNumberRules:[function(e){return!!e||"Required"},function(e){return/\S\d$/.test(e)||"Street number must be valid"}],zipRules:[function(e){return!!e||"Required"},function(e){return/\S\d$/.test(e)||"Zip number must be valid"}],show1:!1,rules:{required:function(e){return!!e||"Required."},min:function(e){return e&&e.length>=1||"Min 5 characters"}}}},computed:{headers:function(){var e=[{text:"Name",value:"name",width:"80px"},{text:"Address",value:"address",width:"100px"},{text:"Email",value:"email",width:"80px"},{text:"Phone",value:"phone",width:"100px"},{text:"County",value:"county",width:"80px"},{text:"Organization",value:"organization_names",width:"80px"},{text:"Delete",value:"actions",width:"1%"}];return e}},methods:{nav:function(e){this.$router.push({path:"contact/"+e.id})},retrieveVolunteers:function(){var e=this;nt.getAll().then((function(t){e.volunteers=t.data.filter((function(e){return null==e.user})),e.volunteers.forEach((function(e){e.address=e.street_number+" "+e.street_name+"\n"+e.city+", "+e.state+" "+e.zip,e.name=e.first_name+" "+e.last_name;var t="";e.emails.forEach((function(e){1==e.isPrimary&&(t+=e.address+"\n")})),e.email=t;var n="";e.phones.forEach((function(e){1==e.isPrimary&&(n+=e.number+"\n")}));var a="";e.organizations.forEach((function(e){a+=e.name+"\n"})),e.email=t,e.organization_names=a,e.phone=n}))})).catch((function(e){console.log(e.message)}))},refreshList:function(){this.retrieveVolunteers(),this.currentVolunteers=null,this.currentIndex=-1},setActiveVolunteer:function(e,t){this.currentVolunteer=e,this.currentIndex=t},searchTitle:function(){var e=this;nt.findByName(this.first_name).then((function(t){e.volunteers=t.data,console.log(t.data)})).catch((function(e){console.log(e)}))},addPerson:function(){var e=this,t={first_name:this.add_person.firstname,last_name:this.add_person.lastname,street_number:this.add_person.street_number,street_name:this.add_person.street_name,city:this.add_person.city,state:this.add_person.state,zip:this.add_person.zip,county:this.add_person.county};t.services=this.add_person.services,nt.create(t).then((function(n){console.log(n);var a=t.first_name+" "+t.last_name,o="created";return e.addToLog(a,o),e.retrieveVolunteers(),e.add_organization_dlg=!1,n.data.id})).then((function(t){var n={personId:t,address:e.add_person.primaryEmail,isPrimary:!0},a={personId:t,address:e.add_person.secondaryEmail,isPrimary:!1},o={personId:t,number:e.add_person.primaryPhone,isPrimary:!0},i={personId:t,number:e.add_person.secondaryPhone,isPrimary:!1};pt.create(n),pt.create(a),le.create(o),le.create(i),e.retrieveVolunteers()})).catch((function(e){console.log(e)})),this.add_person_dlg=!1,this.refreshList()},removePerson:function(e){var t=this;confirm("Are you sure you want to remove "+name+" from the table?")&&nt.delete(e.id).then((function(n){console.log(n);var a="deleted",o=e.first_name+" "+e.last_name;t.addToLog(o,a),t.refreshList()})).catch((function(e){console.log(e)})),this.refreshList()},addToLog:function(e,t){var n,a={entry:""};et.getByUserId(this.$session.get("userID")).then((function(o){n=o.data.person.first_name+" "+o.data.person.last_name,a.entry=e+" was "+t+" by "+n,console.log(a.entry)})).catch((function(e){console.log(e.message)}))},formatPrimaryPhone:function(){this.add_person.primaryPhone=this.add_person.primaryPhone.replace(/[^0-9]/g,"").replace(/^(\d{3})?(\d{3})?(\d{4})?/g,"($1)$2-$3").substr(0,13)},formatSecondaryPhone:function(){this.add_person.secondaryPhone=this.add_person.secondaryPhone.replace(/[^0-9]/g,"").replace(/^(\d{3})?(\d{3})?(\d{4})?/g,"($1)$2-$3").substr(0,13)}},mounted:function(){this.retrieveVolunteers()}},Ct=zt,Ot=(n("9cc6"),Object(v["a"])(Ct,kt,wt,!1,null,"105c082c",null)),Rt=Ot.exports;h()(Ot,{VBtn:x["a"],VCard:k["a"],VCardActions:be["a"],VCardText:be["c"],VCardTitle:be["d"],VCol:L["a"],VContainer:X["a"],VDataTable:ye["a"],VDialog:w["a"],VForm:xe["a"],VHover:ke["a"],VIcon:z["a"],VRow:U["a"],VSelect:we["a"],VSpacer:N["a"],VTextField:ze["a"]});var Pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("div",{staticClass:"red--text text--darken-4 page-title"},[e._v("Contact Info")])])],1),n("v-row",[n("v-col",{staticClass:"col-7"},[n("v-row",[n("v-col",{staticClass:"offset-1 col-0"},[n("v-card",{attrs:{elevation:"3"}},[n("v-card-title",[n("v-row",[n("v-col",[n("span",{staticClass:"text-h4 font-weight-thin"},[e._v("\n                    "+e._s(e.edit_person.first_name+" "+e.edit_person.last_name)+"\n                  ")])]),n("v-col",{staticClass:"col-2"},[n("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,o=t.attrs;return[n("v-hover",{attrs:{"open-delay":"200"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.hover;return[n("v-btn",e._g(e._b({class:{"on-hover":i},attrs:{icon:"",elevation:i?16:2}},"v-btn",o,!1),a),[n("v-icon",[e._v(" mdi-pencil ")])],1)]}}],null,!0)})]}}]),model:{value:e.edit_person_dlg,callback:function(t){e.edit_person_dlg=t},expression:"edit_person_dlg"}},[n("v-card",[n("v-form",{attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Contact Information")])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[n("v-text-field",{attrs:{label:"First Name",required:"",rules:e.nameRules},model:{value:e.edit_person.first_name,callback:function(t){e.$set(e.edit_person,"first_name",t)},expression:"edit_person.first_name"}})],1),n("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[n("v-text-field",{attrs:{label:"Last Name",required:"",rules:e.nameRules},model:{value:e.edit_person.last_name,callback:function(t){e.$set(e.edit_person,"last_name",t)},expression:"edit_person.last_name"}})],1),n("v-col",{attrs:{cols:"6",sm:"6",md:"6"}})],1),n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Street Number",rules:e.nameRules},model:{value:e.edit_person.street_number,callback:function(t){e.$set(e.edit_person,"street_number",t)},expression:"edit_person.street_number"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Street Name",rules:e.nameRules},model:{value:e.edit_person.street_name,callback:function(t){e.$set(e.edit_person,"street_name",t)},expression:"edit_person.street_name"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"3",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"City",rules:e.nameRules},model:{value:e.edit_person.city,callback:function(t){e.$set(e.edit_person,"city",t)},expression:"edit_person.city"}})],1),n("v-col",{attrs:{cols:"2"}},[n("v-select",{attrs:{label:"State",rules:e.nameRules,items:e.states},model:{value:e.edit_person.state,callback:function(t){e.$set(e.edit_person,"state",t)},expression:"edit_person.state"}})],1),n("v-col",{attrs:{cols:"3"}},[n("v-text-field",{attrs:{label:"Zip",rules:e.zipRules},model:{value:e.edit_person.zip,callback:function(t){e.$set(e.edit_person,"zip",t)},expression:"edit_person.zip"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"County",rules:e.nameRules},model:{value:e.edit_person.county,callback:function(t){e.$set(e.edit_person,"county",t)},expression:"edit_person.county"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Primary Phone",rules:e.phoneRules},model:{value:e.edit_person.primaryPhone,callback:function(t){e.$set(e.edit_person,"primaryPhone",t)},expression:"edit_person.primaryPhone"}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Secondary Phone",rules:e.phoneRules},model:{value:e.edit_person.secondaryPhone,callback:function(t){e.$set(e.edit_person,"secondaryPhone",t)},expression:"edit_person.secondaryPhone"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Primary Email",rules:e.emailRules},model:{value:e.edit_person.primaryEmail,callback:function(t){e.$set(e.edit_person,"primaryEmail",t)},expression:"edit_person.primaryEmail"}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Secondary Email",rules:e.emailRules},model:{value:e.edit_person.secondaryEmail,callback:function(t){e.$set(e.edit_person,"secondaryEmail",t)},expression:"edit_person.secondaryEmail"}})],1)],1)],1),n("small",[e._v("*indicates required field")])],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.edit_person_dlg=!1}}},[e._v("\n                            Close\n                          ")]),n("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:!e.valid},on:{click:e.updatePerson}},[e._v("\n                            Save\n                          ")])],1)],1)],1)],1),n("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,o=t.attrs;return[n("v-hover",{attrs:{"open-delay":"200"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.hover;return[n("v-btn",e._g(e._b({staticClass:"text--primary",class:{"on-hover":i},attrs:{color:"white",fab:"",small:"",elevation:i?16:2}},"v-btn",o,!1),a),[n("v-icon",[e._v(" mdi-plus ")])],1)]}}],null,!0)})]}}]),model:{value:e.add_note_dlg,callback:function(t){e.add_note_dlg=t},expression:"add_note_dlg"}},[n("v-form",{ref:"new_note_form",model:{value:e.valid_note,callback:function(t){e.valid_note=t},expression:"valid_note"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Note")])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{staticClass:"col-3"},[n("v-autocomplete",{attrs:{items:e.add_note_form.types,label:"Type"},model:{value:e.add_note_form.type,callback:function(t){e.$set(e.add_note_form,"type",t)},expression:"add_note_form.type"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[n("v-textarea",{attrs:{rules:e.note_text_rule},model:{value:e.add_note_form.text,callback:function(t){e.$set(e.add_note_form,"text",t)},expression:"add_note_form.text"}})],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.add_note_dlg=!1}}},[e._v("\n                            Close\n                          ")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.addNote}},[e._v("\n                            Save\n                          ")])],1)],1)],1)],1)],1)],1)],1),n("v-card-subtitle",[e._v("\n              "+e._s(e.edit_person.primaryPhone)+" | "+e._s(e.edit_person.primaryEmail)+"\n              "),n("div",[e._v("\n                "+e._s("Recent Note: "+e.edit_person.person_notes)+"\n              ")])]),n("v-divider"),n("v-card-text",[n("address",{staticClass:"text-capitalize"},[e._v("\n                "+e._s(e.edit_person.street_number)+" "+e._s(e.edit_person.street_name)),n("br"),e._v("\n                "+e._s(e.edit_person.city)+", "+e._s(e.edit_person.state)+"\n                "+e._s(e.edit_person.zip)),n("br"),e._v("\n                "+e._s(e.edit_person.county+" County")),n("br")]),e._v("\n              Affiliated Organizations: "+e._s(e.edit_person.organization_names)+"\n              "),n("br"),e._v("\n              Alternate Contact Info:\n              "+e._s(e.edit_person.secondaryPhone)+"\n              "+e._s(e.edit_person.secondaryEmail)+"\n            ")])],1)],1)],1)],1),n("v-col",[n("NoteDialog",{attrs:{item:e.view_note_item},model:{value:e.showNoteDialog,callback:function(t){e.showNoteDialog=t},expression:"showNoteDialog"}}),[n("v-card")]],2)],1)],1)},At=[],It={name:"contact",components:{NoteDialog:Ue},data:function(){return{edit_person_dlg:!1,showNoteDialog:!1,phoneId:"",phone2Id:"",emailId:"",email2Id:"",states:["AK","AL","AR","AS","AZ","CA","CO","CT","DC","DE","FL","GA","GU","HI","IA","ID","IL","IN","KS","KY","LA","MA","MD","ME","MI","MN","MO","MP","MS","MT","NC","ND","NE","NH","NJ","NM","NV","NY","OH","OK","OR","PA","PR","RI","SC","SD","TN","TX","UM","UT","VA","VI","VT","WA","WI","WV","WY"],edit_person:{first_name:"",last_name:"",street_number:"",street_name:"",city:"",state:"",zip:"",county:"",organization_names:"",primaryPhone:"",secondaryPhone:"",primaryEmail:"",secondaryEmail:"",person_notes:""},view_note_item:{},note_search:"",history_switch:!0,notes:[],add_note_dlg:!1,valid_note:!0,note_text_rule:[function(e){return!!e||"Text is required"}],add_note_form:{types:["General","Contact"],text:"",type:"General"},view_note_dlg:!1,notes_type_selected:{general:!1,contact:!0},menu1:!1,menu2:!1,start_date:(new Date).toISOString().substr(0,10),end_date:(new Date).toISOString().substr(0,10),formattedStartDate:"",formattedEndDate:"",tab:"",nameRules:[function(e){return!!e||"Required"},function(e){return/\D\S$/.test(e)||"No white or empty spaces"}],emailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],phoneRules:[function(e){return!!e||"Required"},function(e){return/\S\d$/.test(e)||"Phone number must be valid"}],streetNumberRules:[function(e){return!!e||"Required"},function(e){return/\S\d$/.test(e)||"Street number must be valid"}],zipRules:[function(e){return!!e||"Required"},function(e){return/\S\d$/.test(e)||"Zip number must be valid"}],show1:!1,rules:{required:function(e){return!!e||"Required."},min:function(e){return e&&e.length>=1||"Min 5 characters"}}}},methods:{showDialog:function(){this.edit_person_dlg=!0},setPerson:function(){var e=this;Ne.get(this.$route.params.personId).then((function(t){e.edit_person=t.data,console.log("logging response"),console.log(t),t.data.phones.forEach((function(t){t.isPrimary?(e.edit_person.primaryPhone=t.number,e.phoneId=t.id):(e.edit_person.secondaryPhone=t.number,e.phone2Id=t.id)})),t.data.emails.forEach((function(t){t.isPrimary?(e.edit_person.primaryEmail=t.address,e.emailId=t.id):(e.edit_person.secondaryEmail=t.address,e.email2Id=t.id)})),e.edit_person.organization_names="",t.data.organizations.forEach((function(t){e.edit_person.organization_names+=t.name+"\n"}))})).catch((function(e){console.log(e.message)}))},updatePerson:function(){var e=this,t={first_name:this.edit_person.first_name,last_name:this.edit_person.last_name,street_number:this.edit_person.street_number,street_name:this.edit_person.street_name,city:this.edit_person.city,state:this.edit_person.state,zip:this.edit_person.zip,county:this.edit_person.county};console.log(t);var n=this.$route.params.personId;Ne.update(n,t).then((function(e){return e.data.id})).then((function(t){console.log(t);var n={address:e.edit_person.primaryEmail,isPrimary:!0},a={address:e.edit_person.secondaryEmail,isPrimary:!1},o={number:e.edit_person.primaryPhone,isPrimary:!0},i={number:e.edit_person.secondaryPhone,isPrimary:!1};console.log(i),pt.update(e.emailId,n),pt.update(e.email2Id,a),le.update(e.phoneId,o),le.update(e.phone2Id,i).then((function(e){console.log(e)}))})).catch((function(e){console.log(e)})),this.edit_person_dlg=!1},addNote:function(e){var t=this;if(console.log(e),this.$refs.new_note_form.validate()){var n={first_name:this.edit_person.first_name,last_name:this.edit_person.last_name,street_number:this.edit_person.street_number,street_name:this.edit_person.street_name,city:this.edit_person.city,state:this.edit_person.state,zip:this.edit_person.zip,county:this.edit_person.county,person_notes:this.add_note_form.text},a=this.$route.params.personId;Ne.update(a,n).then((function(e){console.log(e),t.setPerson()})).catch((function(e){console.log(e)})),this.add_note_dlg=!1}},deleteNote:function(e){var t=this;je.delete(e.id).then((function(e){t.setPerson(t.$route.params.personId),console.log(e)})).catch((function(e){console.log(e)})),this.showNoteDialog=!1},close_note_dlg:function(){this.view_note_dlg=!1},openNoteDialog:function(e){this.showNoteDialog=!0,this.view_note_item=e},setModal:function(e){this.view_note_item=e,this.open_note_dlg()},switch_label:function(){return this.history_switch?"Contact History":"General History"},set_notes_view:function(){this.notes_type_selected.general=!this.history_switch,this.notes_type_selected.contact=this.history_switch}},computed:{},mounted:function(){this.setPerson()}},Vt=It,Nt=Object(v["a"])(Vt,Pt,At,!1,null,null,null),St=Nt.exports;h()(Nt,{VAutocomplete:Ye["a"],VBtn:x["a"],VCard:k["a"],VCardActions:be["a"],VCardSubtitle:be["b"],VCardText:be["c"],VCardTitle:be["d"],VCol:L["a"],VContainer:X["a"],VDialog:w["a"],VDivider:Ke["a"],VForm:xe["a"],VHover:ke["a"],VIcon:z["a"],VRow:U["a"],VSelect:we["a"],VSpacer:N["a"],VTextField:ze["a"],VTextarea:Ce["a"]});var $t=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("v-app",[n("v-dialog",{attrs:{persistent:"","max-width":"600px","min-width":"360px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("div",[n("v-tabs",{attrs:{"show-arrows":"","background-color":"red","icons-and-text":"",dark:"",grow:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("v-tabs-slider",{attrs:{color:"purple darken-4"}}),e._l(e.tabs,(function(t){return n("v-tab",{key:t.name},[n("v-icon",{attrs:{large:""}},[e._v(e._s(t.icon))]),n("div",{staticClass:"caption py-1"},[e._v(e._s(t.name))])],1)})),n("v-tab-item",[n("v-card",{staticClass:"px-4"},[n("v-card-text",[n("v-form",{ref:"loginForm",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{rules:e.loginEmailRules,label:"E-mail",required:""},model:{value:e.loginEmail,callback:function(t){e.loginEmail=t},expression:"loginEmail"}})],1),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{"append-icon":e.show1?"eye":"eye-off",rules:[e.rules.required,e.rules.min],type:e.show1?"text":"password",name:"input-10-1",label:"Password",hint:"At least 8 characters",counter:""},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.loginPassword,callback:function(t){e.loginPassword=t},expression:"loginPassword"}})],1),n("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6",xsm:"12"}}),n("v-spacer"),n("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"3",xsm:"12","align-end":""}},[n("v-btn",{attrs:{"x-large":"",block:"",disabled:!e.valid,color:"success"},on:{click:e.validate}},[e._v("\n                        Login\n                      ")])],1)],1)],1)],1)],1)],1),n("v-tab-item",[n("v-card",{staticClass:"px-4"},[n("v-card-text",[n("v-form",{ref:"registerForm",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-text-field",{attrs:{rules:[e.rules.required],label:"First Name",maxlength:"20",required:""},model:{value:e.FirstName,callback:function(t){e.FirstName=t},expression:"FirstName"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-text-field",{attrs:{rules:[e.rules.required],label:"Last Name",maxlength:"20",required:""},model:{value:e.LastName,callback:function(t){e.LastName=t},expression:"LastName"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-text-field",{attrs:{rules:[e.rules.required],label:"User ID",maxlength:"20",required:""},model:{value:e.UserId,callback:function(t){e.UserId=t},expression:"UserId"}})],1),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{rules:e.emailRules,label:"E-mail",required:""},model:{value:e.Email,callback:function(t){e.Email=t},expression:"Email"}})],1),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{"append-icon":e.show1?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.rules.min],type:e.show1?"text":"Password",name:"input-10-1",label:"Password",hint:"At least 8 characters",counter:""},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.Password,callback:function(t){e.Password=t},expression:"Password"}})],1),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{block:"","append-icon":e.show1?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.passwordMatch],type:e.show1?"text":"Password",name:"input-10-1",label:"Confirm Password",counter:""},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.verify,callback:function(t){e.verify=t},expression:"verify"}})],1),n("v-spacer"),n("v-col",{staticClass:"d-flex ml-auto",attrs:{cols:"12",sm:"3",xsm:"12"}},[n("v-btn",{attrs:{"x-large":"",block:"",disabled:!e.valid,color:"success"},on:{click:e.validate}},[e._v("Register")])],1)],1)],1)],1)],1)],1)],2)],1)])],1)],1)},Et=[],jt={computed:{passwordMatch:function(){var e=this;return function(){return e.Password===e.verify||"Password must match"}}},methods:{validate:function(){this.$refs.loginForm.validate()&&axios.post("localhost:3000/Users",{userId:JSON.stringify(this.UserId),firstName:JSON.stringify(this.FirstName),lastName:JSON.stringify(this.LastName),password:JSON.stringify(this.Password),emailAddress:JSON.stringify(this.Email)}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()}},data:function(){return{dialog:!0,tab:0,tabs:[{name:"Login",icon:"mdi-account"},{name:"Register",icon:"mdi-account-outline"}],valid:!0,FirstName:"",UserId:"",LastName:"",Email:"",Password:"",verify:"",loginPassword:"",loginEmail:"",loginEmailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],emailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],show1:!1,show2:!1,rules:{required:function(e){return!!e||"Required."},min:function(e){return e&&e.length>=8||"Min 8 characters"}}}}},Dt=jt,Mt=n("71a3"),Tt=n("c671"),Ft=n("fe57"),qt=n("9a96"),Lt=Object(v["a"])(Dt,$t,Et,!1,null,null,null),Xt=Lt.exports;h()(Lt,{VApp:g["a"],VBtn:x["a"],VCard:k["a"],VCardText:be["c"],VCol:L["a"],VDialog:w["a"],VForm:xe["a"],VIcon:z["a"],VRow:U["a"],VSpacer:N["a"],VTab:Mt["a"],VTabItem:Tt["a"],VTabs:Ft["a"],VTabsSlider:qt["a"],VTextField:ze["a"]});var Ut=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("div",{staticClass:"red--text text--darken-4 page-title",attrs:{align:"center"}},[e._v("\n        User Info\n      ")])])],1),n("v-row",[n("v-col",{staticClass:"col-7"},[n("v-row",[n("v-col",{staticClass:"offset-1 col-10"},[n("v-card",{attrs:{elevation:"3"}},[n("v-card-title",[n("v-row",[n("v-col",[n("span",{staticClass:"text-h4 font-weight-thin"},[e._v("\n                    "+e._s(e.edit_person.first_name+" "+e.edit_person.last_name)+"\n                  ")]),n("v-row",[n("span",{staticClass:"text-h6 font-weight-thin"},[e._v("\n                      "+e._s("Roles: "+e.view_role.role)+"\n                    ")])])],1),n("v-col",{staticClass:"col-2"},[n("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,o=t.attrs;return[n("v-hover",{attrs:{"open-delay":"200"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.hover;return[n("v-btn",e._g(e._b({class:{"on-hover":i},attrs:{icon:"",elevation:i?16:2}},"v-btn",o,!1),a),[n("v-icon",[e._v(" mdi-pencil ")])],1)]}}],null,!0)})]}}]),model:{value:e.edit_person_dlg,callback:function(t){e.edit_person_dlg=t},expression:"edit_person_dlg"}},[n("v-card",[n("v-form",{attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("User Information")])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[n("v-text-field",{attrs:{label:"First Name",required:"",rules:e.nameRules},model:{value:e.edit_person.first_name,callback:function(t){e.$set(e.edit_person,"first_name",t)},expression:"edit_person.first_name"}})],1),n("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[n("v-text-field",{attrs:{label:"Last Name",required:"",rules:e.nameRules},model:{value:e.edit_person.last_name,callback:function(t){e.$set(e.edit_person,"last_name",t)},expression:"edit_person.last_name"}})],1),n("v-col",{attrs:{cols:"6",sm:"6",md:"6"}})],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Email",rules:e.emailRules},model:{value:e.edit_user.email,callback:function(t){e.$set(e.edit_user,"email",t)},expression:"edit_user.email"}})],1)],1),n("v-row",[n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-autocomplete",{attrs:{label:"User Role",items:e.role,"item-text":"name","item-value":"id"},model:{value:e.view_role.role,callback:function(t){e.$set(e.view_role,"role",t)},expression:"view_role.role"}},[e._v("\n                                    "+e._s(e.view_role.role)+"\n                                  ")])],1),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Phone",rules:e.phoneRules},model:{value:e.edit_contact.phone,callback:function(t){e.$set(e.edit_contact,"phone",t)},expression:"edit_contact.phone"}})],1)],1)],1)],1),n("small",[e._v("*indicates required field")])],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.edit_person_dlg=!1}}},[e._v("\n                            Close\n                          ")]),n("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:!e.valid},on:{click:e.updatePerson}},[e._v("\n                            Save\n                          ")])],1)],1)],1)],1)],1)],1)],1),n("v-divider")],1)],1)],1)],1)],1)],1)},Bt=[],Ht=(n("6b54"),function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"create",value:function(e){return d.post("/user_roles/",e)}},{key:"update",value:function(e,t,n){return d.put("/user_roles/".concat(e,"/").concat(t),n)}},{key:"get",value:function(e,t){return d.get("/user_roles/".concat(e),t)}}]),e}()),Wt=new Ht,Zt=n("1c46"),Yt={data:function(){return{selectedRole:"",role:["Admin","User"],edit_person_dlg:!1,person:{first_name:"",last_name:""},edit_person:{first_name:"",last_name:""},edit_user:{email:""},edit_role:{role:"",userId:""},view_role:{role:""},edit_contact:{phone:""},contact_id:{phone:"",email:""},nameRules:[function(e){return!!e||"Required"},function(e){return/\D\S$/.test(e)||"No white or empty spaces"}],emailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],phoneRules:[function(e){return!!e||"Required"},function(e){return/\S\d$/.test(e)||"Phone number must be valid"}],show1:!1,rules:{required:function(e){return!!e||"Required."},min:function(e){return e&&e.length>=1||"Min 5 characters"}}}},methods:{updateSelectedRole:function(e){var t="",n="";"User"===e?(t=2,n=1):(t=1,n=2);var a={userId:this.edit_role.userId,roleId:n},o={roleId:t};Wt.update(a.userId,a.roleId,o).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},populateRoles:function(){var e=this;p.getAll().then((function(t){e.roles=t.data})).catch((function(e){console.log(e)}))},showDialog:function(){this.edit_person_dlg=!0},setPerson:function(){var e=this;this.populateRoles(),et.get(this.$route.params.personId).then((function(t){console.log(t);var n=t.data.user.roles[0].user_roles.roleId;console.log(t.data.user.id),console.log(n),e.edit_role.userId=t.data.user.id,e.edit_person=t.data,e.edit_user=t.data.user,e.edit_contact.phone=t.data.phones[0].number,e.contact_id.phone=t.data.phones[0].id,e.contact_id.email=t.data.emails[0].id,e.view_role.role=2==n?"User":"Admin"})).catch((function(e){console.log(e)}))},generateSalt:function(){return Zt.randomBytes(16).toString("base64")},encryptPassword:function(e,t){return Zt.createHash("sha256").update(e).update(t).digest("hex")},updatePerson:function(){var e={first_name:this.edit_person.first_name,last_name:this.edit_person.last_name,email:this.edit_user.email};console.log(e);var t=this.$route.params.personId,n={number:this.edit_contact.phone,isPrimary:!0},a={address:this.edit_user.email,isPrimary:!0};le.update(this.contact_id.phone,n),pt.update(this.contact_id.email,a),et.update(t,e).then((function(e){console.log(e)})).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),this.edit_person_dlg=!1,console.log(this.view_role.role),this.updateSelectedRole(this.view_role.role)}},mounted:function(){this.setPerson()}},Kt=Yt,Gt=Object(v["a"])(Kt,Ut,Bt,!1,null,null,null),Jt=Gt.exports;h()(Gt,{VAutocomplete:Ye["a"],VBtn:x["a"],VCard:k["a"],VCardActions:be["a"],VCardText:be["c"],VCardTitle:be["d"],VCol:L["a"],VContainer:X["a"],VDialog:w["a"],VDivider:Ke["a"],VForm:xe["a"],VHover:ke["a"],VIcon:z["a"],VRow:U["a"],VSpacer:N["a"],VTextField:ze["a"]});var Qt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("div",{staticClass:"red--text text--darken-4 page-title",attrs:{align:"center"}},[e._v("Users")]),n("v-row",[n("v-col",{staticClass:"col-12"},[n("v-card",{attrs:{elevation:"3 text-wrap"}},[n("v-card-text",[n("v-row",[n("v-col",{staticClass:"col-6"},[n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search Table","single-line":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),n("v-data-table",{staticClass:"text-capitalize",attrs:{headers:e.headers,items:e.volunteers,search:e.search,"item-key":"id","multi-sort":""},scopedSlots:e._u([{key:"item.name",fn:function(t){var a=t.item;return[null!==a.first_name?[n("a",{on:{click:function(t){return e.nav(a)}}},[n("span",{staticClass:"black--text"},[e._v(" "+e._s(a.name))]),a.public_safety?n("span",[e._v(" (Public Safety)")]):e._e()])]:null!==a.partner?[n("a",{on:{click:function(t){return e.nav(a)}}},[n("span",{staticClass:"purple--text"},[e._v(e._s(a.name))]),a.public_safety?n("span",[e._v(" (Public Safety)")]):e._e()])]:e._e()]}},{key:"item.address",fn:function(t){var a=t.item;return[n("address",[e._v("\n                "+e._s(a.address)+"\n              ")])]}},{key:"item.email",fn:function(t){var a=t.item;return[n("a",{on:{click:function(t){return e.nav(a)}}},[n("div",[n("span",{staticClass:"black--text"},[e._v("\n                    "+e._s(a.user.email)+"\n                  ")])])])]}},{key:"item.roles",fn:function(t){var a=t.item;return[n("div",[n("span",{staticClass:"purple--text"},[e._v(e._s(a.role))])])]}},{key:"item.actions",fn:function(t){var a=t.item;return[n("v-icon",{attrs:{small:""},on:{click:function(t){return e.removePerson(a)}}},[e._v("mdi-delete")])]}}],null,!0)})],1)],1),n("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,o=t.attrs;return[n("v-hover",{attrs:{"open-delay":"200"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.hover;return[n("v-btn",e._g(e._b({class:{"on-hover":i},attrs:{text:"",elevation:i?16:2}},"v-btn",o,!1),a),[e._v("\n              Add User\n              "),n("v-icon",[e._v(" mdi-plus ")])],1)]}}],null,!0)})]}}]),model:{value:e.add_person_dlg,callback:function(t){e.add_person_dlg=t},expression:"add_person_dlg"}},[n("v-card",[n("v-form",{attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Add User")])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[n("v-text-field",{attrs:{required:"",label:"First Name",rules:e.nameRules},model:{value:e.add_person.firstname,callback:function(t){e.$set(e.add_person,"firstname",t)},expression:"add_person.firstname"}})],1),n("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[n("v-text-field",{attrs:{label:"Last Name",required:"",rules:e.nameRules},model:{value:e.add_person.lastname,callback:function(t){e.$set(e.add_person,"lastname",t)},expression:"add_person.lastname"}})],1),n("v-col",{attrs:{cols:"6",sm:"6",md:"6"}})],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Email",rules:e.emailRules},model:{value:e.add_person.email,callback:function(t){e.$set(e.add_person,"email",t)},expression:"add_person.email"}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Password"},model:{value:e.add_person.password,callback:function(t){e.$set(e.add_person,"password",t)},expression:"add_person.password"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Phone",rules:e.phoneRules},model:{value:e.add_person.phone,callback:function(t){e.$set(e.add_person,"phone",t)},expression:"add_person.phone"}})],1)],1)],1),n("small",[e._v("*indicates required field")])],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.add_person_dlg=!1}}},[e._v("\n                Close\n              ")]),n("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:!e.valid},on:{click:e.addPerson}},[e._v("\n                Save\n              ")])],1)],1)],1)],1)],1)],1)],1)},en=[],tn={name:"users",data:function(){return{volunteers:[],add_person_dlg:!1,currentVolunteer:null,search:"",currentIndex:-1,name:"",role:"",add_person:{firstname:"",lastname:"",email:"",password:"",phone:""},add_role:{roles:""},view_person:{firstname:"",lastname:""},nameRules:[function(e){return!!e||"Required"},function(e){return/\D\S$/.test(e)||"No white or empty spaces"}],emailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],phoneRules:[function(e){return!!e||"Required"},function(e){return/\S\d$/.test(e)||"Phone number must be valid"}],show1:!1,rules:{required:function(e){return!!e||"Required."},min:function(e){return e&&e.length>=1||"Min 5 characters"}}}},computed:{headers:function(){var e=[{text:"Name",value:"name",width:"80px"},{text:"Email",value:"email",width:"80px"},{text:"Roles",value:"role",width:"100px"},{text:"Delete",value:"actions",width:"1%"}];return e}},methods:{nav:function(e){this.$router.push({path:"User/"+e.id})},retrieveVolunteers:function(){var e=this;et.getAll().then((function(t){console.log(t.data),e.volunteers=t.data,e.volunteers.forEach((function(e){e.name=e.first_name+" "+e.last_name,console.log(e.name);var t=e.user.roles[0].id,n="";console.log(t),n=2==t?"User":"Admin",console.log(n),e.role=n}))})).catch((function(e){console.log(e.message)}))},refreshList:function(){this.retrieveVolunteers(),this.currentVolunteers=null,this.currentIndex=-1},setActiveVolunteer:function(e,t){this.currentVolunteer=e,this.currentIndex=t},addPerson:function(){var e=this,t={first_name:this.add_person.firstname,last_name:this.add_person.lastname,email:this.add_person.email,password:this.add_person.password};this.add_role.roles;t.services=this.add_person.services,et.create(t).then((function(t){console.log(t.data.personId);var n={userId:t.data.userId,roleId:2},a={personId:t.data.personId,number:e.add_person.phone,isPrimary:!0},o={personId:t.data.personId,address:e.add_person.email,isPrimary:!0};le.create(a),pt.create(o),Wt.create(n).then((function(t){e.refreshList()})).catch((function(e){console.log(e)})),e.refreshList()})).catch((function(e){console.log(e)})),this.add_person_dlg=!1},removePerson:function(e){var t=this;confirm("Are you sure you want to remove "+e.first_name+" "+e.last_name+" from the table?")&&et.delete(e.id).then((function(e){t.refreshList()})).catch((function(e){console.log(e)}))}},mounted:function(){this.retrieveVolunteers()}},nn=tn,an=(n("e64d"),Object(v["a"])(nn,Qt,en,!1,null,"159f748e",null)),on=an.exports;h()(an,{VBtn:x["a"],VCard:k["a"],VCardActions:be["a"],VCardText:be["c"],VCardTitle:be["d"],VCol:L["a"],VContainer:X["a"],VDataTable:ye["a"],VDialog:w["a"],VForm:xe["a"],VHover:ke["a"],VIcon:z["a"],VRow:U["a"],VSpacer:N["a"],VTextField:ze["a"]});var sn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("v-app",[n("v-dialog",{attrs:{persistent:"","max-width":"600px","min-width":"360px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("div",[n("v-tabs",{attrs:{"show-arrows":"","background-color":"red","icons-and-text":"",dark:"",grow:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("v-tabs-slider",{attrs:{color:"purple darken-4"}}),e._l(e.tabs,(function(t){return n("v-tab",{key:t.name},[n("v-icon",{attrs:{large:""}},[e._v(e._s(t.icon))]),n("div",{staticClass:"caption py-1"},[e._v(e._s(t.name))])],1)})),n("v-tab-item",[n("v-card",{staticClass:"px-4"},[n("v-card-text",[n("v-form",{ref:"loginForm",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{rules:e.loginEmailRules,label:"E-mail",required:""},model:{value:e.loginEmail,callback:function(t){e.loginEmail=t},expression:"loginEmail"}})],1),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{"append-icon":e.show1?"eye":"eye-off",rules:[e.rules.required,e.rules.min],type:e.show1?"text":"password",name:"input-10-1",label:"Password",counter:""},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.loginPassword,callback:function(t){e.loginPassword=t},expression:"loginPassword"}}),e.FailedLogin?n("v-alert",{attrs:{color:"red",dense:"",dismissible:"",type:"error"}},[e._v("Invalid Credentials")]):e._e()],1),n("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6",xsm:"12"}}),n("v-spacer"),n("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"3",xsm:"12","align-end":""}},[n("v-btn",{attrs:{"x-large":"",block:"",disabled:!e.valid,color:"success"},on:{click:e.validate}},[e._v("\n                        Login\n                      ")])],1)],1)],1)],1)],1)],1),n("v-tab-item",[n("v-card",{staticClass:"px-4"},[n("v-card-text",[n("v-form",{attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-text-field",{attrs:{rules:e.nameRules,label:"First Name",maxlength:"20",required:""},model:{value:e.FirstName,callback:function(t){e.FirstName=t},expression:"FirstName"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-text-field",{attrs:{rules:e.nameRules,label:"Last Name",maxlength:"20",required:""},model:{value:e.LastName,callback:function(t){e.LastName=t},expression:"LastName"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-text-field",{attrs:{rules:e.emailRules,label:"Email",maxlength:"20",required:""},model:{value:e.Email,callback:function(t){e.Email=t},expression:"Email"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-text-field",{attrs:{rules:e.phoneRules,label:"Phone",maxlength:"20",required:""},model:{value:e.Phone,callback:function(t){e.Phone=t},expression:"Phone"}})],1),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{"append-icon":e.show1?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.rules.min],type:e.show1?"text":"Password",name:"input-10-1",label:"Password",counter:""},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.Password,callback:function(t){e.Password=t},expression:"Password"}})],1),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{block:"","append-icon":e.show2?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.passwordMatch],type:e.show2?"text":"Password",name:"input-10-1",label:"Confirm Password",counter:""},on:{"click:append":function(t){e.show2=!e.show2}},model:{value:e.verify,callback:function(t){e.verify=t},expression:"verify"}}),e.RegisteredUser?n("v-alert",{attrs:{color:this.RegisteredColor,dense:"",dismissible:"",type:this.RegisteredType}},[e._v(e._s(this.RegisteredMessage))]):e._e()],1),n("v-spacer"),n("v-col",{staticClass:"d-flex ml-auto",attrs:{cols:"12",sm:"3",xsm:"12"}},[n("v-btn",{attrs:{"x-large":"",block:"",disabled:!e.valid,color:"success"},on:{click:e.register}},[e._v("Register")])],1)],1)],1)],1)],1)],1)],2)],1)])],1)],1)},rn=[],ln=n("1c46"),cn={name:"Login",computed:{passwordMatch:function(){var e=this;return function(){return e.Password===e.verify||"Password must match"}}},methods:{generateSalt:function(){return ln.randomBytes(16).toString("base64")},encryptPassword:function(e,t){return ln.createHash("sha256").update(e).update(t).digest("hex")},testPassword:function(e,t,n){var a=this.encryptPassword(n,e);return t==a},checkCredentials:function(){var e=this;et.getByEmail(this.loginEmail).then((function(t){console.log(t);var n=t.data[0].user.password,a=t.data[0].user.salt;e.UserId=t.data[0].user.id,e.PersonId=t.data[0].id,e.UserRole=t.data[0].user.roles[0].id;var o=e.testPassword(a,n,e.loginPassword);e.$authenticated=o,e.login()})).catch((function(t){e.FailedLogin=!0,console.log(t)}))},validate:function(){var e=this;this.$refs.loginForm.validate()&&et.getAll().then((function(t){e.checkCredentials()})).catch((function(e){console.log(e)}))},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},login:function(){this.error=!0,this.$authenticated?(this.$session.start(),this.$session.set("personId",this.PersonId),this.$session.set("userID",this.UserId),this.$session.set("userRole",this.UserRole),this.$router.replace({name:"home"})):(console.log("Test"),this.FailedLogin=!0)},register:function(){var e=this,t={first_name:this.FirstName,last_name:this.LastName,email:this.Email,password:this.Password};et.create(t).then((function(t){console.log(t.data.personId);var n={userId:t.data.userId,roleId:2},a={personId:t.data.personId,number:e.Phone,isPrimary:!0},o={personId:t.data.personId,address:e.Email,isPrimary:!0};le.create(a),pt.create(o),Wt.create(n).then((function(t){e.RegisteredUser=!0,e.RegisteredColor="green",e.RegisteredType="success",e.RegisteredMessage="Successfully Registered."})).catch((function(t){e.RegisteredUser=!0,e.RegisteredColor="red",e.RegisteredType="alert",e.RegisteredMessage="Something went wrong, please contact your administrator."})),e.refreshList()})).catch((function(e){console.log(e)})),this.add_person_dlg=!1}},data:function(){return{dialog:!0,tab:0,tabs:[{name:"Login",icon:"mdi-account"},{name:"Register",icon:"mdi-account-outline"}],valid:!0,FailedLogin:!1,Registered:"",RegisteredType:"",RegisteredColor:"",RegisteredMessage:"",FirstName:"",UserId:"",PersonId:"",UserRole:"",LastName:"",Email:"",Password:"",verify:"",loginPassword:"",loginEmail:"",Phone:"",phoneRules:[function(e){return!!e||"Required"},function(e){return/\S\d$/.test(e)||"Phone number must be valid"}],nameRules:[function(e){return!!e||"Required"},function(e){return/\D\S$/.test(e)||"No white or empty spaces"}],loginEmailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],emailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],show1:!1,show2:!1,rules:{required:function(e){return!!e||"Required."},min:function(e){return e&&e.length>=1||"Min 5 characters"}}}}},dn=cn,un=n("0798"),pn=Object(v["a"])(dn,sn,rn,!1,null,null,null),mn=pn.exports;h()(pn,{VAlert:un["a"],VApp:g["a"],VBtn:x["a"],VCard:k["a"],VCardText:be["c"],VCol:L["a"],VDialog:w["a"],VForm:xe["a"],VIcon:z["a"],VRow:U["a"],VSpacer:N["a"],VTab:Mt["a"],VTabItem:Tt["a"],VTabs:Ft["a"],VTabsSlider:qt["a"],VTextField:ze["a"]});var _n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("div",{staticClass:"red--text text--darken-4 page-title",attrs:{align:"center"}},[e._v("\n        Welcome "+e._s(this.FirstName)+"\n      ")])])],1)],1)],1)},vn=[],fn={name:"userpage",data:function(){return{FirstName:"",LastName:""}},methods:{retrieveUserInfo:function(){var e=this,t=this.$session.get("personId");et.get(t).then((function(t){e.FirstName=t.data.first_name,console.log(e.FirstName),console.log(t)})).catch((function(e){console.log(e.message)}))}},mounted:function(){this.retrieveUserInfo()}},hn=fn,gn=Object(v["a"])(hn,_n,vn,!1,null,null,null),bn=gn.exports;h()(gn,{VApp:g["a"],VCol:L["a"],VContainer:X["a"],VRow:U["a"]}),a["a"].use(D["a"]);var yn=new D["a"]({mode:"history",base:"/",routes:[{path:"/",name:"login",component:mn},{path:"/home",name:"home",component:H},{path:"/register",name:"register",component:Xt},{path:"/organizations",name:"organizations",component:Re},{path:"/organization/:organizationId",name:"organization",component:xt},{path:"/contacts",name:"contacts",component:Rt},{path:"/contact/:personId",name:"contact",component:St},{path:"/users",name:"users",component:function(){if(1==this.$session.get("userRole"))return on}},{path:"/user/:personId",name:"user",component:Jt},{path:"/userpage",name:"userpage",component:bn}]}),xn=n("f309"),kn=new xn["a"]({rtl:!1,theme:{dark:!1,themes:{dark:{primary:"#E57373",accent:"#FF4081",secondary:"#ffe18d",success:"#4CAF50",info:"#2196F3",warning:"#FB8C00",error:"#FF5252"},light:{primary:"#E8E8E0",accent:"#C62828",secondary:"#30b1dc",success:"#4CAF50",info:"#2196F3",warning:"#FB8C00",error:"#FF5252"}}}});a["a"].use(xn["a"]);var wn=n("a65d"),zn=n.n(wn),Cn=n("0628"),On=n.n(Cn);n("d1e7");a["a"].use(On.a),a["a"].use(zn.a),a["a"].config.productionTip=!1,a["a"].prototype.$authenticated=!1,new a["a"]({router:yn,vuetify:kn,render:function(e){return e(j)}}).$mount("#app")},6:function(e,t){},"64a9":function(e,t,n){},7:function(e,t){},8:function(e,t){},"8e48":function(e,t,n){e.exports=n.p+"img/redcross-logo.277e8730.png"},9:function(e,t){},"961e":function(e,t,n){},"9cc6":function(e,t,n){"use strict";var a=n("f6d9"),o=n.n(a);o.a},c1c3:function(e,t,n){},d5da:function(e,t,n){},e64d:function(e,t,n){"use strict";var a=n("961e"),o=n.n(a);o.a},f6d9:function(e,t,n){}});
//# sourceMappingURL=app.f1000d2e.js.map