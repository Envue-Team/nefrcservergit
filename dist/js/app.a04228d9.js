(function(e){function t(t){for(var a,r,s=t[0],l=t[1],c=t[2],u=0,p=[];u<s.length;u++)r=s[u],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&p.push(o[r][0]),o[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);d&&d(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,s=1;s<n.length;s++){var l=n[s];0!==o[l]&&(a=!1)}a&&(i.splice(t--,1),e=r(r.s=n[0]))}return e}var a={},o={app:0},i=[];function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"015f":function(e,t,n){"use strict";var a=n("7aec"),o=n.n(a);o.a},"034f":function(e,t,n){"use strict";var a=n("64a9"),o=n.n(a);o.a},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},2:function(e,t){},3:function(e,t){},"37f7":function(e,t,n){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[a("router-link",{attrs:{to:"/"}},[a("v-img",{staticClass:"mx-2",attrs:{src:n("8e48"),"max-height":"auto","max-width":"60%",contain:""}})],1),a("router-link",{staticClass:"red--text text--darken-2 mr-3",attrs:{to:"/home"}},[e._v("Home")]),e._v(" |\n    "),a("router-link",{staticClass:"red--text text--darken-2 mr-3 ml-3 ",attrs:{to:"/contacts"}},[e._v("Contacts")]),e._v(" |\n    "),a("router-link",{staticClass:"red--text text--darken-2 ml-3 mr-3",attrs:{to:"/organizations"}},[e._v("Connections")]),e._v(" |\n    "),a("router-link",{staticClass:"red--text text--darken-2 ml-3 mr-3",attrs:{to:"/users"}},[e._v("Users")]),a("v-spacer"),a("v-btn",{attrs:{depressed:"",color:"red"},on:{click:e.logout}},[e._v("\n      Log Out\n    ")])],1),a("v-main",{staticStyle:{"background-color":"rgba(45, 70, 40, 0.04)"}},[a("router-view")],1)],1)},i=[],r={name:"App"},s=r,l=(n("034f"),n("2877")),c=n("6544"),d=n.n(c),u=n("7496"),p=n("40dc"),_=n("8336"),v=n("adda"),m=n("f6c4"),f=n("2fa4"),h=Object(l["a"])(s,o,i,!1,null,null,null),g=h.exports;d()(h,{VApp:u["a"],VAppBar:p["a"],VBtn:_["a"],VImg:v["a"],VMain:m["a"],VSpacer:f["a"]});var b=n("8c4f"),y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",[n("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[n("div",{staticClass:"text-h2 red--text text--darken-4"},[e._v("Northeast Florida Data Dashboard")])])],1),n("v-row",{staticClass:"text-center"},[n("v-col",{staticClass:"cols-7"},[n("router-link",{staticClass:"text-h4 grey--text text--darken-2",attrs:{to:"/contacts"}},[e._v("Contacts | ")]),n("router-link",{staticClass:"text-h4 grey--text text--darken-2",attrs:{to:"/organizations"}},[e._v("Connections | ")]),n("router-link",{staticClass:"text-h4 grey--text text--darken-2",attrs:{to:"/users"}},[e._v("Users")])],1)],1)],1)},x=[],k={name:"Home",data:function(){return{}},beforeCreate:function(){this.$session.exists()||this.$router.push("/")},methods:{logout:function(){this.$session.destroy(),this.$router.push("/")}}},z=k,w=n("62ad"),C=n("a523"),V=n("0fd9"),P=Object(l["a"])(z,y,x,!1,null,null,null),R=P.exports;d()(P,{VCol:w["a"],VContainer:C["a"],VRow:V["a"]});var O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("div",{staticClass:"red--text text--darken-2 page-title"},[e._v("Connections")]),n("v-row",[n("v-col",{staticClass:"col-12 "},[n("v-row",[n("v-col",[n("v-hover",{attrs:{"open-delay":"200"},scopedSlots:e._u([{key:"default",fn:function(t){t.hover;return[n("v-btn",{attrs:{text:"",color:"red"},on:{click:function(t){e.add_organization_dlg=!0}}},[e._v("\n                Add New Organization\n                "),n("v-icon",[e._v("\n                  mdi-plus\n                ")])],1)]}}])})],1)],1),n("v-card",{attrs:{outlined:"",elevation:"3 text-wrap"}},[n("v-card-text",[n("v-row",[n("v-col",{staticClass:"col-6"},[n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search Table","single-line":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),n("v-data-table",{staticClass:"text-capitalize",attrs:{headers:e.headers,search:e.search,items:e.organizations,"item-key":"id","multi-sort":""},on:{"click:row":e.nav},scopedSlots:e._u([{key:"body.append",fn:function(t){t.item;return[n("div",{staticClass:"row"},[n("div",{staticClass:"col",staticStyle:{"margin-bottom":"-25px",padding:"5px"}},[n("JsonExcel",{staticClass:"btn btn-default",attrs:{data:e.excel_data,fields:e.excel_fields,worksheet:"My Worksheet",name:"filename.xls"}},[n("v-btn",{attrs:{text:"",color:"blue"}},[e._v("\n                      Download to Excel File\n                    ")])],1)],1)])]}},{key:"item.name",fn:function(t){var n=t.item;return[e._v("\n              "+e._s(n.name)+"\n            ")]}},{key:"item.address",fn:function(t){var a=t.item;return[n("address",{staticClass:"text-capitalize"},[e._v("\n                "+e._s(a.address)+"\n              ")])]}},{key:"item.county",fn:function(t){var n=t.item;return[e._v("\n            "+e._s(n.counties)+"\n          ")]}},{key:"item.manager",fn:function(t){var n=t.item;return[e._v("\n            "+e._s(n.manager)+"\n          ")]}}])})],1)],1)],1)],1),n("v-dialog",{attrs:{"max-width":"1200px"},model:{value:e.add_organization_dlg,callback:function(t){e.add_organization_dlg=t},expression:"add_organization_dlg"}},[n("v-card",[n("v-form",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Add Organization")])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[n("v-text-field",{attrs:{label:"Agency Name*",required:""},model:{value:e.add_organization.name,callback:function(t){e.$set(e.add_organization,"name",t)},expression:"add_organization.name"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Street Number",required:""},model:{value:e.add_organization.street_number,callback:function(t){e.$set(e.add_organization,"street_number",t)},expression:"add_organization.street_number"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Street Name",required:""},model:{value:e.add_organization.street_name,callback:function(t){e.$set(e.add_organization,"street_name",t)},expression:"add_organization.street_name"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"3",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"City",required:""},model:{value:e.add_organization.city,callback:function(t){e.$set(e.add_organization,"city",t)},expression:"add_organization.city"}})],1),n("v-col",{attrs:{cols:"2"}},[n("v-select",{attrs:{required:"",items:e.states,label:"State"},model:{value:e.add_organization.state,callback:function(t){e.$set(e.add_organization,"state",t)},expression:"add_organization.state"}})],1),n("v-col",{attrs:{cols:"3"}},[n("v-text-field",{attrs:{label:"Zip",required:""},model:{value:e.add_organization.zip,callback:function(t){e.$set(e.add_organization,"zip",t)},expression:"add_organization.zip"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Website"},model:{value:e.add_organization.website,callback:function(t){e.$set(e.add_organization,"website",t)},expression:"add_organization.website"}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Number"},model:{value:e.add_organization.phone,callback:function(t){e.$set(e.add_organization,"phone",t)},expression:"add_organization.phone"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-select",{attrs:{multiple:"",required:"",items:e.all_counties,label:"Counties"},model:{value:e.add_organization.county,callback:function(t){e.$set(e.add_organization,"county",t)},expression:"add_organization.county"}})],1)],1),n("v-row",[n("v-col",[n("v-select",{attrs:{items:e.mou_options,required:"",label:"National DCS MOU Partner"},model:{value:e.add_organization.mou,callback:function(t){e.$set(e.add_organization,"mou",t)},expression:"add_organization.mou"}})],1)],1),n("v-row",[n("v-col",[n("v-select",{attrs:{multiple:"",required:"",items:e.all_lines_of_business,label:"Line of Business"},model:{value:e.add_organization.line_of_business,callback:function(t){e.$set(e.add_organization,"line_of_business",t)},expression:"add_organization.line_of_business"}})],1),n("v-col",[n("v-select",{attrs:{multiple:"",required:"",items:e.all_arc_relationships,label:"Arc Relationships"},model:{value:e.add_organization.arc_relationship,callback:function(t){e.$set(e.add_organization,"arc_relationship",t)},expression:"add_organization.arc_relationship"}})],1),n("v-col",[n("v-select",{attrs:{multiple:"",items:e.all_agency_types,label:"Agency Types"},model:{value:e.add_organization.agency_type,callback:function(t){e.$set(e.add_organization,"agency_type",t)},expression:"add_organization.agency_type"}})],1)],1),n("v-row",[n("v-textarea",{attrs:{label:"Organization Contact Protocol"}})],1),n("v-row",[n("v-textarea",{attrs:{label:"Services"}})],1)],1),n("small",[e._v("*indicates required field")])],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.add_organization_dlg=!1}}},[e._v("\n            Close\n          ")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.addOrganization}},[e._v("\n            Save\n          ")])],1)],1)],1)],1)],1)},I=[],A=(n("7f7f"),n("ac6a"),n("d225")),S=n("b0b4"),E=n("bc3a"),$=n.n(E),N=$.a.create({baseURL:"http://ec2-34-236-149-223.compute-1.amazonaws.com:8080",headers:{"Content-type":"application/json"}}),D=function(){function e(){Object(A["a"])(this,e)}return Object(S["a"])(e,[{key:"getAll",value:function(){return N.get("organizations")}},{key:"get",value:function(e){return N.get("/organizations/".concat(e))}},{key:"create",value:function(e){return N.post("/organizations",e)}},{key:"update",value:function(e,t){return N.put("/organizations/".concat(e),t)}},{key:"delete",value:function(e){return N.delete("/organizations/".concat(e))}},{key:"deleteAll",value:function(){return N.delete("/organizations")}}]),e}(),q=new D,M=function(){function e(){Object(A["a"])(this,e)}return Object(S["a"])(e,[{key:"getAll",value:function(){return N.get("partners")}},{key:"get",value:function(e){return N.get("/partners/".concat(e))}},{key:"create",value:function(e){return N.post("/partners",e)}},{key:"update",value:function(e,t){return N.put("/partners/".concat(e),t)}},{key:"delete",value:function(e){return N.delete("/partners/".concat(e))}},{key:"deleteAll",value:function(){return N.delete("/partners")}}]),e}(),T=(new M,function(){function e(){Object(A["a"])(this,e)}return Object(S["a"])(e,[{key:"getAll",value:function(){return N.get("relationships")}},{key:"get",value:function(e){return N.get("/relationships/".concat(e))}},{key:"create",value:function(e){return N.post("/relationships",e)}},{key:"update",value:function(e,t){return N.put("/relationships/".concat(e),t)}},{key:"delete",value:function(e){return N.delete("/relationships/".concat(e))}},{key:"deleteAll",value:function(){return N.delete("/relationships")}}]),e}()),F=(new T,n("f2d9")),j=function(){function e(){Object(A["a"])(this,e)}return Object(S["a"])(e,[{key:"getAll",value:function(){return N.get("counties")}},{key:"get",value:function(e){return N.get("/counties/".concat(e))}},{key:"getByName",value:function(e){return N.get("/counties/name/".concat(e))}},{key:"create",value:function(e){return N.post("/counties",e)}},{key:"update",value:function(e,t){return N.put("/counties/".concat(e),t)}},{key:"delete",value:function(e){return N.delete("/counties/".concat(e))}},{key:"deleteAll",value:function(){return N.delete("/counties")}}]),e}(),L=new j,U=function(){function e(){Object(A["a"])(this,e)}return Object(S["a"])(e,[{key:"getAll",value:function(){return N.get("lines_of_business")}},{key:"get",value:function(e){return N.get("/lines_of_business/".concat(e))}},{key:"getByName",value:function(e){return N.get("/lines_of_business/name/".concat(e))}},{key:"create",value:function(e){return N.post("/lines_of_business",e)}},{key:"update",value:function(e,t){return N.put("/lines_of_business/".concat(e),t)}},{key:"delete",value:function(e){return N.delete("/lines_of_business/".concat(e))}},{key:"deleteAll",value:function(){return N.delete("/counties")}}]),e}(),B=new U,H=function(){function e(){Object(A["a"])(this,e)}return Object(S["a"])(e,[{key:"getAll",value:function(){return N.get("arc_relationships")}},{key:"get",value:function(e){return N.get("/arc_relationships/".concat(e))}},{key:"getByName",value:function(e){return N.get("/arc_relationships/name/".concat(e))}},{key:"create",value:function(e){return N.post("/arc_relationships",e)}},{key:"update",value:function(e,t){return N.put("/arc_relationships/".concat(e),t)}},{key:"delete",value:function(e){return N.delete("/arc_relationships/".concat(e))}},{key:"deleteAll",value:function(){return N.delete("/arc_relationships")}}]),e}(),W=new H,Y=function(){function e(){Object(A["a"])(this,e)}return Object(S["a"])(e,[{key:"getAll",value:function(){return N.get("agency_types")}},{key:"get",value:function(e){return N.get("/agency_types/".concat(e))}},{key:"getByName",value:function(e){return N.get("/agency_types/name/".concat(e))}},{key:"create",value:function(e){return N.post("/agency_types",e)}},{key:"update",value:function(e,t){return N.put("/counties/".concat(e),t)}},{key:"delete",value:function(e){return N.delete("/agency_types/".concat(e))}},{key:"deleteAll",value:function(){return N.delete("/agency_types")}}]),e}(),J=new Y,Z=function(){function e(){Object(A["a"])(this,e)}return Object(S["a"])(e,[{key:"getAll",value:function(){return N.get("phones")}},{key:"get",value:function(e){return N.get("/phones/".concat(e))}},{key:"create",value:function(e){return N.post("/phones",e)}},{key:"update",value:function(e,t){return N.put("/phones/".concat(e),t)}},{key:"delete",value:function(e){return N.delete("/phones/".concat(e))}},{key:"deleteAll",value:function(){return N.delete("/phones")}}]),e}(),K=new Z,G=function(){function e(){Object(A["a"])(this,e)}return Object(S["a"])(e,[{key:"getAll",value:function(){return N.get("organization_counties")}},{key:"get",value:function(e){return N.get("/organization_counties/".concat(e))}},{key:"create",value:function(e){return N.post("/organization_counties",e)}},{key:"update",value:function(e,t,n){return N.put("/organization_counties/".concat(e,"/").concat(t),n)}},{key:"deleteOrganizationCounties",value:function(e){return N.delete("/organization_counties/".concat(e))}},{key:"delete",value:function(e,t){return N.delete("/organization_counties/".concat(e,"/").concat(t))}},{key:"deleteAll",value:function(){return N.delete("/organization_counties")}}]),e}(),X=new G,Q=function(){function e(){Object(A["a"])(this,e)}return Object(S["a"])(e,[{key:"getAll",value:function(){return N.get("organization_lines_of_business")}},{key:"get",value:function(e){return N.get("/organization_lines_of_business/".concat(e))}},{key:"create",value:function(e){return N.post("/organization_lines_of_business",e)}},{key:"update",value:function(e,t,n){return N.put("/organization_lines_of_business/".concat(e,"/").concat(t),n)}},{key:"deleteOrganizationLinesOfBusiness",value:function(e){return N.delete("/organization_lines_of_business/".concat(e))}},{key:"delete",value:function(e,t){return N.delete("/organization_lines_of_business/".concat(e,"/").concat(t))}},{key:"deleteAll",value:function(){return N.delete("/organization_lines_of_business")}}]),e}(),ee=new Q,te=function(){function e(){Object(A["a"])(this,e)}return Object(S["a"])(e,[{key:"getAll",value:function(){return N.get("organization_arc_relationships")}},{key:"get",value:function(e){return N.get("/organization_arc_relationships/".concat(e))}},{key:"create",value:function(e){return N.post("/organization_arc_relationships",e)}},{key:"update",value:function(e,t,n){return N.put("/organization_arc_relationships/".concat(e,"/").concat(t),n)}},{key:"deleteOrganizationArcRelationships",value:function(e){return N.delete("/organization_arc_relationships/".concat(e))}},{key:"delete",value:function(e,t){return N.delete("/organization_arc_relationships/".concat(e,"/").concat(t))}},{key:"deleteAll",value:function(){return N.delete("/organization_arc_relationships")}}]),e}(),ne=new te,ae=function(){function e(){Object(A["a"])(this,e)}return Object(S["a"])(e,[{key:"getAll",value:function(){return N.get("organization_agency_types")}},{key:"get",value:function(e){return N.get("/organization_agency_types/".concat(e))}},{key:"create",value:function(e){return N.post("/organization_agency_types",e)}},{key:"update",value:function(e,t,n){return N.put("/organization_agency_types/".concat(e,"/").concat(t),n)}},{key:"deleteOrganizationAgencyTypes",value:function(e){return N.delete("/organization_agency_types/".concat(e))}},{key:"delete",value:function(e,t){return N.delete("/organization_counties/".concat(e,"/").concat(t))}},{key:"deleteAll",value:function(){return N.delete("/organization_agency_types")}}]),e}(),oe=new ae,ie={name:"organizations",components:{JsonExcel:F["a"]},data:function(){return{all_counties:[],organization_counties:[],unmapped_counties:[],organization_state:"",states:["AK","AL","AR","AS","AZ","CA","CO","CT","DC","DE","FL","GA","GU","HI","IA","ID","IL","IN","KS","KY","LA","MA","MD","ME","MI","MN","MO","MP","MS","MT","NC","ND","NE","NH","NJ","NM","NV","NY","OH","OK","OR","PA","PR","RI","SC","SD","TN","TX","UM","UT","VA","VI","VT","WA","WI","WV","WY"],mou_options:["Yes","No","Maybe"],excel_fields:{},excel_data:[],all_lines_of_business:[],organization_lines_of_business:[],unmapped_lines_of_business:[],all_arc_relationships:[],organization_arc_relationships:[],unmapped_arc_relationships:[],all_agency_types:[],organization_agency_types:[],unmapped_agency_types:[],json_meta:[[{key:"charset",value:"utf-8"}]],filters:{partners:!1,relationships:!0,my_assignments:!1},add_organization_dlg:!1,search:"",organizations:[],orgCache:[],organization_types:["Relationship","Partner"],relationship_statuses:["Hot","Warm","Cold"],add_organization:{name:"",street_number:"",street_name:"",city:"",state:"",zip:"",county:"",website:"",mou:"",contact_protocol:"",last_contact:"",service:"",notes:"",action:"",phone:"",line_of_business:"",agency_type:"",arc_relationship:""},type:"",critical_relationship_information:"",services:"",status:""}},computed:{headers:function(){var e=this,t=[{text:"Name",value:"name"},{text:"Address",value:"address"},{text:"City",value:"city"},{text:"Zip",value:"zip"},{text:"County",value:"county_display"},{text:"Manager",value:"manager"},{text:"",value:""}];return this.filters.partners&&t.push({text:"Services",value:"partner.services"}),t.forEach((function(n){t.forEach((function(t){e.excel_fields[t.text]=t.text.toLowerCase()}))})),t}},methods:{updateExcelFields:function(){var e=this;this.headers.forEach((function(t){e.excel_fields[t.text]=t.text.toLocaleLowerCase()}))},nav:function(e){this.$router.push({path:"organization/"+e.id})},addOrganization:function(){var e=this,t={name:this.add_organization.name,street_number:this.add_organization.street_number,street_name:this.add_organization.street_name,city:this.add_organization.city,state:this.add_organization.state,zip:this.add_organization.zip,website:this.add_organization.website,mou:this.add_organization.mou,contact_protocol:this.add_organization.contact_protocol,last_contact:this.add_organization.last_contact,service:this.add_organization.service,notes:this.add_organization.notes,action:this.add_organization.action};q.create(t).then((function(t){var n=t.data.id;K.create({organizationId:n,number:e.add_organization.phone,isPrimary:!0}).catch((function(e){console.log(e)})),e.add_organization.county.forEach((function(t){e.unmapped_counties.filter((function(e){e.name==t&&X.create({organizationId:n,countyId:e.id}).then().catch((function(e){console.log(e)}))}))})),e.add_organization.line_of_business.forEach((function(t){e.unmapped_lines_of_business.filter((function(e){e.name==t&&ee.create({organizationId:n,lineOfBusinessId:e.id}).then().catch((function(e){console.log(e)}))}))})),e.add_organization.arc_relationship.forEach((function(t){e.unmapped_arc_relationships.filter((function(e){e.name==t&&ne.create({organizationId:n,arcRelationshipId:e.id}).then().catch((function(e){console.log(e)}))}))})),e.add_organization.agency_type.forEach((function(t){e.unmapped_agency_types.filter((function(e){e.name==t&&oe.create({organizationId:n,agencyTypeId:e.id})}))}))})).catch((function(e){console.log(e)})),this.add_organization_dlg=!1},retrieveOrganizations:function(){var e=this;q.getAll().then((function(t){e.orgCache=t.data,console.log(e.orgCache),e.orgCache.forEach((function(t){if(null!==t.relationship_managers&&0!==t.relationship_managers.length){t.address=t.street_number+" "+t.street_name+"\n"+t.city+", "+t.state+" "+t.zip;var n=t.relationship_managers[0].person,a=n.first_name+" "+n.last_name;t.manager=a;var o="";n.phones.forEach((function(e){o+=e.number+" \n"}));var i="";n.emails.forEach((function(e){i+=e.address+" \n"})),t.manager=a+"\n"+o+"\n"+i,t.managerId=n.id}else t.manager="Not yet assigned",t.managerId=0;null!==t.partner?t.services=t.partner.services:null!==t.relationship&&(t.status=t.relationship.status),e.excel_data=e.organizations})),e.organizations=t.data,e.organizations.forEach((function(t){if(t.address=t.street_number+" "+t.street_name+"\n"+t.city+", "+t.state+" "+t.zip,t.county_display="",t.counties.forEach((function(e){t.county_display+=e.name+", "})),t.county_display=t.county_display.substr(0,t.county_display.length-2),null!==t.relationship_managers&&0!==t.relationship_managers.length){var n=t.relationship_managers[0].person,a=n.first_name+" "+n.last_name,o="";n.phones.forEach((function(e){o+=e.number+" \n"}));var i="";n.emails.forEach((function(e){i+=e.address+" \n"})),t.manager=a+"\n"+o+"\n"+i,t.managerId=n.id}else t.manager="Not yet assigned",t.managerId=0;null!==t.partner?t.services=t.partner.services:null!==t.relationship&&(t.status=t.relationship.status),e.excel_data=e.organizations}))})).catch((function(e){console.log(e.message)}))},populateCounties:function(){var e=this;L.getAll().then((function(t){e.all_counties=t.data.map((function(e){return e.name})),e.unmapped_counties=t.data})).catch((function(e){console.log(e)}))},populateLinesOfBusiness:function(){var e=this;B.getAll().then((function(t){e.all_lines_of_business=t.data.map((function(e){return e.name})),e.unmapped_lines_of_business=t.data})).catch((function(e){console.log(e)}))},populateArcRelationships:function(){var e=this;W.getAll().then((function(t){e.all_arc_relationships=t.data.map((function(e){return e.name})),e.unmapped_arc_relationships=t.data})).catch((function(e){console.log(e)}))},populateAgencyTypes:function(){var e=this;J.getAll().then((function(t){e.all_agency_types=t.data.map((function(e){return e.name})),e.unmapped_agency_types=t.data})).catch((function(e){console.log(e)}))},filterOrganizations:function(){var e=this;this.organizations=this.orgCache.filter((function(t){var n=!e.filters["my_assignments"]||"5693164c-5da4-4d07-ad24-d9f39befc823"==t.managerId;return(e.filters["partners"]&&null!==t.partner&&n)|(e.filters["relationships"]&&null!==t.relationship&&n)})),this.updateExcelFields()}},mounted:function(){this.retrieveOrganizations(),this.populateCounties(),this.populateArcRelationships(),this.populateLinesOfBusiness(),this.populateAgencyTypes()}},re=ie,se=n("b0af"),le=n("99d9"),ce=n("8fea"),de=n("169a"),ue=n("4bd4"),pe=n("ce87"),_e=n("132d"),ve=n("b974"),me=n("8654"),fe=n("a844"),he=Object(l["a"])(re,O,I,!1,null,null,null),ge=he.exports;d()(he,{VBtn:_["a"],VCard:se["a"],VCardActions:le["a"],VCardText:le["c"],VCardTitle:le["d"],VCol:w["a"],VContainer:C["a"],VDataTable:ce["a"],VDialog:de["a"],VForm:ue["a"],VHover:pe["a"],VIcon:_e["a"],VRow:V["a"],VSelect:ve["a"],VSpacer:f["a"],VTextField:me["a"],VTextarea:fe["a"]});var be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("a",{staticClass:"btn display-4 font-weight-bold blue-grey--text text-capitalize",on:{click:function(t){return e.openDialog("Edit")}}},[e._v("\n      "+e._s(e.organization.name)+"\n    ")]),n("br"),n("a",{staticClass:"red--text text--darken-3",attrs:{href:e.organization.website}},[e._v("\n      "+e._s(e.organization.website)+"\n    ")]),""!=e.organization.phones?n("span",[e._v(" | "+e._s(e.organization.phones[0].number))]):e._e(),n("address",{staticClass:"text-capitalize"},[e._v("\n      "+e._s(e.organization.street_number)+" "+e._s(e.organization.street_name)+"\n      "+e._s(e.organization.city)+", "+e._s(e.organization.state)+" "+e._s(e.organization.zip)+"\n      "),n("br"),e._l(e.organization.counties,(function(t){return n("span",{key:t.id},[e._v("\n                  "+e._s(t.name)+"\n                ")])}))],2),n("v-row",[n("v-col",{staticClass:"col-9"},[n("v-row",[n("v-col",[n("v-card",{staticClass:"d-inline-flex",staticStyle:{"border-radius":"5px"},attrs:{elevation:"3","max-width":"100%",color:"light-grey"}},[n("v-container",{staticStyle:{"max-width":"200px"}},[n("v-card",{staticStyle:{"margin-top":"-20px","border-radius":"3% 10%","margin-left":"-15px",padding:"10px"},attrs:{color:"blue darken-3"}},[n("v-toolbar-title",{staticClass:"white--text"},[e._v("Important Notes")])],1)],1),n("v-card-text",[n("a",{staticClass:"btn font-weight-bold text-capitalize grey--text text--darken-2",on:{click:function(t){e.contact_note_dlg=!0}}},[e._v("\n               Last Contact Made\n             ")]),n("br"),e._v("\n             "+e._s(e.organization.last_contact)),n("br"),n("a",{staticClass:"btn font-weight-bold text-capitalize grey--text text--darken-2",on:{click:function(t){e.op_action_dlg=!0}}},[e._v("\n               Opportunities/Actions Needed to Improve Profile\n             ")]),n("br"),e._v("\n              "+e._s(e.organization.action)),n("br"),n("a",{staticClass:"btn font-weight-bold text-capitalize grey--text text--darken-2",on:{click:function(t){e.add_note_dlg=!0}}},[e._v("\n               Note\n             ")]),n("br"),e._v("\n              "+e._s(e.organization.notes)+"\n           ")])],1)],1)],1),n("v-row",[n("v-col",[n("v-card",{staticClass:"d-inline-flex",staticStyle:{"border-radius":"5px"},attrs:{elevation:"3"}},[n("v-container",{staticStyle:{"max-width":"150px"}},[n("v-card",{staticStyle:{"margin-top":"-20px","border-radius":"3% 10%","margin-left":"-15px",padding:"10px"},attrs:{color:"green darken-3"}},[n("v-toolbar-title",{staticClass:"white--text"},[e._v("Information")])],1)],1),n("v-card-text",[n("strong",[e._v("National DCS MOU Partner:")]),e._v(" "+e._s(e.organization.mou)),n("br"),n("strong",[e._v("Organization Service:")]),e._v(" "+e._s(e.organization.service)),n("br"),n("strong",[e._v("Lines of Business")]),n("br"),e._l(e.organization.line_of_businesses,(function(t){return n("span",{key:t.id},[e._v("\n                      "+e._s(t.name)+"\n                  ")])})),n("br"),e._v(" ARC Relationship\n                  "),e._l(e.organization.arc_relationships,(function(t){return n("span",{key:t.id},[e._v("\n                      "+e._s(t.name)+"\n                  ")])})),n("br"),n("strong",[e._v("Agency Types")]),e._l(e.organization.agency_types,(function(t){return n("span",{key:t.id},[e._v("\n                      "+e._s(t.name)+"\n                  ")])})),n("br"),n("strong",[e._v("Service")]),e._v("\n                  "+e._s(e.organization.service)+"\n\n                ")],2)],1)],1)],1),n("v-row",[n("v-card",{staticClass:"mb-3",attrs:{elevation:"3"}},[n("v-data-table",{attrs:{headers:e.headers,search:e.search,items:e.files,"item-key":"id","multi-sort":""},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-text-field",{staticClass:"mx-4",attrs:{label:"Search Files"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]},proxy:!0},{key:"item.name",fn:function(t){return[n("p",[e._v(e._s(t.item.name))])]}},{key:"item.date",fn:function(t){return[n("p",[e._v(e._s(t.item.date))])]}},{key:"item.author",fn:function(t){return[n("p",[e._v(e._s(t.item.author))])]}},{key:"item.download",fn:function(t){return[n("v-btn",{attrs:{depressed:"",small:""},on:{click:function(n){return e.downloadFile(t)}}},[e._v("\n                  Download\n                  "),n("v-icon",{attrs:{color:"orange darken-4",right:""}},[e._v("\n                    mdi-arrow-down\n                  ")])],1)]}},{key:"item.remove",fn:function(t){return[n("v-btn",{attrs:{depressed:"",small:""},on:{click:function(n){return e.deleteFile(t)}}},[n("v-icon",{attrs:{color:"orange darken-4",right:""}},[e._v("\n                    mdi-trash-can\n                  ")])],1)]}},{key:"footer",fn:function(){return[n("v-row",[n("v-col",{attrs:{cols:"7"}},[n("v-file-input",{attrs:{label:"Upload new file","show-size":"",counter:"",dense:""},on:{change:e.filesChange}})],1),n("v-col",[n("v-btn",{attrs:{depressed:"",small:"",disabled:e.upload_disabled},on:{click:e.uploadFile}},[e._v("\n                      Upload\n                      "),n("v-icon",{attrs:{color:"orange darken-4",right:""}},[e._v("\n                        mdi-arrow-up\n                      ")])],1)],1)],1)]},proxy:!0}])})],1)],1)],1),n("v-col",[n("v-card",{staticClass:"mb-3",attrs:{elevation:"3"}},[n("v-toolbar",{attrs:{color:"purple darken-2"}},[n("v-toolbar-title",{staticClass:"white--text"},[e._v("Contact Info")])],1),n("v-card-text",[n("div",[n("strong",[e._v("Organization Contact Protocol:"),n("br")]),e._v(" "+e._s(e.organization.contact_protocol)),n("br"),n("a",{staticClass:"btn font-weight-bold blue-grey--text",on:{click:function(t){return e.openDialog("Add POC")}}},[e._v("\n                Add New Point of Contact\n              ")])]),e._l(e.organization_points_of_contact,(function(t){return n("div",{key:t.id},[n("a",{staticClass:"btn font-weight-bold blue-grey--text",on:{click:function(n){return e.openDialog("Edit POC",t.id)}}},[n("span",{ref:"first_name_"+t.personId,refInFor:!0},[e._v(e._s(t.first_name)+" ")]),n("span",{ref:"last_name_"+t.personId,refInFor:!0},[e._v(e._s(t.last_name)+" ")])]),e._l(t.phones,(function(t){return n("span",{staticClass:"font-weight-thin"},[n("span",{ref:"phone_"+t.id,refInFor:!0},[1==t.isPrimary?n("span",[n("br"),e._v(e._s(t.number)+"(P)\n                    ")]):e._e()])])})),e._l(t.phones,(function(t){return n("span",{staticClass:"font-weight-thin"},[n("span",{ref:"phone_"+t.id,refInFor:!0},[0==t.isPrimary?n("span",[e._v("\n                     | "+e._s(t.number)+"\n                    ")]):e._e()])])})),e._l(t.emails,(function(t){return n("span",{staticClass:"font-weight-thin"},[n("span",{ref:"email_"+t.id,refInFor:!0},[1==t.isPrimary?n("span",[n("br"),e._v(e._s(t.address)+"(P)\n                    ")]):e._e()])])})),e._l(t.emails,(function(t){return n("span",{staticClass:"font-weight-thin"},[n("span",{ref:"email_"+t.id,refInFor:!0},[0==t.isPrimary?n("span",[e._v("\n                       | "+e._s(t.address)+"\n                    ")]):e._e()])])}))],2)}))],2)],1),n("v-card",{staticClass:"mb-3",attrs:{elevation:"3"}},[n("v-toolbar",{attrs:{color:"purple darken-2"}},[n("v-toolbar-title",{staticClass:"white--text"},[e._v("Relationship Manager")])],1),n("v-card-text",[n("div",[n("a",{staticClass:"btn font-weight-bold blue-grey--text",on:{click:function(t){return e.openDialog("Add RM")}}},[e._v("\n                Add an Organization Manager\n              ")])]),e._l(e.organization_relationship_managers,(function(t){return n("div",{key:t.id},[n("a",{staticClass:"btn font-weight-bold blue-grey--text",on:{click:function(n){return e.openDialog("RM",t.personId)}}},[n("div",{staticClass:"font-weight-black mt-3"},[n("strong",[n("span",{ref:"relationship_manager_"+t.personId,refInFor:!0},[e._v("\n                      "+e._s(t.person.first_name)+" "+e._s(t.person.last_name)+" (Relationship Manager)\n                    ")])])])]),e._l(t.person.phones,(function(t){return n("div",{key:t.number,staticClass:"font-weight-thin"},[e._v(e._s(t.number))])})),e._l(t.person.emails,(function(t){return n("div",{key:t.address,staticClass:"font-weight-thin"},[e._v(" "+e._s(t.address))])}))],2)}))],2)],1)],1)],1),n("POCDialog",{attrs:{poc_id:e.update_poc_id,poc_title:e.poc_dlg_title,poc_dlg_action:e.poc_dlg_action},model:{value:e.showPOCDialog,callback:function(t){e.showPOCDialog=t},expression:"showPOCDialog"}}),n("RelationshipManagerDialog",{attrs:{all_relationship_managers:e.all_relationship_managers,current_relationship_manager_id:e.current_relationship_manager_id,rm_title:e.rm_dlg_title,rm_dlg_action:e.rm_dlg_action,relationship_manager:e.current_relationship_manager},model:{value:e.showRMDialog,callback:function(t){e.showRMDialog=t},expression:"showRMDialog"}}),n("v-dialog",{attrs:{"max-width":"300px"},model:{value:e.add_note_dlg,callback:function(t){e.add_note_dlg=t},expression:"add_note_dlg"}},[n("v-card",[n("v-form",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Organization Note")])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-text-field",{attrs:{label:"Notes"},model:{value:e.organization.notes,callback:function(t){e.$set(e.organization,"notes",t)},expression:"organization.notes"}})],1)],1),n("v-card-actions",[n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.add_note_dlg=!1}}},[e._v("\n                Close\n              ")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.updateOrganization}},[e._v("\n                Save\n              ")])],1)],1)],1)],1)],1),n("v-dialog",{attrs:{"max-width":"300px"},model:{value:e.contact_note_dlg,callback:function(t){e.contact_note_dlg=t},expression:"contact_note_dlg"}},[n("v-card",[n("v-form",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Last Contact Made")])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-text-field",{attrs:{label:"Last Contact"},model:{value:e.organization.last_contact,callback:function(t){e.$set(e.organization,"last_contact",t)},expression:"organization.last_contact"}})],1)],1),n("v-card-actions",[n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.contact_note_dlg=!1}}},[e._v("\n                Close\n              ")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.updateOrganization}},[e._v("\n                Save\n              ")])],1)],1)],1)],1)],1),n("v-dialog",{attrs:{"max-width":"300px"},model:{value:e.op_action_dlg,callback:function(t){e.op_action_dlg=t},expression:"op_action_dlg"}},[n("v-card",[n("v-form",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Opportunities/Actions for Improvement")])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-text-field",{attrs:{label:"Last Contact"},model:{value:e.organization.action,callback:function(t){e.$set(e.organization,"action",t)},expression:"organization.action"}})],1)],1),n("v-card-actions",[n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.op_action_dlg=!1}}},[e._v("\n                Close\n              ")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.updateOrganization}},[e._v("\n                Save\n              ")])],1)],1)],1)],1)],1),n("v-dialog",{attrs:{"max-width":"1200px"},model:{value:e.organization_edit_dlg,callback:function(t){e.organization_edit_dlg=t},expression:"organization_edit_dlg"}},[n("v-card",[n("v-form",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Relationship Information")])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[n("v-text-field",{attrs:{label:"Agency Name*",required:""},model:{value:e.organization.name,callback:function(t){e.$set(e.organization,"name",t)},expression:"organization.name"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Street Number",required:""},model:{value:e.organization.street_number,callback:function(t){e.$set(e.organization,"street_number",t)},expression:"organization.street_number"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Street Name",required:""},model:{value:e.organization.street_name,callback:function(t){e.$set(e.organization,"street_name",t)},expression:"organization.street_name"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"3",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"City",required:""},model:{value:e.organization.city,callback:function(t){e.$set(e.organization,"city",t)},expression:"organization.city"}})],1),n("v-col",{attrs:{cols:"2"}},[n("v-select",{attrs:{required:"",items:e.states,label:"State"},model:{value:e.organization.state,callback:function(t){e.$set(e.organization,"state",t)},expression:"organization.state"}})],1),n("v-col",{attrs:{cols:"3"}},[n("v-text-field",{attrs:{label:"Zip",required:""},model:{value:e.organization.zip,callback:function(t){e.$set(e.organization,"zip",t)},expression:"organization.zip"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Website"},model:{value:e.organization.website,callback:function(t){e.$set(e.organization,"website",t)},expression:"organization.website"}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Number"},model:{value:e.organization.phones[0].number,callback:function(t){e.$set(e.organization.phones[0],"number",t)},expression:"organization.phones[0].number"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-select",{attrs:{multiple:"",required:"",items:e.all_counties,label:"Counties"},model:{value:e.organization_counties,callback:function(t){e.organization_counties=t},expression:"organization_counties"}})],1)],1),n("v-row",[n("v-col",[n("v-select",{attrs:{items:e.mou_options,required:"",label:"National DCS MOU Partner"},model:{value:e.organization.mou,callback:function(t){e.$set(e.organization,"mou",t)},expression:"organization.mou"}})],1)],1),n("v-row",[n("v-col",[n("v-select",{attrs:{multiple:"",required:"",items:e.all_lines_of_business,label:"Line of Business"},model:{value:e.organization_lines_of_business,callback:function(t){e.organization_lines_of_business=t},expression:"organization_lines_of_business"}})],1),n("v-col",[n("v-select",{attrs:{multiple:"",required:"",items:e.all_arc_relationships,label:"Arc Relationships"},model:{value:e.organization_arc_relationships,callback:function(t){e.organization_arc_relationships=t},expression:"organization_arc_relationships"}})],1),n("v-col",[n("v-select",{attrs:{multiple:"",items:e.all_agency_types,label:"Agency Types"},model:{value:e.organization_agency_types,callback:function(t){e.organization_agency_types=t},expression:"organization_agency_types"}})],1)],1),n("v-row",[n("v-textarea",{attrs:{label:"Organization Contact Protocol"},model:{value:e.organization.contact_protocol,callback:function(t){e.$set(e.organization,"contact_protocol",t)},expression:"organization.contact_protocol"}})],1),n("v-row",[n("v-textarea",{attrs:{label:"Services"},model:{value:e.organization.service,callback:function(t){e.$set(e.organization,"service",t)},expression:"organization.service"}})],1)],1),n("small",[e._v("*indicates required field")])],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.organization_edit_dlg=!1}}},[e._v("\n              Close\n            ")]),n("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){return e.openDialog("Delete")}}},[e._v("\n              Delete\n            ")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.updateOrganization}},[e._v("\n              Save\n            ")])],1)],1)],1)],1),n("v-dialog",{attrs:{"max-width":"300"},model:{value:e.delete_organization_dialog,callback:function(t){e.delete_organization_dialog=t},expression:"delete_organization_dialog"}},[n("v-card",[n("v-card-text",[e._v("\n          Are you sure you want to delete this organization?\n        ")]),n("v-divider"),n("v-card-actions",[n("v-btn",{attrs:{text:"",color:"red text-darken-1"},on:{click:e.deleteOrganization}},[e._v("\n            Yes\n          ")]),n("v-btn",{attrs:{text:"",color:"blue text-darken-1"},on:{click:function(t){e.delete_organization_dialog=!1}}},[e._v("\n            No\n          ")])],1)],1)],1)],1)},ye=[],xe=(n("28a5"),n("768b")),ke=(n("6762"),n("2fdb"),function(){function e(){Object(A["a"])(this,e)}return Object(S["a"])(e,[{key:"getAll",value:function(){return N.get("persons")}},{key:"get",value:function(e){return N.get("/persons/".concat(e))}},{key:"create",value:function(e){return N.post("/persons",e)}},{key:"update",value:function(e,t){return N.put("/persons/".concat(e),t)}},{key:"delete",value:function(e){return N.delete("/persons/".concat(e))}},{key:"deleteAll",value:function(){return N.delete("/persons")}}]),e}()),ze=new ke,we=function(){function e(){Object(A["a"])(this,e)}return Object(S["a"])(e,[{key:"getAll",value:function(){return N.get("relationship_managers")}},{key:"get",value:function(e){return N.get("/relationship_managers/".concat(e))}},{key:"create",value:function(e){return N.post("/relationship_managers",e)}},{key:"update",value:function(e,t,n){return N.put("/relationship_managers/".concat(e,"/").concat(t),n)}},{key:"delete",value:function(e,t){return N.delete("/relationship_managers/".concat(e,"/").concat(t))}},{key:"deleteAll",value:function(){return N.delete("/relationship_managers")}}]),e}(),Ce=new we,Ve=function(){function e(){Object(A["a"])(this,e)}return Object(S["a"])(e,[{key:"getAll",value:function(){return N.get("notes")}},{key:"get",value:function(e){return N.get("/notes/".concat(e))}},{key:"create",value:function(e){return N.post("/notes",e)}},{key:"update",value:function(e,t){return N.put("/notes/".concat(e),t)}},{key:"delete",value:function(e){return N.delete("/notes/".concat(e))}},{key:"deleteAll",value:function(){return N.delete("/notes")}}]),e}(),Pe=new Ve,Re=function(){function e(){Object(A["a"])(this,e)}return Object(S["a"])(e,[{key:"getAll",value:function(e){return N.get("files/organization/".concat(e))}},{key:"get",value:function(e){return N.get("/files/".concat(e))}},{key:"upload",value:function(e){return N.post("/files",e,{headers:{"Content-Type":"multipart/form-data"}})}},{key:"download",value:function(e,t){return N.get("/files/".concat(e),t)}},{key:"update",value:function(e,t){return N.put("/files/".concat(e),t)}},{key:"delete",value:function(e){return N.delete("/files/".concat(e))}},{key:"deleteAll",value:function(){return N.delete("/files")}}]),e}(),Oe=new Re,Ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-form",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Organization Note")])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[n("v-textarea",{model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){t.stopPropagation(),e.show=!1}}},[e._v("\n          Close\n        ")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.addNote}},[e._v("\n          Save\n        ")])],1)],1)],1)],1)],1)},Ae=[],Se={data:function(){return{text:""}},props:{value:Boolean,item:Object},methods:{addNote:function(){var e={text:this.text};this.$emit("input",!1),this.$parent.addNote(e)}},computed:{show:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},Ee=Se,$e=Object(l["a"])(Ee,Ie,Ae,!1,null,null,null),Ne=$e.exports;d()($e,{VBtn:_["a"],VCard:se["a"],VCardActions:le["a"],VCardText:le["c"],VCardTitle:le["d"],VCol:w["a"],VContainer:C["a"],VDialog:de["a"],VForm:ue["a"],VRow:V["a"],VSpacer:f["a"],VTextarea:fe["a"]});var De=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-form",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v(e._s(e.rm_title))])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[n("p",{directives:[{name:"show",rawName:"v-show",value:"Edit"==e.rm_dlg_action,expression:"rm_dlg_action=='Edit'"}],staticClass:"text-h4"},[e._v("\n                  "+e._s(e.relationship_manager.first_name)+" "+e._s(e.relationship_manager.last_name)+"\n                ")]),n("v-autocomplete",{directives:[{name:"show",rawName:"v-show",value:"Create"==e.rm_dlg_action,expression:"rm_dlg_action=='Create'"}],attrs:{label:"Relationship Manager",items:e.all_relationship_managers,"item-text":"name","item-value":"value","return-object":""},on:{change:e.updateSelectedManager}})],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){t.stopPropagation(),e.show=!1}}},[e._v("\n            Close\n          ")]),n("v-btn",{directives:[{name:"show",rawName:"v-show",value:"Edit"==e.rm_dlg_action,expression:"rm_dlg_action=='Edit'"}],attrs:{color:"red darken-1",text:""},on:{click:function(t){return e.openDialog("Delete")}}},[e._v("\n            Remove Manager\n          ")]),n("v-btn",{directives:[{name:"show",rawName:"v-show",value:"Create"==e.rm_dlg_action,expression:"rm_dlg_action=='Create'"}],attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.openDialog(e.rm_dlg_action)}}},[e._v("\n            Save\n          ")])],1)],1)],1)],1),n("v-dialog",{attrs:{"max-width":"300"},model:{value:e.delete_relationship_manager_dialog,callback:function(t){e.delete_relationship_manager_dialog=t},expression:"delete_relationship_manager_dialog"}},[n("v-card",[n("v-card-text",[e._v("\n        Are you sure you want to remove this relationship manager?\n      ")]),n("v-divider"),n("v-card-actions",[n("v-btn",{attrs:{text:"",color:"red text-darken-1"},on:{click:e.deleteRelationshipManager}},[e._v("\n          Yes\n        ")]),n("v-btn",{attrs:{text:"",color:"blue text-darken-1"},on:{click:function(t){e.delete_relationship_manager_dialog=!1}}},[e._v("\n          No\n        ")])],1)],1)],1)],1)},qe=[],Me={props:{value:Boolean,rm_title:String,all_relationship_managers:Array,rm_dlg_action:String,current_relationship_manager_id:String,relationship_manager:Object},data:function(){return{delete_relationship_manager_dialog:!1,save_rm_dialog:!1,updated_relationship_manager:"",organization_relationship_managers:[]}},methods:{updateSelectedManager:function(e){this.updated_relationship_manager={value:e.value}},openDialog:function(e){switch(e){case"Create":this.addRelationshipManager();break;case"Delete":this.delete_relationship_manager_dialog=!0;break;case"Edit":this.updateRelationshipManager();break}},addRelationshipManager:function(){var e={personId:this.updated_relationship_manager.value};this.$parent.addRelationshipManager(e)},updateRelationshipManager:function(){this.update_mgr_dlg=!1;var e={personId:this.updated_relationship_manager.value};this.$parent.updateRelationshipManager(e,this.current_relationship_manager_id)},deleteRelationshipManager:function(){this.update_mgr_dlg=!1,this.delete_relationship_manager_dialog=!1,this.$emit("input",!1),this.$parent.deleteRelationshipManager(this.current_relationship_manager_id)}},computed:{show:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},Te=Me,Fe=n("c6a6"),je=n("ce7e"),Le=Object(l["a"])(Te,De,qe,!1,null,null,null),Ue=Le.exports;d()(Le,{VAutocomplete:Fe["a"],VBtn:_["a"],VCard:se["a"],VCardActions:le["a"],VCardText:le["c"],VCardTitle:le["d"],VCol:w["a"],VContainer:C["a"],VDialog:de["a"],VDivider:je["a"],VForm:ue["a"],VRow:V["a"],VSpacer:f["a"]});var Be=function(){function e(){Object(A["a"])(this,e)}return Object(S["a"])(e,[{key:"getAll",value:function(){return N.get("users")}},{key:"get",value:function(e){return N.get("/users/".concat(e))}},{key:"getByEmail",value:function(e){return N.get("/users/email/".concat(e))}},{key:"create",value:function(e){return N.post("/users",e)}},{key:"update",value:function(e,t){return N.put("/users/".concat(e),t)}},{key:"delete",value:function(e){return N.delete("/users/".concat(e))}}]),e}(),He=new Be,We=function(){function e(){Object(A["a"])(this,e)}return Object(S["a"])(e,[{key:"getAll",value:function(){return N.get("contacts")}},{key:"get",value:function(e){return N.get("/contacts/".concat(e))}},{key:"create",value:function(e){return N.post("/contacts",e)}},{key:"update",value:function(e,t){return N.put("/contacts/".concat(e),t)}},{key:"delete",value:function(e){return N.delete("/contacts/".concat(e))}},{key:"deleteAll",value:function(){return N.delete("/contacts")}}]),e}(),Ye=new We,Je=function(){function e(){Object(A["a"])(this,e)}return Object(S["a"])(e,[{key:"getAll",value:function(e){return N.get("pocs/".concat(e))}},{key:"create",value:function(e){return N.post("/pocs",e)}},{key:"update",value:function(e,t,n){return N.put("/pocs/".concat(e,"/").concat(t),n)}},{key:"delete",value:function(e,t){return N.delete("/pocs/".concat(e,"/").concat(t))}},{key:"deleteAll",value:function(e){return N.delete("/pocs/".concat(e))}}]),e}(),Ze=new Je,Ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("v-card",[n("v-form",{attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-card-title",[n("span",{staticClass:"headline"},[e._v(e._s(e.poc_title))])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[n("v-text-field",{attrs:{label:"First Name*",required:"",rules:e.nameRules},model:{value:e.first_name,callback:function(t){e.first_name=t},expression:"first_name"}})],1),n("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[n("v-text-field",{attrs:{label:"Last Name*",required:"",rules:e.nameRules},model:{value:e.last_name,callback:function(t){e.last_name=t},expression:"last_name"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Street Number",rules:e.streetNumberRules},model:{value:e.street_number,callback:function(t){e.street_number=t},expression:"street_number"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Street Name",rules:e.nameRules},model:{value:e.street_name,callback:function(t){e.street_name=t},expression:"street_name"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"3",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"City",rules:e.nameRules},model:{value:e.city,callback:function(t){e.city=t},expression:"city"}})],1),n("v-col",{attrs:{cols:"2"}},[n("v-text-field",{attrs:{label:"State",rules:e.nameRules},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}})],1),n("v-col",{attrs:{cols:"3"}},[n("v-text-field",{attrs:{label:"Zip",rules:e.zipRules},model:{value:e.zip,callback:function(t){e.zip=t},expression:"zip"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{required:"",label:"Primary Phone",rules:e.phoneRules},model:{value:e.primary_phone,callback:function(t){e.primary_phone=t},expression:"primary_phone"}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Secondary Phone",rules:e.phoneRules},model:{value:e.secondary_phone,callback:function(t){e.secondary_phone=t},expression:"secondary_phone"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{required:"",label:"Primary Email",rules:e.emailRules},model:{value:e.primary_email,callback:function(t){e.primary_email=t},expression:"primary_email"}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Secondary Email",rules:e.emailRules},model:{value:e.secondary_email,callback:function(t){e.secondary_email=t},expression:"secondary_email"}})],1)],1)],1),n("small",[e._v("*indicates required field")])],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){return e.openDialog("Delete")}}},[e._v("\n            Delete\n          ")]),n("v-btn",{directives:[{name:"show",rawName:"v-show",value:"Create"==e.poc_dlg_action,expression:"poc_dlg_action=='Create'"}],attrs:{color:"blue darken-1",text:"",disabled:!e.valid},on:{click:e.createPOC}},[e._v("\n            Save\n          ")]),n("v-btn",{directives:[{name:"show",rawName:"v-show",value:"Edit"==e.poc_dlg_action,expression:"poc_dlg_action=='Edit'"}],attrs:{color:"blue darken-1",text:"",disabled:!e.valid},on:{click:function(t){return e.openDialog("Update")}}},[e._v("\n            Edit\n          ")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){t.stopPropagation(),e.show=!1}}},[e._v("\n            Close\n          ")])],1)],1)],1)],1),n("v-dialog",{attrs:{"max-width":"300"},model:{value:e.delete_poc_dialog,callback:function(t){e.delete_poc_dialog=t},expression:"delete_poc_dialog"}},[n("v-card",[n("v-card-text",[e._v("\n        Are you sure you want to delete this point of contact?\n      ")]),n("v-divider"),n("v-card-actions",[n("v-btn",{attrs:{text:"",color:"red text-darken-1"},on:{click:e.deletePOC}},[e._v("\n          Yes\n        ")]),n("v-btn",{attrs:{text:"",color:"blue text-darken-1"},on:{click:function(t){e.delete_poc_dialog=!1}}},[e._v("\n          No\n        ")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"300"},model:{value:e.update_poc_dialog,callback:function(t){e.update_poc_dialog=t},expression:"update_poc_dialog"}},[n("v-card",[n("v-card-text",[e._v("\n        Save changes?\n      ")]),n("v-divider"),n("v-card-actions",[n("v-btn",{attrs:{text:"",color:"red text-darken-1"},on:{click:e.updatePOC}},[e._v("\n          Yes\n        ")]),n("v-btn",{attrs:{text:"",color:"blue text-darken-1"},on:{click:function(t){e.update_poc_dialog=!1}}},[e._v("\n          No\n        ")])],1)],1)],1)],1)},Ge=[],Xe={props:{value:Boolean,poc_id:String,poc_title:String,poc_dlg_action:String},data:function(){return{update_poc_dialog:!1,delete_poc_dialog:!1,save_poc_dialog:!1,first_name:"",last_name:"",street_number:"",street_name:"",city:"",state:"",zip:"",primary_phone:"",secondary_phone:"",primary_email:"",secondary_email:"",nameRules:[function(e){return!!e||"Required"},function(e){return/\D\S$/.test(e)||"No white or empty spaces"}],emailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],phoneRules:[function(e){return!!e||"Required"},function(e){return/\S\d$/.test(e)||"Phone number must be valid"}],streetNumberRules:[function(e){return!!e||"Required"},function(e){return/\S\d$/.test(e)||"Street number must be valid"}],zipRules:[function(e){return!!e||"Required"},function(e){return/\S\d$/.test(e)||"Zip number must be valid"}],show1:!1,rules:{required:function(e){return!!e||"Required."},min:function(e){return e&&e.length>=1||"Min 5 characters"}}}},methods:{openDialog:function(e){switch(e){case"Save":this.save_poc_dialog=!0;break;case"Delete":this.delete_poc_dialog=!0;break;case"Update":this.update_poc_dialog=!0;break}},deletePOC:function(){this.delete_poc_dialog=!1,this.$emit("input",!1),this.$parent.deletePOC(this.poc_id)},createPOC:function(){var e={first_name:this.first_name,last_name:this.last_name,street_number:this.street_number,street_name:this.street_name,city:this.city,state:this.state,zip:this.zip,primary_phone:this.primary_phone,secondary_phone:this.secondary_phone,primary_email:this.primary_email,secondary_email:this.secondary_email};this.$emit("input",!1),this.$parent.createPOC(e)},updatePOC:function(){this.update_poc_dialog=!1;var e={first_name:this.first_name,last_name:this.last_name,street_number:this.street_number,street_name:this.street_name,city:this.city,state:this.state,zip:this.zip,primary_phone:this.primary_phone,secondary_phone:this.secondary_phone,primary_email:this.primary_email,secondary_email:this.secondary_email};this.$emit("input",!1),this.$parent.updatePOC(this.poc_id,e)}},computed:{show:{get:function(){var e=this;return"Edit"==this.poc_dlg_action&&ze.get(this.poc_id).then((function(t){e.first_name=t.data.first_name,e.last_name=t.data.last_name,e.street_number=t.data.street_number,e.street_name=t.data.street_name,e.city=t.data.city,e.state=t.data.state,e.zip=t.data.zip,t.data.phones.forEach((function(t){t.isPrimary?e.primary_phone=t.number:e.secondary_phone=t.number})),t.data.emails.forEach((function(t){t.isPrimary?e.primary_email=t.address:e.secondary_email=t.address}))})).catch((function(e){console.log(e)})),this.value},set:function(e){this.$emit("input",e)}}}},Qe=Xe,et=Object(l["a"])(Qe,Ke,Ge,!1,null,null,null),tt=et.exports;d()(et,{VBtn:_["a"],VCard:se["a"],VCardActions:le["a"],VCardText:le["c"],VCardTitle:le["d"],VCol:w["a"],VContainer:C["a"],VDialog:de["a"],VDivider:je["a"],VForm:ue["a"],VRow:V["a"],VSpacer:f["a"],VTextField:me["a"]});var nt=function(){function e(){Object(A["a"])(this,e)}return Object(S["a"])(e,[{key:"getAll",value:function(){return N.get("emails")}},{key:"get",value:function(e){return N.get("/emails/".concat(e))}},{key:"create",value:function(e){return N.post("/emails",e)}},{key:"update",value:function(e,t){return N.put("/emails/".concat(e),t)}},{key:"delete",value:function(e){return N.delete("/emails/".concat(e))}},{key:"deleteAll",value:function(){return N.delete("/emails")}}]),e}(),at=new nt,ot=0,it=1,rt=2,st=3,lt={name:"organization",components:{POCDialog:tt,NoteDialog:Ne,RelationshipManagerDialog:Ue},data:function(){return{confirm_delete:!1,all_counties:[],organization_counties:[],unmapped_counties:[],organization_state:"",states:["AK","AL","AR","AS","AZ","CA","CO","CT","DC","DE","FL","GA","GU","HI","IA","ID","IL","IN","KS","KY","LA","MA","MD","ME","MI","MN","MO","MP","MS","MT","NC","ND","NE","NH","NJ","NM","NV","NY","OH","OK","OR","PA","PR","RI","SC","SD","TN","TX","UM","UT","VA","VI","VT","WA","WI","WV","WY"],mou_options:["Yes","No","Maybe"],contact_note_dlg:!1,op_action_dlg:!1,all_lines_of_business:[],organization_lines_of_business:[],unmapped_lines_of_business:[],all_arc_relationships:[],organization_arc_relationships:[],unmapped_arc_relationships:[],all_agency_types:[],organization_agency_types:[],unmapped_agency_types:[],organization:"",organization_edit_dlg:!1,delete_organization_dialog:"",delete_relationship_manager_dialog:!1,update_mgr_dlg:!1,add_mgr_dlg:!1,showRMDialog:!1,rm_dlg_action:"",rm_dlg_title:"",updated_relationship_manager:"",current_relationship_manager_id:"",current_relationship_manager:{},all_relationship_managers:[],organization_relationship_managers:[],delete_poc_dialog:!1,save_poc_dialog:!1,showPOCDialog:!1,poc:{},update_poc_id:"",edit_contact_id:"",poc_dlg_title:"",poc_dlg_action:"",updated_point_of_contact:"",all_points_of_contact:[],organization_points_of_contact:[],files:[],uploadedFiles:[],uploadError:null,currentStatus:null,uploadFieldName:"files",file_upload:"",upload_disabled:!0,search:"",latest_note:"",add_note_dlg:!1,valid_note:!0,add_note_form:{text:""}}},methods:{openDialog:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(e){case"Add RM":this.rm_dlg_action="Create",this.rm_dlg_title="Assign Relationship Manager",this.current_relationship_manager_id="",this.showRMDialog=!0;break;case"RM":ze.get(n).then((function(e){t.current_relationship_manager=e.data})).catch((function(e){console.log(e)})),this.rm_dlg_title="Change Relationship Manager",this.current_relationship_manager_id=n,this.rm_dlg_action="Edit",this.showRMDialog=!0;break;case"Edit POC":this.update_poc_id=n,this.showPOCDialog=!0,this.poc_dlg_title="Edit Point of Contact",this.poc_dlg_action="Edit";break;case"Add POC":this.showPOCDialog=!0,this.poc_dlg_title="Add Point of Contact",this.poc_dlg_action="Create";break;case"Edit":this.organization_edit_dlg=!0;break;case"Delete":this.organization_edit_dlg=!1,this.delete_organization_dialog=!0;break}},addNote:function(e){var t=this;e.organizationId=this.organization.id,e.personId="9de1a7e1-8801-4024-9475-050644867c5b",e.type="general",Pe.create(e).then((function(e){t.setOrganization(t.organization.id)})).catch((function(e){console.log(e)})),this.add_note_dlg=!1},downloadFile:function(e){var t={fileId:e.item.id};Oe.download(e.item.filepath,t).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=t,n.setAttribute("download","file.pdf"),document.body.appendChild(n),n.click()})).catch((function(e){console.log(e)}))},deleteFile:function(e){var t=this,n={filePath:e.item.filePath};Oe.delete(e.item.id,n).then((function(e){t.populateFiles(t.organization.id)})).catch((function(e){console.log(e)}))},reset:function(){this.currentStatus=ot,this.uploadedFiles=[],this.uploadError=null},uploadFile:function(){var e=this,t=new FormData;t.append("file",this.file_upload),t.append("organizationId",this.organization.id),t.append("personId","9de1a7e1-8801-4024-9475-050644867c5b"),this.formData=t,this.currentStatus=it,Oe.upload(this.formData).then((function(t){e.uploadedFiles=[].concat(t),e.currentStatus=rt})).catch((function(t){e.uploadError=t.response,e.currentStatus=st})),this.formData="",this.upload_disabled=!0,this.populateFiles(this.organization.id),this.reset()},filesChange:function(e){this.file_upload=e,this.upload_disabled=!1},populateFiles:function(e){var t=this;Oe.getAll(e).then((function(e){t.files=e.data.map((function(e){var t=Intl.DateTimeFormat("en-US").format(new Date(e.createdAt));return{filepath:e.filePath.substr(e.filePath.indexOf("/")+1,e.filePath.length),date:t,author:e.person.first_name+" "+e.person.last_name,name:e.fileName,id:e.id}}))})).catch((function(e){console.log(e)}))},deleteOrganization:function(){var e=this;q.delete(this.organization.id).then((function(t){e.confirm_delete=!1})).catch((function(e){console.log(e)})),this.$router.push({path:"/organizations"}).catch((function(e){console.log(e)})),this.$toasted.show("Organization has been successfully deleted",{theme:"bubble"}).goAway(1e3)},updateOrganization:function(){var e=this;this.organization_edit_dlg=!1;var t={name:this.organization.name,street_number:this.organization.street_number,street_name:this.organization.street_name,city:this.organization.city,state:this.organization.state,zip:this.organization.zip,county:this.organization.county,website:this.organization.website,mou:this.organization.mou,contact_protocol:this.organization.contact_protocol,last_contact:this.organization.last_contact,service:this.organization.service,notes:this.organization.notes,action:this.organization.action};q.update(this.organization.id,t).then().catch((function(e){console.log(e)})),K.update(this.organization.phones[0].id,{number:this.organization.phones[0].number}).then().catch((function(e){console.log(e)})),X.deleteOrganizationCounties(this.organization.id).then((function(t){e.unmapped_counties.forEach((function(t){if(e.organization_counties.includes(t.name)){var n={organizationId:e.organization.id,countyId:t.id};X.create(n).then((function(t){e.setOrganization()})).catch((function(e){console.log(e)}))}}))})).catch((function(e){console.log(e)})),ee.deleteOrganizationLinesOfBusiness(this.organization.id).then((function(t){e.unmapped_lines_of_business.forEach((function(t){if(e.organization_lines_of_business.includes(t.name)){var n={organizationId:e.organization.id,lineOfBusinessId:t.id};ee.create(n).then((function(t){e.setOrganization()})).catch((function(e){console.log(e)}))}}))})).catch((function(e){console.log(e)})),ne.deleteOrganizationArcRelationships(this.organization.id).then((function(t){e.unmapped_arc_relationships.forEach((function(t){if(e.organization_arc_relationships.includes(t.name)){var n={organizationId:e.organization.id,arcRelationshipId:t.id};ne.create(n).then((function(t){e.setOrganization()})).catch((function(e){console.log(e)}))}}))})).catch((function(e){console.log(e)})),oe.deleteOrganizationAgencyTypes(this.organization.id).then((function(t){e.unmapped_agency_types.forEach((function(t){if(e.organization_agency_types.includes(t.name)){var n={organizationId:e.organization.id,agencyTypeId:t.id};oe.create(n).then((function(t){e.setOrganization()})).catch((function(e){console.log(e)}))}}))})).catch((function(e){console.log(e)}))},setOrganization:function(){var e=this;q.get(this.$route.params.organizationId).then((function(t){t.data.counties.forEach((function(t){e.organization_counties.push(t.name)})),t.data.line_of_businesses.forEach((function(t){e.organization_lines_of_business.push(t.name)})),t.data.arc_relationships.forEach((function(t){e.organization_arc_relationships.push(t.name)})),t.data.agency_types.forEach((function(t){e.organization_agency_types.push(t.name)})),Ze.getAll(t.data.id).then(e.setPOC).catch((function(e){console.log(e)})),e.organization=t.data,0==e.organization.phones.length&&(e.organization.phones[0]=""),e.organization_state=t.data.state,e.organization_relationship_managers=t.data.relationship_managers,e.populateFiles(e.organization.id)})).catch((function(e){console.log(e)})),this.add_note_dlg=!1,this.contact_note_dlg=!1,this.op_action_dlg=!1},populateCounties:function(){var e=this;L.getAll().then((function(t){e.all_counties=t.data.map((function(e){return e.name})),e.unmapped_counties=t.data})).catch((function(e){console.log(e)}))},populateLinesOfBusiness:function(){var e=this;B.getAll().then((function(t){e.all_lines_of_business=t.data.map((function(e){return e.name})),e.unmapped_lines_of_business=t.data})).catch((function(e){console.log(e)}))},populateArcRelationships:function(){var e=this;W.getAll().then((function(t){e.all_arc_relationships=t.data.map((function(e){return e.name})),e.unmapped_arc_relationships=t.data})).catch((function(e){console.log(e)}))},populateAgencyTypes:function(){var e=this;J.getAll().then((function(t){e.all_agency_types=t.data.map((function(e){return e.name})),e.unmapped_agency_types=t.data})).catch((function(e){console.log(e)}))},setPOC:function(e){this.organization_points_of_contact=e.data},populateRelationshipManagersList:function(){var e=this;He.getAll().then((function(t){e.all_relationship_managers=t.data.map((function(e){return{name:e.first_name+" "+e.last_name,value:e.id}}))})).catch((function(e){console.log(e)}))},updateSelectedManager:function(e){this.updated_relationship_manager={value:e.value}},addRelationshipManager:function(e){var t=this;this.showRMDialog=!1,e.organizationId=this.organization.id,Ce.create(e).then((function(e){t.organization.relationship_managers=e.data,t.setOrganization()})).catch((function(e){console.log(e)}))},updateRelationshipManager:function(e,t){var n=this;this.showRMDialog=!1,e.organizationId=this.organization.id,Ce.update(this.organization.id,t,e).then((function(e){n.organization.relationship_managers=e.data,n.setOrganization()})).catch((function(e){console.log(e)}))},deleteRelationshipManager:function(e){var t=this;this.showRMDialog=!1,Ce.delete(this.organization.id,e).then((function(e){t.setOrganization()})).catch((function(e){console.log(e)}))},updateContactInfo:function(e,t,n){var a=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;t.isPrimary=e,0!=o?n.update(o,t).then((function(e){a.setOrganization()})).catch((function(e){console.log(e)})):n.create(t).then((function(e){a.setOrganization()})).catch((function(e){console.log(e)}))},deletePOC:function(e){var t=this;ze.get(e).then((function(e){var t=e.data;return t.phones.forEach((function(e){K.delete(e.id).catch((function(e){console.log(e)}))})),t.emails.forEach((function(e){at.delete(e.id).catch((function(e){console.log(e)}))})),t.id})).then((function(e){console.log("called"),ze.delete(e).catch((function(e){console.log(e)})),t.setOrganization()})).catch((function(e){console.log(e)}))},updatePOC:function(e,t){var n=this;ze.get(e).then((function(e){var a=e.data,o={};if(t.primary_phone){o={number:t.primary_phone};var i=a.phones.filter((function(e){return e.isPrimary}));i.length>0?n.updateContactInfo(!0,o,K,i[0].id):(o.personId=a.id,n.updateContactInfo(!0,o,K))}if(t.secondary_phone){o={number:t.secondary_phone};var r=a.phones.filter((function(e){return 0==e.isPrimary}));r.length>0?n.updateContactInfo(!1,o,K,r[0].id):(o.personId=a.id,n.updateContactInfo(!1,o,K))}var s={};if(t.primary_email){s={address:t.primary_email};var l=a.emails.filter((function(e){return e.isPrimary}));l.length>0?n.updateContactInfo(!0,s,at,l[0].id):(s.personId=a.id,n.updateContactInfo(!0,s,at))}if(t.secondary_email){s={address:t.secondary_email};var c=a.emails.filter((function(e){return 0==e.isPrimary}));c.length>0?n.updateContactInfo(!1,s,at,c[0].id):(s.personId=a.id,n.updateContactInfo(!1,s,at))}})).catch((function(e){console.log(e)})),ze.update(e,t).then().catch((function(e){console.log(e)}))},createPOC:function(e){var t=this;ze.create(e).then((function(n){var a=n.data.id,o={personId:a,organizationId:t.organization.id};if(e.primary_phone){var i={personId:a,number:e.primary_phone,isPrimary:!0};K.create(i).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}if(e.secondary_phone){var r={personId:a,number:e.secondary_phone,isPrimary:!1};K.create(r).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}if(e.primary_email){var s={personId:a,address:e.primary_email,isPrimary:!0};at.create(s).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}if(e.secondary_email){var l={personId:a,address:e.secondary_email,isPrimary:!1};at.create(l).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}Ze.create(o).then((function(e){console.log("POC Created:\n"+e),console.log(e),t.setOrganization()})).catch((function(e){console.log(e)}))}))},setEditContact:function(e){this.edit_contact_id=e},populatePointOfContactList:function(){var e=this;Ye.getAll().then((function(t){e.all_points_of_contact=t.data.map((function(e){return{name:e.first_name+" "+e.last_name,value:e.id}}))})).catch((function(e){console.log(e)}))},updateSelectedPointOfContact:function(e){this.updated_point_of_contact={value:e.value}},addPointOfContact:function(){var e=this;this.assign_poc_dlg=!1;var t=this.organization.id,n={organizationId:t,personId:this.updated_point_of_contact.value};Ze.create(n).then((function(t){e.setOrganization()})).catch((function(e){console.log(e)}))},updatePointOfContact:function(){var e=this;this.assign_poc_dlg=!1;var t={},n=this.organization_points_of_contact[0].id;ze.update(n,t).then((function(t){e.setOrganization(),console.log(t)})).catch((function(e){console.log(e)}))},formatDate:function(e){if(!e)return null;var t=e.split("-"),n=Object(xe["a"])(t,3),a=n[0],o=n[1],i=n[2];return"".concat(o,"/").concat(i,"/").concat(a)}},computed:{headers:function(){var e=[{text:"File Name",value:"name",width:"80px"},{text:"Date",value:"date",width:"80px"},{text:"Author",value:"author",width:"100px"},{text:"",value:"download",width:"100px"},{text:"",value:"remove",width:"100px"}];return e}},mounted:function(){this.reset(),this.setOrganization(),this.populateRelationshipManagersList(),this.populatePointOfContactList(),this.populateCounties(),this.populateLinesOfBusiness(),this.populateArcRelationships(),this.populateAgencyTypes()}},ct=lt,dt=(n("ee33"),n("23a7")),ut=n("71d9"),pt=n("2a7f"),_t=Object(l["a"])(ct,be,ye,!1,null,"75fa1ffa",null),vt=_t.exports;d()(_t,{VBtn:_["a"],VCard:se["a"],VCardActions:le["a"],VCardText:le["c"],VCardTitle:le["d"],VCol:w["a"],VContainer:C["a"],VDataTable:ce["a"],VDialog:de["a"],VDivider:je["a"],VFileInput:dt["a"],VForm:ue["a"],VIcon:_e["a"],VRow:V["a"],VSelect:ve["a"],VSpacer:f["a"],VTextField:me["a"],VTextarea:fe["a"],VToolbar:ut["a"],VToolbarTitle:pt["a"]});var mt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search Table","single-line":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),n("div",{staticClass:"red--text text--darken-2 page-title"},[e._v("Contacts")]),n("v-row",[n("v-col",{staticClass:"col-12"},[n("v-card",{attrs:{outlined:"",elevation:"3 text-wrap"}},[n("v-card-text",[n("v-data-table",{staticClass:"text-capitalize",attrs:{headers:e.headers,items:e.volunteers,search:e.search,"item-key":"id","multi-sort":""},on:{"click:row":e.nav},scopedSlots:e._u([{key:"item.name",fn:function(t){var a=t.item;return[null!==a.first_name?[n("span",{staticClass:"red--text"},[e._v(e._s(a.name))]),a.public_safety?n("span",[e._v(" (Public Safety)")]):e._e()]:null!==a.partner?[n("span",{staticClass:"purple--text"},[e._v(e._s(a.name))]),a.public_safety?n("span",[e._v(" (Public Safety)")]):e._e()]:e._e()]}},{key:"item.address",fn:function(t){var a=t.item;return[n("address",[n("span",{staticClass:"black--text"},[e._v(e._s(a.address))])])]}},{key:"item.emails",fn:function(t){t.item;return[n("div",[n("span",[e._v("\n                  "+e._s(e.email.address)+"\n                ")])])]}},{key:"item.phones",fn:function(t){var a=t.item;return[n("a",{on:{click:function(t){return e.nav(a)}}},[n("div",[e._v("\n                  "+e._s(e.phone.number)+"\n                ")])])]}},{key:"item.actions",fn:function(t){var a=t.item;return[n("v-icon",{attrs:{small:""},on:{click:function(t){return e.removePerson(a)}}},[e._v("mdi-delete")])]}}],null,!0)})],1)],1),n("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,o=t.attrs;return[n("v-hover",{attrs:{"open-delay":"200"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.hover;return[n("v-btn",e._g(e._b({class:{"on-hover":i},attrs:{text:"",elevation:i?16:2}},"v-btn",o,!1),a),[e._v("\n              Add Contact\n              "),n("v-icon",[e._v(" mdi-plus ")])],1)]}}],null,!0)})]}}]),model:{value:e.add_person_dlg,callback:function(t){e.add_person_dlg=t},expression:"add_person_dlg"}},[n("v-card",[n("v-form",{attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Contact Information")])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[n("v-text-field",{attrs:{label:"First Name",required:"",rules:e.nameRules},model:{value:e.add_person.firstname,callback:function(t){e.$set(e.add_person,"firstname",t)},expression:"add_person.firstname"}})],1),n("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[n("v-text-field",{attrs:{label:"Last Name",required:"",rules:e.nameRules},model:{value:e.add_person.lastname,callback:function(t){e.$set(e.add_person,"lastname",t)},expression:"add_person.lastname"}})],1),n("v-col",{attrs:{cols:"6",sm:"6",md:"6"}})],1),n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Street Number",rules:e.streetNumberRules},model:{value:e.add_person.street_number,callback:function(t){e.$set(e.add_person,"street_number",t)},expression:"add_person.street_number"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Street Name",rules:e.nameRules},model:{value:e.add_person.street_name,callback:function(t){e.$set(e.add_person,"street_name",t)},expression:"add_person.street_name"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"3",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"City",rules:e.nameRules},model:{value:e.add_person.city,callback:function(t){e.$set(e.add_person,"city",t)},expression:"add_person.city"}})],1),n("v-col",{attrs:{cols:"2"}},[n("v-text-field",{attrs:{label:"State",rules:e.nameRules},model:{value:e.add_person.state,callback:function(t){e.$set(e.add_person,"state",t)},expression:"add_person.state"}})],1),n("v-col",{attrs:{cols:"3"}},[n("v-text-field",{attrs:{label:"Zip",rules:e.zipRules},model:{value:e.add_person.zip,callback:function(t){e.$set(e.add_person,"zip",t)},expression:"add_person.zip"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"County",rules:e.zipRules},model:{value:e.add_person.county,callback:function(t){e.$set(e.add_person,"county",t)},expression:"add_person.county"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Primary Phone",rules:e.phoneRules},model:{value:e.add_person.primaryPhone,callback:function(t){e.$set(e.add_person,"primaryPhone",t)},expression:"add_person.primaryPhone"}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Secondary Phone",rules:e.phoneRules},model:{value:e.add_person.secondaryPhone,callback:function(t){e.$set(e.add_person,"secondaryPhone",t)},expression:"add_person.secondaryPhone"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Primary Email",rules:e.emailRules},model:{value:e.add_person.primaryEmail,callback:function(t){e.$set(e.add_person,"primaryEmail",t)},expression:"add_person.primaryEmail"}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Secondary Email",rules:e.emailRules},model:{value:e.add_person.secondaryEmail,callback:function(t){e.$set(e.add_person,"secondaryEmail",t)},expression:"add_person.secondaryEmail"}})],1)],1)],1),n("small",[e._v("*indicates required field")])],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.add_person_dlg=!1}}},[e._v("\n                Close\n              ")]),n("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:!e.valid},on:{click:e.addPerson}},[e._v("\n                Save\n              ")])],1)],1)],1)],1)],1)],1)],1)},ft=[],ht={name:"volunteers-list",data:function(){return{volunteers:[],add_person_dlg:!1,currentVolunteer:null,search:"",currentIndex:-1,name:"",add_person:{firstname:"",lastname:"",street_number:"",street_name:"",city:"",state:"",zip:"",county:"",organization:"",primaryPhone:"",secondaryPhone:"",primaryEmail:"",secondaryEmail:""},view_person:{firstname:"",lastname:"",street_number:"",street_name:"",city:"",state:"",zip:"",county:"",organization:"",primaryPhone:"",secondaryPhone:"",primaryEmail:"",secondaryEmail:""},nameRules:[function(e){return!!e||"Required"},function(e){return/\D\S$/.test(e)||"No white or empty spaces"}],emailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],phoneRules:[function(e){return!!e||"Required"},function(e){return/\S\d$/.test(e)||"Phone number must be valid"}],streetNumberRules:[function(e){return!!e||"Required"},function(e){return/\S\d$/.test(e)||"Street number must be valid"}],zipRules:[function(e){return!!e||"Required"},function(e){return/\S\d$/.test(e)||"Zip number must be valid"}],show1:!1,rules:{required:function(e){return!!e||"Required."},min:function(e){return e&&e.length>=1||"Min 5 characters"}}}},computed:{headers:function(){var e=[{text:"Name",value:"name",width:"80px"},{text:"Address",value:"address",width:"100px"},{text:"Email",value:"email",width:"80px"},{text:"Phone",value:"phone",width:"100px"},{text:"County",value:"county",width:"80px"},{text:"Organization",value:"organization_names",width:"80px"},{text:"Delete",value:"actions",width:"1%"}];return e}},methods:{nav:function(e){this.$router.push({path:"contact/"+e.id})},retrieveVolunteers:function(){var e=this;Ye.getAll().then((function(t){e.volunteers=t.data.filter((function(e){return null==e.user})),e.volunteers.forEach((function(e){e.address=e.street_number+" "+e.street_name+"\n"+e.city+", "+e.state+" "+e.zip,e.name=e.first_name+" "+e.last_name;var t="";e.emails.forEach((function(e){1==e.isPrimary&&(t+=e.address+"\n")})),e.email=t;var n="";e.phones.forEach((function(e){1==e.isPrimary&&(n+=e.number+"\n")}));var a="";e.organizations.forEach((function(e){a+=e.name+"\n"})),e.email=t,e.organization_names=a,e.phone=n}))})).catch((function(e){console.log(e.message)}))},refreshList:function(){this.retrieveVolunteers(),this.currentVolunteers=null,this.currentIndex=-1},setActiveVolunteer:function(e,t){this.currentVolunteer=e,this.currentIndex=t},removeAllVolunteers:function(){var e=this;Ye.deleteAll().then((function(t){console.log(t.data),e.refreshList()})).catch((function(e){console.log(e)}))},searchTitle:function(){var e=this;Ye.findByName(this.first_name).then((function(t){e.volunteers=t.data,console.log(t.data)})).catch((function(e){console.log(e)}))},addPerson:function(){var e=this,t={first_name:this.add_person.firstname,last_name:this.add_person.lastname,street_number:this.add_person.street_number,street_name:this.add_person.street_name,city:this.add_person.city,state:this.add_person.state,zip:this.add_person.zip,county:this.add_person.county};t.services=this.add_person.services,Ye.create(t).then((function(t){return e.retrieveVolunteers(),e.add_organization_dlg=!1,t.data.id})).then((function(t){var n={personId:t,address:e.add_person.primaryEmail,isPrimary:!0},a={personId:t,address:e.add_person.secondaryEmail,isPrimary:!1},o={personId:t,number:e.add_person.primaryPhone,isPrimary:!0},i={personId:t,number:e.add_person.secondaryPhone,isPrimary:!1};at.create(n),at.create(a),K.create(o),K.create(i),e.retrieveVolunteers()})).catch((function(e){console.log(e)})),this.add_person_dlg=!1,this.refreshList()},removePerson:function(e){var t=this;confirm("Are you sure you want to remove "+e.first_name+" "+e.last_name+" from the table?")&&Ye.delete(e.id).then((function(e){console.log(e.data),window.location.href="/contacts",t.refreshList()})).catch((function(e){console.log(e)}))}},mounted:function(){this.retrieveVolunteers()}},gt=ht,bt=(n("015f"),Object(l["a"])(gt,mt,ft,!1,null,"1c3c31e4",null)),yt=bt.exports;d()(bt,{VBtn:_["a"],VCard:se["a"],VCardActions:le["a"],VCardText:le["c"],VCardTitle:le["d"],VCol:w["a"],VContainer:C["a"],VDataTable:ce["a"],VDialog:de["a"],VForm:ue["a"],VHover:pe["a"],VIcon:_e["a"],VRow:V["a"],VSpacer:f["a"],VTextField:me["a"]});var xt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("div",{staticClass:"red--text text--darken-4 page-title"},[e._v("Contact Info")])])],1),n("v-row",[n("v-col",{staticClass:"col-7"},[n("v-row",[n("v-col",{staticClass:"offset-1 col-0"},[n("v-card",{attrs:{elevation:"3"}},[n("v-card-title",[n("v-row",[n("v-col",[n("span",{staticClass:"text-h4 font-weight-thin"},[e._v("\n                    "+e._s(e.edit_person.first_name+" "+e.edit_person.last_name)+"\n                  ")])]),n("v-col",{staticClass:"col-2"},[n("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,o=t.attrs;return[n("v-hover",{attrs:{"open-delay":"200"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.hover;return[n("v-btn",e._g(e._b({class:{"on-hover":i},attrs:{icon:"",elevation:i?16:2}},"v-btn",o,!1),a),[n("v-icon",[e._v(" mdi-pencil ")])],1)]}}],null,!0)})]}}]),model:{value:e.edit_person_dlg,callback:function(t){e.edit_person_dlg=t},expression:"edit_person_dlg"}},[n("v-card",[n("v-form",{attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Contact Information")])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[n("v-text-field",{attrs:{label:"First Name",required:"",rules:e.nameRules},model:{value:e.edit_person.first_name,callback:function(t){e.$set(e.edit_person,"first_name",t)},expression:"edit_person.first_name"}})],1),n("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[n("v-text-field",{attrs:{label:"Last Name",required:"",rules:e.nameRules},model:{value:e.edit_person.last_name,callback:function(t){e.$set(e.edit_person,"last_name",t)},expression:"edit_person.last_name"}})],1),n("v-col",{attrs:{cols:"6",sm:"6",md:"6"}})],1),n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Street Number",rules:e.nameRules},model:{value:e.edit_person.street_number,callback:function(t){e.$set(e.edit_person,"street_number",t)},expression:"edit_person.street_number"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Street Name",rules:e.nameRules},model:{value:e.edit_person.street_name,callback:function(t){e.$set(e.edit_person,"street_name",t)},expression:"edit_person.street_name"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"3",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"City",rules:e.nameRules},model:{value:e.edit_person.city,callback:function(t){e.$set(e.edit_person,"city",t)},expression:"edit_person.city"}})],1),n("v-col",{attrs:{cols:"2"}},[n("v-text-field",{attrs:{label:"State",rules:e.nameRules},model:{value:e.edit_person.state,callback:function(t){e.$set(e.edit_person,"state",t)},expression:"edit_person.state"}})],1),n("v-col",{attrs:{cols:"3"}},[n("v-text-field",{attrs:{label:"Zip",rules:e.zipRules},model:{value:e.edit_person.zip,callback:function(t){e.$set(e.edit_person,"zip",t)},expression:"edit_person.zip"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"County",rules:e.nameRules},model:{value:e.edit_person.county,callback:function(t){e.$set(e.edit_person,"county",t)},expression:"edit_person.county"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Primary Phone",rules:e.phoneRules},model:{value:e.edit_person.primaryPhone,callback:function(t){e.$set(e.edit_person,"primaryPhone",t)},expression:"edit_person.primaryPhone"}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Secondary Phone",rules:e.phoneRules},model:{value:e.edit_person.secondaryPhone,callback:function(t){e.$set(e.edit_person,"secondaryPhone",t)},expression:"edit_person.secondaryPhone"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Primary Email",rules:e.emailRules},model:{value:e.edit_person.primaryEmail,callback:function(t){e.$set(e.edit_person,"primaryEmail",t)},expression:"edit_person.primaryEmail"}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Secondary Email",rules:e.emailRules},model:{value:e.edit_person.secondaryEmail,callback:function(t){e.$set(e.edit_person,"secondaryEmail",t)},expression:"edit_person.secondaryEmail"}})],1)],1)],1),n("small",[e._v("*indicates required field")])],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.edit_person_dlg=!1}}},[e._v("\n                            Close\n                          ")]),n("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:!e.valid},on:{click:e.updatePerson}},[e._v("\n                            Save\n                          ")])],1)],1)],1)],1),n("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,o=t.attrs;return[n("v-hover",{attrs:{"open-delay":"200"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.hover;return[n("v-btn",e._g(e._b({staticClass:"text--primary",class:{"on-hover":i},attrs:{color:"white",fab:"",small:"",elevation:i?16:2}},"v-btn",o,!1),a),[n("v-icon",[e._v(" mdi-plus ")])],1)]}}],null,!0)})]}}]),model:{value:e.add_note_dlg,callback:function(t){e.add_note_dlg=t},expression:"add_note_dlg"}},[n("v-form",{ref:"new_note_form",model:{value:e.valid_note,callback:function(t){e.valid_note=t},expression:"valid_note"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Note")])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{staticClass:"col-3"},[n("v-autocomplete",{attrs:{items:e.add_note_form.types,label:"Type"},model:{value:e.add_note_form.type,callback:function(t){e.$set(e.add_note_form,"type",t)},expression:"add_note_form.type"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[n("v-textarea",{attrs:{rules:e.note_text_rule},model:{value:e.add_note_form.text,callback:function(t){e.$set(e.add_note_form,"text",t)},expression:"add_note_form.text"}})],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.add_note_dlg=!1}}},[e._v("\n                            Close\n                          ")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.addNote}},[e._v("\n                            Save\n                          ")])],1)],1)],1)],1)],1)],1)],1),n("v-card-subtitle",[e._v("\n              "+e._s(e.edit_person.primaryPhone)+" | "+e._s(e.edit_person.primaryEmail)+"\n              "),n("div",[e._v("\n                "+e._s("Recent Note: "+e.edit_person.person_notes)+"\n              ")])]),n("v-divider"),n("v-card-text",[n("address",{staticClass:"text-capitalize"},[e._v("\n                "+e._s(e.edit_person.street_number)+" "+e._s(e.edit_person.street_name)),n("br"),e._v("\n                "+e._s(e.edit_person.city)+", "+e._s(e.edit_person.state)+"\n                "+e._s(e.edit_person.zip)),n("br"),e._v("\n                "+e._s(e.edit_person.county+" County")),n("br")]),e._v("\n              Affiliated Organizations: "+e._s(e.edit_person.organization_names)+"\n              "),n("br"),e._v("\n              Alternate Contact Info:\n              "+e._s(e.edit_person.secondaryPhone)+"\n              "+e._s(e.edit_person.secondaryEmail)+"\n            ")])],1)],1)],1)],1),n("v-col",[n("NoteDialog",{attrs:{item:e.view_note_item},model:{value:e.showNoteDialog,callback:function(t){e.showNoteDialog=t},expression:"showNoteDialog"}}),[n("v-card")]],2)],1)],1)},kt=[],zt={name:"contact",components:{NoteDialog:Ne},data:function(){return{edit_person_dlg:!1,showNoteDialog:!1,phoneId:"",phone2Id:"",emailId:"",email2Id:"",edit_person:{first_name:"",last_name:"",street_number:"",street_name:"",city:"",state:"",zip:"",county:"",organization_names:"",primaryPhone:"",secondaryPhone:"",primaryEmail:"",secondaryEmail:"",person_notes:""},view_note_item:{},note_search:"",history_switch:!0,notes:[],add_note_dlg:!1,valid_note:!0,note_text_rule:[function(e){return!!e||"Text is required"}],add_note_form:{types:["General","Contact"],text:"",type:"General"},view_note_dlg:!1,notes_type_selected:{general:!1,contact:!0},menu1:!1,menu2:!1,start_date:(new Date).toISOString().substr(0,10),end_date:(new Date).toISOString().substr(0,10),formattedStartDate:"",formattedEndDate:"",tab:"",nameRules:[function(e){return!!e||"Required"},function(e){return/\D\S$/.test(e)||"No white or empty spaces"}],emailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],phoneRules:[function(e){return!!e||"Required"},function(e){return/\S\d$/.test(e)||"Phone number must be valid"}],streetNumberRules:[function(e){return!!e||"Required"},function(e){return/\S\d$/.test(e)||"Street number must be valid"}],zipRules:[function(e){return!!e||"Required"},function(e){return/\S\d$/.test(e)||"Zip number must be valid"}],show1:!1,rules:{required:function(e){return!!e||"Required."},min:function(e){return e&&e.length>=1||"Min 5 characters"}}}},methods:{showDialog:function(){this.edit_person_dlg=!0},setPerson:function(){var e=this;ze.get(this.$route.params.personId).then((function(t){e.edit_person=t.data,console.log(t),t.data.phones.forEach((function(t){t.isPrimary?(e.edit_person.primaryPhone=t.number,e.phoneId=t.id):(e.edit_person.secondaryPhone=t.number,e.phone2Id=t.id)})),t.data.emails.forEach((function(t){t.isPrimary?(e.edit_person.primaryEmail=t.address,e.emailId=t.id):(e.edit_person.secondaryEmail=t.address,e.email2Id=t.id)})),e.edit_person.organization_names="",t.data.organizations.forEach((function(t){e.edit_person.organization_names+=t.name+"\n"}))})).catch((function(e){console.log(e.message)}))},updatePerson:function(){var e=this,t={first_name:this.edit_person.first_name,last_name:this.edit_person.last_name,street_number:this.edit_person.street_number,street_name:this.edit_person.street_name,city:this.edit_person.city,state:this.edit_person.state,zip:this.edit_person.zip,county:this.edit_person.county};console.log(t);var n=this.$route.params.personId;ze.update(n,t).then((function(e){return e.data.id})).then((function(t){console.log(t);var n={address:e.edit_person.primaryEmail,isPrimary:!0},a={address:e.edit_person.secondaryEmail,isPrimary:!1},o={number:e.edit_person.primaryPhone,isPrimary:!0},i={number:e.edit_person.secondaryPhone,isPrimary:!1};console.log(i),at.update(e.emailId,n),at.update(e.email2Id,a),K.update(e.phoneId,o),K.update(e.phone2Id,i).then((function(e){console.log(e)}))})).catch((function(e){console.log(e)})),this.edit_person_dlg=!1},addNote:function(e){var t=this;if(console.log(e),this.$refs.new_note_form.validate()){var n={first_name:this.edit_person.first_name,last_name:this.edit_person.last_name,street_number:this.edit_person.street_number,street_name:this.edit_person.street_name,city:this.edit_person.city,state:this.edit_person.state,zip:this.edit_person.zip,county:this.edit_person.county,person_notes:this.add_note_form.text},a=this.$route.params.personId;ze.update(a,n).then((function(e){console.log(e),t.setPerson()})).catch((function(e){console.log(e)})),this.add_note_dlg=!1}},deleteNote:function(e){var t=this;Pe.delete(e.id).then((function(e){t.setPerson(t.$route.params.personId),console.log(e)})).catch((function(e){console.log(e)})),this.showNoteDialog=!1},close_note_dlg:function(){this.view_note_dlg=!1},openNoteDialog:function(e){this.showNoteDialog=!0,this.view_note_item=e},setModal:function(e){this.view_note_item=e,this.open_note_dlg()},switch_label:function(){return this.history_switch?"Contact History":"General History"},set_notes_view:function(){this.notes_type_selected.general=!this.history_switch,this.notes_type_selected.contact=this.history_switch}},computed:{},mounted:function(){this.setPerson()}},wt=zt,Ct=Object(l["a"])(wt,xt,kt,!1,null,null,null),Vt=Ct.exports;d()(Ct,{VAutocomplete:Fe["a"],VBtn:_["a"],VCard:se["a"],VCardActions:le["a"],VCardSubtitle:le["b"],VCardText:le["c"],VCardTitle:le["d"],VCol:w["a"],VContainer:C["a"],VDialog:de["a"],VDivider:je["a"],VForm:ue["a"],VHover:pe["a"],VIcon:_e["a"],VRow:V["a"],VSpacer:f["a"],VTextField:me["a"],VTextarea:fe["a"]});var Pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("v-app",[n("v-dialog",{attrs:{persistent:"","max-width":"600px","min-width":"360px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("div",[n("v-tabs",{attrs:{"show-arrows":"","background-color":"red","icons-and-text":"",dark:"",grow:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("v-tabs-slider",{attrs:{color:"purple darken-4"}}),e._l(e.tabs,(function(t){return n("v-tab",{key:t.name},[n("v-icon",{attrs:{large:""}},[e._v(e._s(t.icon))]),n("div",{staticClass:"caption py-1"},[e._v(e._s(t.name))])],1)})),n("v-tab-item",[n("v-card",{staticClass:"px-4"},[n("v-card-text",[n("v-form",{ref:"loginForm",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{rules:e.loginEmailRules,label:"E-mail",required:""},model:{value:e.loginEmail,callback:function(t){e.loginEmail=t},expression:"loginEmail"}})],1),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{"append-icon":e.show1?"eye":"eye-off",rules:[e.rules.required,e.rules.min],type:e.show1?"text":"password",name:"input-10-1",label:"Password",hint:"At least 8 characters",counter:""},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.loginPassword,callback:function(t){e.loginPassword=t},expression:"loginPassword"}})],1),n("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6",xsm:"12"}}),n("v-spacer"),n("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"3",xsm:"12","align-end":""}},[n("v-btn",{attrs:{"x-large":"",block:"",disabled:!e.valid,color:"success"},on:{click:e.validate}},[e._v("\n                        Login\n                      ")])],1)],1)],1)],1)],1)],1),n("v-tab-item",[n("v-card",{staticClass:"px-4"},[n("v-card-text",[n("v-form",{ref:"registerForm",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-text-field",{attrs:{rules:[e.rules.required],label:"First Name",maxlength:"20",required:""},model:{value:e.FirstName,callback:function(t){e.FirstName=t},expression:"FirstName"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-text-field",{attrs:{rules:[e.rules.required],label:"Last Name",maxlength:"20",required:""},model:{value:e.LastName,callback:function(t){e.LastName=t},expression:"LastName"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-text-field",{attrs:{rules:[e.rules.required],label:"User ID",maxlength:"20",required:""},model:{value:e.UserId,callback:function(t){e.UserId=t},expression:"UserId"}})],1),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{rules:e.emailRules,label:"E-mail",required:""},model:{value:e.Email,callback:function(t){e.Email=t},expression:"Email"}})],1),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{"append-icon":e.show1?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.rules.min],type:e.show1?"text":"Password",name:"input-10-1",label:"Password",hint:"At least 8 characters",counter:""},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.Password,callback:function(t){e.Password=t},expression:"Password"}})],1),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{block:"","append-icon":e.show1?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.passwordMatch],type:e.show1?"text":"Password",name:"input-10-1",label:"Confirm Password",counter:""},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.verify,callback:function(t){e.verify=t},expression:"verify"}})],1),n("v-spacer"),n("v-col",{staticClass:"d-flex ml-auto",attrs:{cols:"12",sm:"3",xsm:"12"}},[n("v-btn",{attrs:{"x-large":"",block:"",disabled:!e.valid,color:"success"},on:{click:e.validate}},[e._v("Register")])],1)],1)],1)],1)],1)],1)],2)],1)])],1)],1)},Rt=[],Ot={computed:{passwordMatch:function(){var e=this;return function(){return e.Password===e.verify||"Password must match"}}},methods:{validate:function(){this.$refs.loginForm.validate()&&axios.post("localhost:3000/Users",{userId:JSON.stringify(this.UserId),firstName:JSON.stringify(this.FirstName),lastName:JSON.stringify(this.LastName),password:JSON.stringify(this.Password),emailAddress:JSON.stringify(this.Email)}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()}},data:function(){return{dialog:!0,tab:0,tabs:[{name:"Login",icon:"mdi-account"},{name:"Register",icon:"mdi-account-outline"}],valid:!0,FirstName:"",UserId:"",LastName:"",Email:"",Password:"",verify:"",loginPassword:"",loginEmail:"",loginEmailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],emailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],show1:!1,rules:{required:function(e){return!!e||"Required."},min:function(e){return e&&e.length>=8||"Min 8 characters"}}}}},It=Ot,At=n("71a3"),St=n("c671"),Et=n("fe57"),$t=n("9a96"),Nt=Object(l["a"])(It,Pt,Rt,!1,null,null,null),Dt=Nt.exports;d()(Nt,{VApp:u["a"],VBtn:_["a"],VCard:se["a"],VCardText:le["c"],VCol:w["a"],VDialog:de["a"],VForm:ue["a"],VIcon:_e["a"],VRow:V["a"],VSpacer:f["a"],VTab:At["a"],VTabItem:St["a"],VTabs:Et["a"],VTabsSlider:$t["a"],VTextField:me["a"]});var qt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("div",{staticClass:"red--text text--darken-4 page-title",attrs:{align:"center"}},[e._v("\n        User Info\n      ")])])],1),n("v-row",[n("v-col",{staticClass:"col-7"},[n("v-row",[n("v-col",{staticClass:"offset-1 col-10"},[n("v-card",{attrs:{elevation:"3"}},[n("v-card-title",[n("v-row",[n("v-col",[n("span",{staticClass:"text-h4 font-weight-thin"},[e._v("\n                    "+e._s(e.edit_person.first_name+" "+e.edit_person.last_name)+"\n                  ")]),n("v-row",[n("span",{staticClass:"text-h6 font-weight-thin"},[e._v("\n                      "+e._s("Roles: "+e.view_role.role)+"\n                    ")])])],1),n("v-col",{staticClass:"col-2"},[n("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,o=t.attrs;return[n("v-hover",{attrs:{"open-delay":"200"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.hover;return[n("v-btn",e._g(e._b({class:{"on-hover":i},attrs:{icon:"",elevation:i?16:2}},"v-btn",o,!1),a),[n("v-icon",[e._v(" mdi-pencil ")])],1)]}}],null,!0)})]}}]),model:{value:e.edit_person_dlg,callback:function(t){e.edit_person_dlg=t},expression:"edit_person_dlg"}},[n("v-card",[n("v-form",{attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("User Information")])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[n("v-text-field",{attrs:{label:"First Name",required:"",rules:e.nameRules},model:{value:e.edit_person.first_name,callback:function(t){e.$set(e.edit_person,"first_name",t)},expression:"edit_person.first_name"}})],1),n("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[n("v-text-field",{attrs:{label:"Last Name",required:"",rules:e.nameRules},model:{value:e.edit_person.last_name,callback:function(t){e.$set(e.edit_person,"last_name",t)},expression:"edit_person.last_name"}})],1),n("v-col",{attrs:{cols:"6",sm:"6",md:"6"}})],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Email",rules:e.emailRules},model:{value:e.edit_user.email,callback:function(t){e.$set(e.edit_user,"email",t)},expression:"edit_user.email"}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Password",type:"password"},model:{value:e.edit_user.password,callback:function(t){e.$set(e.edit_user,"password",t)},expression:"edit_user.password"}})],1)],1),n("v-row",[n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-autocomplete",{attrs:{label:"User Role",items:e.role,"item-text":"name","item-value":"id"},model:{value:e.view_role.role,callback:function(t){e.$set(e.view_role,"role",t)},expression:"view_role.role"}},[e._v("\n                                    "+e._s(e.view_role.role)+"\n                                  ")])],1),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Phone",rules:e.phoneRules},model:{value:e.edit_contact.phone,callback:function(t){e.$set(e.edit_contact,"phone",t)},expression:"edit_contact.phone"}})],1)],1)],1)],1),n("small",[e._v("*indicates required field")])],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.edit_person_dlg=!1}}},[e._v("\n                            Close\n                          ")]),n("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:!e.valid},on:{click:e.updatePerson}},[e._v("\n                            Save\n                          ")])],1)],1)],1)],1)],1)],1)],1),n("v-divider")],1)],1)],1)],1)],1)],1)},Mt=[],Tt=(n("6b54"),function(){function e(){Object(A["a"])(this,e)}return Object(S["a"])(e,[{key:"getAll",value:function(){return N.get("roles")}}]),e}()),Ft=new Tt,jt=function(){function e(){Object(A["a"])(this,e)}return Object(S["a"])(e,[{key:"create",value:function(e){return N.post("/user_roles/",e)}},{key:"update",value:function(e,t,n){return N.put("/user_roles/".concat(e,"/").concat(t),n)}},{key:"get",value:function(e,t){return N.get("/user_roles/".concat(e),t)}}]),e}(),Lt=new jt,Ut=n("1c46"),Bt={data:function(){return{selectedRole:"",role:["Admin","User"],edit_person_dlg:!1,person:{first_name:"",last_name:""},edit_person:{first_name:"",last_name:""},edit_user:{password:"",email:""},edit_role:{role:"",userId:""},view_role:{role:""},edit_contact:{phone:""},contact_id:{phone:"",email:""},nameRules:[function(e){return!!e||"Required"},function(e){return/\D\S$/.test(e)||"No white or empty spaces"}],emailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],phoneRules:[function(e){return!!e||"Required"},function(e){return/\S\d$/.test(e)||"Phone number must be valid"}],show1:!1,rules:{required:function(e){return!!e||"Required."},min:function(e){return e&&e.length>=1||"Min 5 characters"}}}},methods:{updateSelectedRole:function(e){var t="",n="";"User"===e?(t=2,n=1):(t=1,n=2);var a={userId:this.edit_role.userId,roleId:n},o={roleId:t};Lt.update(a.userId,a.roleId,o).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},populateRoles:function(){var e=this;Ft.getAll().then((function(t){e.roles=t.data})).catch((function(e){console.log(e)}))},showDialog:function(){this.edit_person_dlg=!0},setPerson:function(){var e=this;this.populateRoles(),He.get(this.$route.params.personId).then((function(t){console.log(t);var n=t.data.user.roles[0].user_roles.roleId;console.log(t.data.user.id),console.log(n),e.edit_role.userId=t.data.user.id,e.edit_person=t.data,e.edit_user=t.data.user,e.edit_contact.phone=t.data.phones[0].number,e.contact_id.phone=t.data.phones[0].id,e.contact_id.email=t.data.emails[0].id,e.view_role.role=2==n?"User":"Admin"})).catch((function(e){console.log(e)}))},generateSalt:function(){return Ut.randomBytes(16).toString("base64")},encryptPassword:function(e,t){return Ut.createHash("sha256").update(e).update(t).digest("hex")},updatePerson:function(){var e=this.generateSalt(),t=this.encryptPassword(this.edit_user.password,e),n={first_name:this.edit_person.first_name,last_name:this.edit_person.last_name,email:this.edit_user.email,password:t,salt:e};console.log(n);var a=this.$route.params.personId,o={number:this.edit_contact.phone,isPrimary:!0},i={address:this.edit_user.email,isPrimary:!0};K.update(this.contact_id.phone,o),at.update(this.contact_id.email,i),He.update(a,n).then((function(e){console.log(e)})).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),this.edit_person_dlg=!1,console.log(this.view_role.role),this.updateSelectedRole(this.view_role.role)}},mounted:function(){this.setPerson()}},Ht=Bt,Wt=Object(l["a"])(Ht,qt,Mt,!1,null,null,null),Yt=Wt.exports;d()(Wt,{VAutocomplete:Fe["a"],VBtn:_["a"],VCard:se["a"],VCardActions:le["a"],VCardText:le["c"],VCardTitle:le["d"],VCol:w["a"],VContainer:C["a"],VDialog:de["a"],VDivider:je["a"],VForm:ue["a"],VHover:pe["a"],VIcon:_e["a"],VRow:V["a"],VSpacer:f["a"],VTextField:me["a"]});var Jt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("div",{staticClass:"red--text text--darken-4 page-title",attrs:{align:"center"}},[e._v("Users")]),n("v-row",[n("v-col",{staticClass:"col-12"},[n("v-card",{attrs:{elevation:"3 text-wrap"}},[n("v-card-text",[n("v-row",[n("v-col",{staticClass:"col-6"},[n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search Table","single-line":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),n("v-data-table",{staticClass:"text-capitalize",attrs:{headers:e.headers,items:e.volunteers,search:e.search,"item-key":"id","multi-sort":""},scopedSlots:e._u([{key:"item.name",fn:function(t){var a=t.item;return[null!==a.first_name?[n("a",{on:{click:function(t){return e.nav(a)}}},[n("span",{staticClass:"black--text"},[e._v(" "+e._s(a.name))]),a.public_safety?n("span",[e._v(" (Public Safety)")]):e._e()])]:null!==a.partner?[n("a",{on:{click:function(t){return e.nav(a)}}},[n("span",{staticClass:"purple--text"},[e._v(e._s(a.name))]),a.public_safety?n("span",[e._v(" (Public Safety)")]):e._e()])]:e._e()]}},{key:"item.address",fn:function(t){var a=t.item;return[n("address",[e._v("\n                "+e._s(a.address)+"\n              ")])]}},{key:"item.email",fn:function(t){var a=t.item;return[n("a",{on:{click:function(t){return e.nav(a)}}},[n("div",[n("span",{staticClass:"black--text"},[e._v("\n                    "+e._s(a.user.email)+"\n                  ")])])])]}},{key:"item.roles",fn:function(t){var a=t.item;return[n("div",[n("span",{staticClass:"purple--text"},[e._v(e._s(a.role))])])]}},{key:"item.actions",fn:function(t){var a=t.item;return[n("v-icon",{attrs:{small:""},on:{click:function(t){return e.removePerson(a)}}},[e._v("mdi-delete")])]}}],null,!0)})],1)],1),n("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,o=t.attrs;return[n("v-hover",{attrs:{"open-delay":"200"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.hover;return[n("v-btn",e._g(e._b({class:{"on-hover":i},attrs:{text:"",elevation:i?16:2}},"v-btn",o,!1),a),[e._v("\n              Add User\n              "),n("v-icon",[e._v(" mdi-plus ")])],1)]}}],null,!0)})]}}]),model:{value:e.add_person_dlg,callback:function(t){e.add_person_dlg=t},expression:"add_person_dlg"}},[n("v-card",[n("v-form",{attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Add User")])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[n("v-text-field",{attrs:{required:"",label:"First Name",rules:e.nameRules},model:{value:e.add_person.firstname,callback:function(t){e.$set(e.add_person,"firstname",t)},expression:"add_person.firstname"}})],1),n("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[n("v-text-field",{attrs:{label:"Last Name",required:"",rules:e.nameRules},model:{value:e.add_person.lastname,callback:function(t){e.$set(e.add_person,"lastname",t)},expression:"add_person.lastname"}})],1),n("v-col",{attrs:{cols:"6",sm:"6",md:"6"}})],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Email",rules:e.emailRules},model:{value:e.add_person.email,callback:function(t){e.$set(e.add_person,"email",t)},expression:"add_person.email"}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Password"},model:{value:e.add_person.password,callback:function(t){e.$set(e.add_person,"password",t)},expression:"add_person.password"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Phone",rules:e.phoneRules},model:{value:e.add_person.phone,callback:function(t){e.$set(e.add_person,"phone",t)},expression:"add_person.phone"}})],1)],1)],1),n("small",[e._v("*indicates required field")])],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.add_person_dlg=!1}}},[e._v("\n                Close\n              ")]),n("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:!e.valid},on:{click:e.addPerson}},[e._v("\n                Save\n              ")])],1)],1)],1)],1)],1)],1)],1)},Zt=[],Kt={name:"users",data:function(){return{volunteers:[],add_person_dlg:!1,currentVolunteer:null,search:"",currentIndex:-1,name:"",role:"",add_person:{firstname:"",lastname:"",email:"",password:"",phone:""},add_role:{roles:""},view_person:{firstname:"",lastname:""},nameRules:[function(e){return!!e||"Required"},function(e){return/\D\S$/.test(e)||"No white or empty spaces"}],emailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],phoneRules:[function(e){return!!e||"Required"},function(e){return/\S\d$/.test(e)||"Phone number must be valid"}],show1:!1,rules:{required:function(e){return!!e||"Required."},min:function(e){return e&&e.length>=1||"Min 5 characters"}}}},computed:{headers:function(){var e=[{text:"Name",value:"name",width:"80px"},{text:"Email",value:"email",width:"80px"},{text:"Roles",value:"role",width:"100px"},{text:"Delete",value:"actions",width:"1%"}];return e}},methods:{nav:function(e){this.$router.push({path:"User/"+e.id})},retrieveVolunteers:function(){var e=this;He.getAll().then((function(t){console.log(t.data),e.volunteers=t.data,e.volunteers.forEach((function(e){e.name=e.first_name+" "+e.last_name,console.log(e.name);var t=e.user.roles[0].id,n="";console.log(t),n=2==t?"User":"Admin",console.log(n),e.role=n}))})).catch((function(e){console.log(e.message)}))},refreshList:function(){this.retrieveVolunteers(),this.currentVolunteers=null,this.currentIndex=-1},setActiveVolunteer:function(e,t){this.currentVolunteer=e,this.currentIndex=t},addPerson:function(){var e=this,t={first_name:this.add_person.firstname,last_name:this.add_person.lastname,email:this.add_person.email,password:this.add_person.password};this.add_role.roles;t.services=this.add_person.services,He.create(t).then((function(t){console.log(t.data.personId);var n={userId:t.data.userId,roleId:2},a={personId:t.data.personId,number:e.add_person.phone,isPrimary:!0},o={personId:t.data.personId,address:e.add_person.email,isPrimary:!0};K.create(a),at.create(o),Lt.create(n).then((function(t){e.refreshList()})).catch((function(e){console.log(e)})),e.refreshList()})).catch((function(e){console.log(e)})),this.add_person_dlg=!1},removePerson:function(e){var t=this;confirm("Are you sure you want to remove "+e.first_name+" "+e.last_name+" from the table?")&&He.delete(e.id).then((function(e){t.refreshList()})).catch((function(e){console.log(e)}))}},mounted:function(){this.retrieveVolunteers()}},Gt=Kt,Xt=(n("e45b"),Object(l["a"])(Gt,Jt,Zt,!1,null,"d360f5dc",null)),Qt=Xt.exports;d()(Xt,{VBtn:_["a"],VCard:se["a"],VCardActions:le["a"],VCardText:le["c"],VCardTitle:le["d"],VCol:w["a"],VContainer:C["a"],VDataTable:ce["a"],VDialog:de["a"],VForm:ue["a"],VHover:pe["a"],VIcon:_e["a"],VRow:V["a"],VSpacer:f["a"],VTextField:me["a"]});var en=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("v-app",[n("v-dialog",{attrs:{persistent:"","max-width":"600px","min-width":"360px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("div",[n("v-tabs",{attrs:{"show-arrows":"","background-color":"red","icons-and-text":"",dark:"",grow:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("v-tabs-slider",{attrs:{color:"purple darken-4"}}),e._l(e.tabs,(function(t){return n("v-tab",{key:t.name},[n("v-icon",{attrs:{large:""}},[e._v(e._s(t.icon))]),n("div",{staticClass:"caption py-1"},[e._v(e._s(t.name))])],1)})),n("v-tab-item",[n("v-card",{staticClass:"px-4"},[n("v-card-text",[n("v-form",{ref:"loginForm",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{rules:e.loginEmailRules,label:"E-mail",required:""},model:{value:e.loginEmail,callback:function(t){e.loginEmail=t},expression:"loginEmail"}})],1),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{"append-icon":e.show1?"eye":"eye-off",rules:[e.rules.required,e.rules.min],type:e.show1?"text":"password",name:"input-10-1",label:"Password",hint:"At least 8 characters",counter:""},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.loginPassword,callback:function(t){e.loginPassword=t},expression:"loginPassword"}})],1),n("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6",xsm:"12"}}),n("v-spacer"),n("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"3",xsm:"12","align-end":""}},[n("v-btn",{attrs:{"x-large":"",block:"",disabled:!e.valid,color:"success"},on:{click:e.validate}},[e._v("\n                        Login\n                      ")])],1)],1)],1)],1)],1)],1)],2)],1)])],1)],1)},tn=[],nn=(n("a481"),n("1c46")),an={name:"Login",computed:{passwordMatch:function(){var e=this;return function(){return e.Password===e.verify||"Password must match"}}},methods:{generateSalt:function(){return nn.randomBytes(16).toString("base64")},encryptPassword:function(e,t){return nn.createHash("sha256").update(e).update(t).digest("hex")},testPassword:function(e,t,n){var a=this.encryptPassword(n,e);return t==a},checkCredentials:function(){var e=this;He.getByEmail(this.loginEmail).then((function(t){var n=t.data[0].user.password,a=t.data[0].user.salt;e.UserId=t.data[0].user.id,e.UserRole=t.data[0].user.roles[0].id;var o=e.testPassword(a,n,e.loginPassword);e.$authenticated=o,e.login()})).catch((function(e){console.log(e)}))},validate:function(){var e=this;this.$refs.loginForm.validate()&&He.getAll().then((function(t){e.checkCredentials()})).catch((function(e){console.log(e)}))},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},login:function(){this.$authenticated?(this.$session.start(),this.$session.set("userID",this.UserId),this.$session.set("userRole",this.UserRole),this.$router.replace({name:"home"})):console.log("Wrong password")}},data:function(){return{dialog:!0,tab:0,tabs:[{name:"Login",icon:"mdi-account"}],valid:!0,FirstName:"",UserId:"",UserRole:"",LastName:"",Email:"",Password:"",verify:"",loginPassword:"",loginEmail:"",loginEmailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],emailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],show1:!1,rules:{required:function(e){return!!e||"Required."},min:function(e){return e&&e.length>=1||"Min 5 characters"}}}}},on=an,rn=Object(l["a"])(on,en,tn,!1,null,null,null),sn=rn.exports;d()(rn,{VApp:u["a"],VBtn:_["a"],VCard:se["a"],VCardText:le["c"],VCol:w["a"],VDialog:de["a"],VForm:ue["a"],VIcon:_e["a"],VRow:V["a"],VSpacer:f["a"],VTab:At["a"],VTabItem:St["a"],VTabs:Et["a"],VTabsSlider:$t["a"],VTextField:me["a"]}),a["a"].use(b["a"]);var ln=new b["a"]({mode:"history",base:"/",routes:[{path:"/",name:"login",component:sn},{path:"/home",name:"home",component:R},{path:"/register",name:"register",component:Dt},{path:"/organizations",name:"organizations",component:ge},{path:"/organization/:organizationId",name:"organization",component:vt},{path:"/contacts",name:"contacts",component:yt},{path:"/contact/:personId",name:"contact",component:Vt},{path:"/users",name:"users",component:Qt},{path:"/user/:personId",name:"user",component:Yt}]}),cn=n("f309"),dn=new cn["a"]({rtl:!1,theme:{dark:!1,themes:{dark:{primary:"#E57373",accent:"#FF4081",secondary:"#ffe18d",success:"#4CAF50",info:"#2196F3",warning:"#FB8C00",error:"#FF5252"},light:{primary:"#E8E8E0",accent:"#C62828",secondary:"#30b1dc",success:"#4CAF50",info:"#2196F3",warning:"#FB8C00",error:"#FF5252"}}}});a["a"].use(cn["a"]);var un=n("a65d"),pn=n.n(un),_n=n("0628"),vn=n.n(_n);a["a"].use(vn.a),a["a"].use(pn.a),a["a"].config.productionTip=!1,a["a"].prototype.$authenticated=!1,new a["a"]({router:ln,vuetify:dn,render:function(e){return e(g)}}).$mount("#app")},6:function(e,t){},"64a9":function(e,t,n){},7:function(e,t){},"7aec":function(e,t,n){},"7b17":function(e,t,n){},8:function(e,t){},"8e48":function(e,t,n){e.exports=n.p+"img/redcross-logo.277e8730.png"},9:function(e,t){},e45b:function(e,t,n){"use strict";var a=n("37f7"),o=n.n(a);o.a},ee33:function(e,t,n){"use strict";var a=n("7b17"),o=n.n(a);o.a}});
//# sourceMappingURL=app.a04228d9.js.map