(function(e){function t(t){for(var n,s,r=t[0],l=t[1],c=t[2],u=0,p=[];u<r.length;u++)s=r[u],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&p.push(i[s][0]),i[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);d&&d(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,r=1;r<a.length;r++){var l=a[r];0!==i[l]&&(n=!1)}n&&(o.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},i={app:0},o=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var d=l;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var n=a("64a9"),i=a.n(n);i.a},"0647":function(e,t,a){e.exports=a.p+"img/rescuers.3b5df2c9.jpeg"},"0857":function(e,t,a){},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-app-bar",{staticStyle:{"background-color":"#7F181B"},attrs:{tile:"",absolute:"",flat:"",app:""}},[n("v-btn",{staticClass:"mr-3",attrs:{elevation:"1",fab:"",small:""},on:{click:function(t){t.stopPropagation(),e.mini=!e.mini}}},[n("v-icon",{staticClass:"mdi mdi-dark mdi-dots-vertical"})],1),n("v-toolbar-title",{staticClass:"hidden-sm-and-down",staticStyle:{color:"white"}},[e._v(e._s(e.getPageTitle))]),n("v-spacer"),n("v-btn",{attrs:{flat:"",icon:""}},[n("v-icon",{staticClass:"mdi mdi-light mdi-account"})],1)],1),n("v-navigation-drawer",{attrs:{"mini-variant":e.mini,app:""},on:{"update:miniVariant":function(t){e.mini=t},"update:mini-variant":function(t){e.mini=t}},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-img",{attrs:{src:a("0647"),height:"100%"}},[n("v-list-item",{staticClass:"px-2"},[n("v-list-item-avatar",[n("v-img",{attrs:{src:a("a140")}})],1),n("v-list-item-title",{staticStyle:{color:"#a01212","font-weight":"500"}},[n("strong",[e._v("American Red Cross")])]),n("v-btn",{attrs:{icon:"","active-class":"blue"},on:{click:function(t){t.stopPropagation(),e.mini=!e.mini}}},[n("v-icon",[e._v("mdi-chevron-left")])],1)],1),n("v-list",{attrs:{nav:"",tile:"",dense:""}},[n("v-divider"),e._l(e.items,(function(t){return n("v-list-item",{key:t.title,attrs:{link:"","active-class":"active-drawer-link",dark:"",to:t.link},on:{click:t.action}},[n("v-list-item-icon",[n("v-icon",[e._v(e._s(t.icon))])],1),n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(t.title))])],1)],1)}))],2)],1)],1),n("v-main",{staticStyle:{"background-color":"rgba(70, 9, 9, 0.1)"}},[n("router-view",{attrs:{search:"search"}})],1)],1)},o=[],s=(a("7f7f"),a("6762"),a("2fdb"),a("a481"),a("d225")),r=a("b0b4"),l=a("bc3a"),c=a.n(l),d=c.a.create({baseURL:"http://ec2-34-201-149-106.compute-1.amazonaws.com:8080",headers:{"Content-type":"application/json"}}),u=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("roles")}},{key:"get",value:function(e){return d.get("/roles/".concat(e))}}]),e}(),p=new u,m=(a("c1c3"),{name:"App",data:function(){return{navDialog:!1,group:null,page_title:"",search:"",permissions:[],userRole:!1,drawer:!0,mini:!0,items:""}},methods:{logout:function(){this.$authenticated=!1,this.$session.destroy(),this.$router.replace({name:"login"})},verifyAccess:function(e){switch(e){case"modify":return!!this.permissions.includes("modifyUsers");default:return!1}},setPagePermissions:function(){var e=this,t=this.$session.get("userRole");p.get(t).then((function(t){e.permissions=t.data.permissions.map((function(e){return e.name}))})).catch((function(e){console.log(e)}))},findUserRole:function(){var e=this.$session.get("userRole");1==e&&(this.userRole=!0)},setNavLinks:function(){this.items=[{title:"Home",icon:"mdi-home-city",link:"/home",action:null},{title:"Users",icon:"mdi-account-group-outline",link:"/users",action:null},{title:"Contacts",icon:"mdi-account-group",link:"/contacts",action:null},{title:"Sign Out",icon:"mdi-logout",link:"/",action:"logout()"}]}},computed:{getPageTitle:function(){switch(this.$route.name){case"organizations":return"Partners";case"users":return"Users";case"contacts":return"Contacts";case"organization":return"Partner";default:return this.$route.name.charAt(0).toUpperCase()+this.$route.name.slice(1)}}},mounted:function(){this.setPagePermissions(),this.setNavLinks()}}),_=m,v=(a("034f"),a("2877")),f=a("6544"),h=a.n(f),g=a("7496"),b=a("40dc"),y=a("8336"),x=a("ce7e"),k=a("132d"),w=a("adda"),z=a("8860"),C=a("da13"),R=a("8270"),P=a("5d23"),O=a("34c3"),A=a("f6c4"),I=a("f774"),V=a("2fa4"),N=a("2a7f"),S=Object(v["a"])(_,i,o,!1,null,null,null),$=S.exports;h()(S,{VApp:g["a"],VAppBar:b["a"],VBtn:y["a"],VDivider:x["a"],VIcon:k["a"],VImg:w["a"],VList:z["a"],VListItem:C["a"],VListItemAvatar:R["a"],VListItemContent:P["a"],VListItemIcon:O["a"],VListItemTitle:P["b"],VMain:A["a"],VNavigationDrawer:I["a"],VSpacer:V["a"],VToolbarTitle:N["a"]});var E=a("8c4f"),D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[a("div",{staticClass:"text-h2 red--text text--darken-4"},[e._v("Northeast Florida Data Dashboard")])])],1),a("v-row",{staticClass:"text-center"},[a("v-col",{staticClass:"cols-7"},[a("router-link",{staticClass:"text-h4 grey--text text--darken-2",attrs:{to:"/contacts"}},[e._v("Contacts")]),a("router-link",{staticClass:"text-h4 grey--text text--darken-2",attrs:{to:"/organizations"}},[e._v(" | Connections")]),a("router-link",{directives:[{name:"show",rawName:"v-show",value:e.verifyAccess("modify"),expression:"verifyAccess('modify')"}],staticClass:"text-h4 grey--text text--darken-2",attrs:{to:"/users"}},[e._v(" | Users")])],1)],1)],1)},F=[],M={name:"Home",data:function(){return{permissions:[]}},beforeCreate:function(){this.$session.exists()||this.$router.push("/")},methods:{logout:function(){this.$session.destroy(),this.$router.push("/")},verifyAccess:function(e){switch(e){case"modify":return!!this.permissions.includes("modifyUsers");default:return!1}},setPagePermissions:function(){var e=this,t=this.$session.get("userRole");p.get(t).then((function(t){e.permissions=t.data.permissions.map((function(e){return e.name})),console.log(e.permissions)})).catch((function(e){console.log(e)}))}},mounted:function(){this.setPagePermissions()}},j=M,T=a("62ad"),q=a("a523"),L=a("0fd9"),U=Object(v["a"])(j,D,F,!1,null,null,null);U.exports;h()(U,{VCol:T["a"],VContainer:q["a"],VRow:L["a"]});var X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-col",{staticClass:"col cols-12"},[a("v-card",{staticClass:"pa-3 mt-8",attrs:{outlined:"",elevation:"3 text-wrap"}},[a("v-card",{staticClass:"pa-7 card-header-block",staticStyle:{"margin-top":"-40px",width:"100%"},attrs:{rounded:""}},[a("v-text-title",{staticClass:"card-header-title"},[e._v("Partners")])],1),a("v-card-text",[a("v-row",[a("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.verifyAccess("create"),expression:"verifyAccess('create')"}],staticClass:"ml-3",attrs:{fab:"",elevation:"3",small:"",color:"white"},on:{click:function(t){e.add_organization_dlg=!0}}},[a("v-icon",{staticClass:"mdi mdi-dark mdi-plus"})],1),a("v-spacer"),a("v-text-field",{staticClass:"shrink mt-3 mr-3",attrs:{label:"Search","append-icon":"mdi-magnify"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{staticClass:"text-capitalize",attrs:{headers:e.headers,search:e.search,items:e.organizations,"item-key":"id","multi-sort":""},on:{"click:row":e.nav},scopedSlots:e._u([{key:"body.append",fn:function(t){t.item;return[a("div",{staticClass:"row",staticStyle:{"padding-bottom":"20px"}},[a("div",{staticClass:"col",staticStyle:{"margin-bottom":"-25px","margin-left":"20px",padding:"5px"}},[a("JsonExcel",{staticClass:"btn btn-default",attrs:{data:e.excel_data,fields:e.excel_fields,worksheet:"My Worksheet",name:"Partners.xls"}},[a("v-btn",{attrs:{icon:"",fab:"",color:"#7F181B",large:""}},[a("v-icon",{staticClass:"mdi mdi-download"})],1)],1)],1)])]}},{key:"item.name",fn:function(t){var a=t.item;return[e._v("\n            "+e._s(a.name)+"\n          ")]}},{key:"item.address",fn:function(t){var n=t.item;return[a("address",{staticClass:"text-capitalize"},[e._v("\n              "+e._s(n.address)+"\n            ")])]}},{key:"item.county",fn:function(t){var a=t.item;return[e._v("\n          "+e._s(a.counties)+"\n        ")]}},{key:"item.manager",fn:function(t){var a=t.item;return[e._v("\n          "+e._s(a.manager)+"\n        ")]}}])})],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"700px"},model:{value:e.add_organization_dlg,callback:function(t){e.add_organization_dlg=t},expression:"add_organization_dlg"}},[a("v-card",[a("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Add a New Organization")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"8",sm:"8",md:"8"}},[a("v-text-field",{attrs:{label:"*Agency Name",required:"",rules:e.businessNameRule},model:{value:e.add_organization.name,callback:function(t){e.$set(e.add_organization,"name",t)},expression:"add_organization.name"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"4",sm:"12",md:"4"}},[a("v-text-field",{attrs:{label:"*St Number",required:"",rules:e.streetNumberRule},model:{value:e.add_organization.street_number,callback:function(t){e.$set(e.add_organization,"street_number",t)},expression:"add_organization.street_number"}})],1),a("v-col",{attrs:{cols:"6",sm:"12",md:"6"}},[a("v-text-field",{attrs:{label:"*Street Name",required:""},model:{value:e.add_organization.street_name,callback:function(t){e.$set(e.add_organization,"street_name",t)},expression:"add_organization.street_name"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"5",sm:"12",md:"5"}},[a("v-text-field",{attrs:{label:"*City",required:"",rules:e.streetNameRule},model:{value:e.add_organization.city,callback:function(t){e.$set(e.add_organization,"city",t)},expression:"add_organization.city"}})],1),a("v-col",{attrs:{cols:"3",sm:"12",md:"3"}},[a("v-select",{attrs:{required:"",items:e.states,label:"*State",rules:e.stateRule},model:{value:e.add_organization.state,callback:function(t){e.$set(e.add_organization,"state",t)},expression:"add_organization.state"}})],1),a("v-col",{attrs:{cols:"3",sm:"12",md:"3"}},[a("v-text-field",{attrs:{label:"*Zip",required:"",rules:e.zipRule},model:{value:e.add_organization.zip,callback:function(t){e.$set(e.add_organization,"zip",t)},expression:"add_organization.zip"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"4",sm:"12",md:"4"}},[a("v-text-field",{attrs:{label:"Website"},model:{value:e.add_organization.website,callback:function(t){e.$set(e.add_organization,"website",t)},expression:"add_organization.website"}})],1),a("v-col",{attrs:{cols:"3",sm:"12",md:"3"}},[a("v-text-field",{attrs:{label:"Phone",rules:e.businessPhoneRule},model:{value:e.add_organization.phone,callback:function(t){e.$set(e.add_organization,"phone",t)},expression:"add_organization.phone"}})],1),a("v-col",{attrs:{cols:"4",sm:"12",md:"4"}},[a("v-select",{attrs:{multiple:"",required:"",items:e.all_counties,rules:e.countyRule,label:"*Counties"},model:{value:e.add_organization.county,callback:function(t){e.$set(e.add_organization,"county",t)},expression:"add_organization.county"}})],1)],1),a("v-row"),a("v-row",[a("v-col",{attrs:{cols:"4",sm:"12",md:"4"}},[a("v-select",{attrs:{items:e.mou_options,required:"",label:"*MOU Partner?",rules:e.mouRule},model:{value:e.add_organization.mou,callback:function(t){e.$set(e.add_organization,"mou",t)},expression:"add_organization.mou"}})],1),a("v-col",{attrs:{cols:"5",sm:"12",md:"5"}},[a("v-select",{attrs:{multiple:"",required:"",items:e.all_lines_of_business,rules:e.lobRule,label:"*Line of Business"},model:{value:e.add_organization.line_of_business,callback:function(t){e.$set(e.add_organization,"line_of_business",t)},expression:"add_organization.line_of_business"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"5",sm:"12",md:"5"}},[a("v-select",{attrs:{multiple:"",required:"",items:e.all_arc_relationships,rules:e.arcFunctionRule,label:"*Arc Relationships"},model:{value:e.add_organization.arc_relationship,callback:function(t){e.$set(e.add_organization,"arc_relationship",t)},expression:"add_organization.arc_relationship"}})],1),a("v-col",{attrs:{cols:"5",sm:"12",md:"5"}},[a("v-select",{attrs:{multiple:"",required:"",items:e.all_agency_types,rules:e.agencyRule,label:"*Agency Types"},model:{value:e.add_organization.agency_type,callback:function(t){e.$set(e.add_organization,"agency_type",t)},expression:"add_organization.agency_type"}})],1)],1),a("v-row",{staticClass:"mt-3"},[a("v-col",{attrs:{cols:"5",sm:"12",md:"5"}},[a("v-textarea",{attrs:{rows:"2",label:"Preferred Method of Contact per RM"}})],1),a("v-col",{attrs:{cols:"5",sm:"12",md:"5"}},[a("v-textarea",{attrs:{rows:"2",required:"",label:"*Additional Notes",rules:e.serviceDescriptionRule}})],1)],1)],1),a("small",[e._v("*Indicates required field")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.add_organization_dlg=!1}}},[e._v("\n          Close\n        ")]),a("v-btn",{attrs:{disabled:!e.valid,color:"blue darken-1",text:""},on:{click:e.addOrganization}},[e._v("\n          Save\n        ")])],1)],1)],1)],1)],1)},B=[],W=(a("ac6a"),function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("organizations")}},{key:"get",value:function(e){return d.get("/organizations/".concat(e))}},{key:"create",value:function(e){return d.post("/organizations",e)}},{key:"update",value:function(e,t){return d.put("/organizations/".concat(e),t)}},{key:"delete",value:function(e){return d.delete("/organizations/".concat(e))}},{key:"deleteAll",value:function(){return d.delete("/organizations")}}]),e}()),H=new W,Y=a("f2d9"),Z=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("counties")}},{key:"get",value:function(e){return d.get("/counties/".concat(e))}},{key:"getByName",value:function(e){return d.get("/counties/name/".concat(e))}},{key:"create",value:function(e){return d.post("/counties",e)}},{key:"update",value:function(e,t){return d.put("/counties/".concat(e),t)}},{key:"delete",value:function(e){return d.delete("/counties/".concat(e))}},{key:"deleteAll",value:function(){return d.delete("/counties")}}]),e}(),K=new Z,J=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("lines_of_business")}},{key:"get",value:function(e){return d.get("/lines_of_business/".concat(e))}},{key:"getByName",value:function(e){return d.get("/lines_of_business/name/".concat(e))}},{key:"create",value:function(e){return d.post("/lines_of_business",e)}},{key:"update",value:function(e,t){return d.put("/lines_of_business/".concat(e),t)}},{key:"delete",value:function(e){return d.delete("/lines_of_business/".concat(e))}},{key:"deleteAll",value:function(){return d.delete("/counties")}}]),e}(),G=new J,Q=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("arc_relationships")}},{key:"get",value:function(e){return d.get("/arc_relationships/".concat(e))}},{key:"getByName",value:function(e){return d.get("/arc_relationships/name/".concat(e))}},{key:"create",value:function(e){return d.post("/arc_relationships",e)}},{key:"update",value:function(e,t){return d.put("/arc_relationships/".concat(e),t)}},{key:"delete",value:function(e){return d.delete("/arc_relationships/".concat(e))}},{key:"deleteAll",value:function(){return d.delete("/arc_relationships")}}]),e}(),ee=new Q,te=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("agency_types")}},{key:"get",value:function(e){return d.get("/agency_types/".concat(e))}},{key:"getByName",value:function(e){return d.get("/agency_types/name/".concat(e))}},{key:"create",value:function(e){return d.post("/agency_types",e)}},{key:"update",value:function(e,t){return d.put("/counties/".concat(e),t)}},{key:"delete",value:function(e){return d.delete("/agency_types/".concat(e))}},{key:"deleteAll",value:function(){return d.delete("/agency_types")}}]),e}(),ae=new te,ne=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("phones")}},{key:"get",value:function(e){return d.get("/phones/".concat(e))}},{key:"create",value:function(e){return d.post("/phones",e)}},{key:"update",value:function(e,t){return d.put("/phones/".concat(e),t)}},{key:"delete",value:function(e){return d.delete("/phones/".concat(e))}},{key:"deleteAll",value:function(){return d.delete("/phones")}}]),e}(),ie=new ne,oe=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("organization_counties")}},{key:"get",value:function(e){return d.get("/organization_counties/".concat(e))}},{key:"create",value:function(e){return d.post("/organization_counties",e)}},{key:"update",value:function(e,t,a){return d.put("/organization_counties/".concat(e,"/").concat(t),a)}},{key:"deleteOrganizationCounties",value:function(e){return d.delete("/organization_counties/".concat(e))}},{key:"delete",value:function(e,t){return d.delete("/organization_counties/".concat(e,"/").concat(t))}},{key:"deleteAll",value:function(){return d.delete("/organization_counties")}}]),e}(),se=new oe,re=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("organization_lines_of_business")}},{key:"get",value:function(e){return d.get("/organization_lines_of_business/".concat(e))}},{key:"create",value:function(e){return d.post("/organization_lines_of_business",e)}},{key:"update",value:function(e,t,a){return d.put("/organization_lines_of_business/".concat(e,"/").concat(t),a)}},{key:"deleteOrganizationLinesOfBusiness",value:function(e){return d.delete("/organization_lines_of_business/".concat(e))}},{key:"delete",value:function(e,t){return d.delete("/organization_lines_of_business/".concat(e,"/").concat(t))}},{key:"deleteAll",value:function(){return d.delete("/organization_lines_of_business")}}]),e}(),le=new re,ce=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("organization_arc_relationships")}},{key:"get",value:function(e){return d.get("/organization_arc_relationships/".concat(e))}},{key:"create",value:function(e){return d.post("/organization_arc_relationships",e)}},{key:"update",value:function(e,t,a){return d.put("/organization_arc_relationships/".concat(e,"/").concat(t),a)}},{key:"deleteOrganizationArcRelationships",value:function(e){return d.delete("/organization_arc_relationships/".concat(e))}},{key:"delete",value:function(e,t){return d.delete("/organization_arc_relationships/".concat(e,"/").concat(t))}},{key:"deleteAll",value:function(){return d.delete("/organization_arc_relationships")}}]),e}(),de=new ce,ue=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("organization_agency_types")}},{key:"get",value:function(e){return d.get("/organization_agency_types/".concat(e))}},{key:"create",value:function(e){return d.post("/organization_agency_types",e)}},{key:"update",value:function(e,t,a){return d.put("/organization_agency_types/".concat(e,"/").concat(t),a)}},{key:"deleteOrganizationAgencyTypes",value:function(e){return d.delete("/organization_agency_types/".concat(e))}},{key:"delete",value:function(e,t){return d.delete("/organization_counties/".concat(e,"/").concat(t))}},{key:"deleteAll",value:function(){return d.delete("/organization_agency_types")}}]),e}(),pe=new ue,me={name:"organizations",components:{JsonExcel:Y["a"]},data:function(){return{isOwner:!1,permissions:[],toolbar_title:"connections",valid:!0,businessNameRule:[function(e){return!!e||"A business name is required"}],contactNameRule:[function(e){return!!e||"A contact name is required"}],streetNumberRule:[function(e){return/^[0-9]+$/.test(e)||"The street number is required and must only be numeric"}],streetNameRule:[function(e){return!!e||"A street name is required"}],cityRule:[function(e){return!!e||"A city must be selected"}],stateRule:[function(e){return!!e||"A state must be selected"}],countyRule:[function(e){return!!e||"At least one county must be selected"}],zipRule:[function(e){return/(^\d{5}$)|(^\d{9}$)|(^\d{5}-\d{4}$)/.test(e)||"Please, input a valid zip code"}],businessPhoneRule:[function(e){return/^((1-)?\d{3}-\d{3}-\d{4}){0,1}$/.test(e)||"Please, input a valid phone number with format XXX-XXX-XXXX"}],email:[function(e){return/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e)||"Please, input a valid email address"}],mouRule:[function(e){return!!e||"MOU must be selected"}],lobRule:[function(e){return!!e||"A line of business must be selected"}],arcFunctionRule:[function(e){return!!e||"ARC type must be selected"}],serviceDescriptionRule:[function(e){return!!e||"Please provide a service description"}],agencyRule:[function(e){return!!e||"An agency type must be selected"}],all_counties:[],organization_counties:[],unmapped_counties:[],organization_state:"",states:["AK","AL","AR","AS","AZ","CA","CO","CT","DC","DE","FL","GA","GU","HI","IA","ID","IL","IN","KS","KY","LA","MA","MD","ME","MI","MN","MO","MP","MS","MT","NC","ND","NE","NH","NJ","NM","NV","NY","OH","OK","OR","PA","PR","RI","SC","SD","TN","TX","UM","UT","VA","VI","VT","WA","WI","WV","WY"],mou_options:["Yes","No","Maybe"],excel_fields:{},excel_data:[],all_lines_of_business:[],organization_lines_of_business:[],unmapped_lines_of_business:[],all_arc_relationships:[],organization_arc_relationships:[],unmapped_arc_relationships:[],all_agency_types:[],organization_agency_types:[],unmapped_agency_types:[],json_meta:[[{key:"charset",value:"utf-8"}]],filters:{partners:!1,relationships:!0,my_assignments:!1},add_organization_dlg:!1,search:"",organizations:[],orgCache:[],organization_types:["Relationship","Partner"],relationship_statuses:["Hot","Warm","Cold"],add_organization:{name:"",street_number:"",street_name:"",city:"",state:"",zip:"",county:"",website:"",mou:"",contact_protocol:"",last_contact:"",service:"",notes:"",action:"",phone:"",line_of_business:"",agency_type:"",arc_relationship:""},type:"",critical_relationship_information:"",services:"",status:""}},computed:{headers:function(){var e=this,t=[{text:"Name",value:"name",class:"red--text text--darken-3"},{text:"Address",value:"address",class:"red--text text--darken-3"},{text:"City",value:"city",class:"red--text text--darken-3"},{text:"Zip",value:"zip",class:"red--text text--darken-3"},{text:"County",value:"county_display",class:"red--text text--darken-3"},{text:"Manager",value:"manager",class:"red--text text--darken-3"},{text:"MOU",value:"mou",class:"red--text text--darken-3"},{text:"Line of Business",value:"lob",class:"red--text text--darken-3"},{text:"Agency Type",value:"type",class:"red--text text--darken-3"},{text:"Relationship",value:"arc_rel",class:"red--text text--darken-3"},{text:"Services",value:"service",class:"red--text text--darken-3"}];return t.forEach((function(t){e.excel_fields[t.text]=t.value})),t}},methods:{nav:function(e){this.$router.push({path:"organization/"+e.id})},addOrganization:function(){var e=this,t={name:this.add_organization.name,street_number:this.add_organization.street_number,street_name:this.add_organization.street_name,city:this.add_organization.city,state:this.add_organization.state,zip:this.add_organization.zip,website:this.add_organization.website,mou:this.add_organization.mou,contact_protocol:this.add_organization.contact_protocol,last_contact:this.add_organization.last_contact,service:this.add_organization.service,notes:this.add_organization.notes,action:this.add_organization.action};H.create(t).then((function(t){var a=t.data.id;ie.create({organizationId:a,number:e.add_organization.phone,isPrimary:!0}).catch((function(e){console.log(e)})),e.add_organization.county.forEach((function(t){e.unmapped_counties.filter((function(e){e.name==t&&se.create({organizationId:a,countyId:e.id}).then().catch((function(e){console.log(e)}))}))})),e.add_organization.line_of_business.forEach((function(t){e.unmapped_lines_of_business.filter((function(e){e.name==t&&le.create({organizationId:a,lineOfBusinessId:e.id}).then().catch((function(e){console.log(e)}))}))})),e.add_organization.arc_relationship.forEach((function(t){e.unmapped_arc_relationships.filter((function(e){e.name==t&&de.create({organizationId:a,arcRelationshipId:e.id}).then().catch((function(e){console.log(e)}))}))})),e.add_organization.agency_type.forEach((function(t){e.unmapped_agency_types.filter((function(e){e.name==t&&pe.create({organizationId:a,agencyTypeId:e.id})}))})),e.$router.push("organization/"+a)})).catch((function(e){console.log(e)})),this.add_organization_dlg=!1,this.retrieveOrganizations()},retrieveOrganizations:function(){var e=this;H.getAll().then((function(t){e.orgCache=t.data,e.orgCache.forEach((function(e){if(null!==e.relationship_managers&&0!==e.relationship_managers.length){e.address=e.street_number+" "+e.street_name+"\n"+e.city+", "+e.state+" "+e.zip;var t=e.relationship_managers[0].person,a=t.first_name+" "+t.last_name;e.manager=a;var n="";t.phones.forEach((function(e){n+=e.number+" \n"}));var i="";t.emails.forEach((function(e){i+=e.address+" \n"})),e.manager=a+"\n"+n+"\n"+i,e.managerId=t.id}else e.manager="Not yet assigned",e.managerId=0})),e.organizations=t.data,e.organizations.forEach((function(e){if(e.address=e.street_number+" "+e.street_name,e.county_display="",e.counties.forEach((function(t){e.county_display+=t.name+", "})),e.county_display=e.county_display.substr(0,e.county_display.length-2),e.lob="",e.line_of_businesses.forEach((function(t){e.lob+=t.name+"\n"})),e.lob=e.lob.substr(0,e.lob.length-1),e.type="",e.agency_types.forEach((function(t){e.type+=t.name+"\n"})),e.type=e.type.substr(0,e.type.length-1),e.arc_rel="",e.arc_relationships.forEach((function(t){e.arc_rel+=t.name+"\n"})),e.arc_rel=e.arc_rel.substr(0,e.arc_rel.length-1),null!==e.relationship_managers&&0!==e.relationship_managers.length){var t=e.relationship_managers[0].person,a=t.first_name+" "+t.last_name,n="";t.phones.forEach((function(e){n+=e.number+" \n"}));var i="";t.emails.forEach((function(e){i+=e.address+" \n"})),e.manager=a+"\n"+n+"\n"+i,e.managerId=t.id}else e.manager="Not yet assigned",e.managerId=0;null!==e.partner?e.services=e.partner.services:null!==e.relationship&&(e.status=e.relationship.status)})),e.excel_data=e.organizations})).catch((function(e){console.log(e.message)}))},populateCounties:function(){var e=this;K.getAll().then((function(t){e.all_counties=t.data.map((function(e){return e.name})),e.unmapped_counties=t.data})).catch((function(e){console.log(e)}))},populateLinesOfBusiness:function(){var e=this;G.getAll().then((function(t){e.all_lines_of_business=t.data.map((function(e){return e.name})),e.unmapped_lines_of_business=t.data})).catch((function(e){console.log(e)}))},populateArcRelationships:function(){var e=this;ee.getAll().then((function(t){e.all_arc_relationships=t.data.map((function(e){return e.name})),e.unmapped_arc_relationships=t.data})).catch((function(e){console.log(e)}))},populateAgencyTypes:function(){var e=this;ae.getAll().then((function(t){e.all_agency_types=t.data.map((function(e){return e.name})),e.unmapped_agency_types=t.data})).catch((function(e){console.log(e)}))},filterOrganizations:function(){var e=this;this.organizations=this.orgCache.filter((function(t){var a=!e.filters["my_assignments"]||"5693164c-5da4-4d07-ad24-d9f39befc823"==t.managerId;return(e.filters["partners"]&&null!==t.partner&&a)|(e.filters["relationships"]&&null!==t.relationship&&a)})),this.updateExcelFields()},verifyAccess:function(e){switch(e){case"create":return!!this.permissions.includes("createOrgs");default:return!1}},setPagePermissions:function(){var e=this,t=this.$session.get("userRole");p.get(t).then((function(t){e.permissions=t.data.permissions.map((function(e){return e.name})),console.log(e.permissions)})).catch((function(e){console.log(e)}))}},mounted:function(){this.retrieveOrganizations(),this.populateCounties(),this.populateArcRelationships(),this.populateLinesOfBusiness(),this.populateAgencyTypes(),this.setPagePermissions()}},_e=me,ve=a("b0af"),fe=a("99d9"),he=a("8fea"),ge=a("169a"),be=a("4bd4"),ye=a("b974"),xe=a("8654"),ke=a("a844"),we=Object(v["a"])(_e,X,B,!1,null,null,null),ze=we.exports;h()(we,{VBtn:y["a"],VCard:ve["a"],VCardActions:fe["a"],VCardText:fe["c"],VCardTitle:fe["d"],VCol:T["a"],VContainer:q["a"],VDataTable:he["a"],VDialog:ge["a"],VForm:be["a"],VIcon:k["a"],VRow:L["a"],VSelect:ye["a"],VSpacer:V["a"],VTextField:xe["a"],VTextarea:ke["a"]});var Ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("span",{staticClass:"hidden-md-and-down"},[a("div",{staticClass:"item-title"},[e._v("\n          "+e._s(e.organization.name)+"\n        "),e.verifyAccess("update")?a("v-btn",{staticClass:"ml-3",attrs:{icon:""},on:{click:function(t){return e.openDialog("Edit")}}},[a("v-icon",{staticClass:"mdi mdi-pencil",staticStyle:{color:"#9F9FA3"},attrs:{small:""}})],1):e._e()],1)]),a("v-row",[a("v-col",{attrs:{cols:"9"}},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-row",[a("v-col",{attrs:{cols:"4"}},[a("v-card",{staticClass:"pa-1",staticStyle:{"background-color":"#fff"},attrs:{elevation:"3",shaped:""}},[a("v-card",{staticClass:"pa-3",staticStyle:{"background-color":"#6D6E70"},attrs:{shaped:""}},[a("v-card-text",[a("span",{staticClass:"sub-data"},[e._v("\n                "+e._s(e.organization.street_number)+" "+e._s(e.organization.street_name)+"\n                "+e._s(e.organization.city)+", "+e._s(e.organization.state)+" "+e._s(e.organization.zip)+"\n                "),a("br"),e._l(e.organization.counties,(function(t){return a("span",{key:t.id},[e._v("\n                  "+e._s(t.name)+"\n                ")])})),a("br"),a("a",{staticStyle:{color:"#C4DFF6"},attrs:{href:e.organization.website}},[e._v("\n                  "+e._s(e.organization.website)+"\n                ")]),""!=e.organization.phones?a("span",[e._v(" | "+e._s(e.organization.phones[0].number))]):e._e()],2)])],1)],1),a("v-card",{staticClass:"pa-1 mt-15"},[a("v-card",{staticClass:"card-header-block pa-3",attrs:{rounded:""}},[a("v-card-text",[a("div",{staticClass:"card-header-title"},[e._v("Details")]),a("span",{staticClass:"card-header-subtitle"},[e._v(e._s(e.organization.service))])])],1),a("v-card-text",[a("div",{staticClass:"card-label"},[e._v("National DCS MOU Partner: ")]),e._v(" "+e._s(e.organization.mou)+"\n\n                    "),a("div",{staticClass:"card-label"},[e._v("Lines of Business: ")]),e._l(e.organization.line_of_businesses,(function(t){return a("div",{key:t.id},[e._v("\n                      "+e._s(t.name)+"\n                    ")])})),a("div",{staticClass:"card-label"},[e._v("ARC Relationship: ")]),e._l(e.organization.arc_relationships,(function(t){return a("div",{key:t.id},[e._v("\n                      "+e._s(t.name)+"\n                    ")])})),a("div",{staticClass:"card-label"},[e._v("Agency Types: ")]),e._l(e.organization.agency_types,(function(t){return a("div",{key:t.id},[e._v("\n                      "+e._s(t.name)+"\n                    ")])}))],2)],1)],1),a("v-col",{attrs:{cols:"8"}},[a("v-card",{staticClass:"pl-1 mt-1",staticStyle:{"background-color":"#7F181B"},attrs:{elevation:"1"}},[a("v-card",{directives:[{name:"scroll",rawName:"v-scroll"}],staticClass:"pa-3",staticStyle:{"background-color":"#6D6E70"},attrs:{"min-height":"400px"}},[a("v-card-text",[a("div",{staticClass:"card-header-title"},[e._v("Important Notes")]),a("div",{staticClass:"card-label-light"},[e._v("\n                        Last Contact Made:\n                        "),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.verifyAccess("update"),expression:"verifyAccess('update')"}],staticStyle:{color:"#C4DFF6"},attrs:{icon:""},on:{click:function(t){e.contact_note_dlg=!0}}},[a("v-icon",{staticClass:"mdi mdi-comment-outline",attrs:{small:""}})],1)],1),a("div",{staticClass:"sub-data"},[e._v(e._s(e.organization.last_contact))]),a("div",{staticClass:"card-label-light"},[e._v("\n                        Opportunities/Actions Needed to Improve Profile:\n                        "),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.verifyAccess("update"),expression:"verifyAccess('update')"}],staticStyle:{color:"#C4DFF6"},attrs:{icon:""},on:{click:function(t){e.op_action_dlg=!0}}},[a("v-icon",{staticClass:"mdi mdi-comment-outline",attrs:{small:""}})],1)],1),a("div",{staticClass:"sub-data"},[e._v(e._s(e.organization.action))]),a("div",{staticClass:"card-label-light"},[e._v("\n                        Note:\n                        "),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.verifyAccess("update"),expression:"verifyAccess('update')"}],staticStyle:{color:"#C4DFF6"},attrs:{icon:""},on:{click:function(t){e.add_note_dlg=!0}}},[a("v-icon",{staticClass:"mdi mdi-comment-outline",attrs:{small:""}})],1)],1),a("div",{staticClass:"sub-data"},[e._v(e._s(e.organization.notes))])])],1)],1)],1)],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-card",{staticClass:"pa-1 mt-15",attrs:{elevation:"3"}},[a("v-card",{staticClass:"card-header-block pa-3",attrs:{rounded:""}},[a("v-card-text",[a("div",{staticClass:"card-header-title"},[e._v("Files")])])],1),a("v-card-text",[a("v-row",[a("v-text-field",{staticClass:"shrink mr-3",attrs:{label:"Search","append-icon":"mdi-magnify",dense:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-spacer"),a("v-btn",{staticClass:"ml-3",attrs:{fab:"",elevation:"3",small:"",color:"white"},on:{click:function(t){e.upload_file_dlg=!0}}},[a("v-icon",{staticClass:"mdi mdi-dark mdi-upload"})],1)],1),a("v-data-table",{attrs:{headers:e.headers,search:e.search,items:e.files,"item-key":"id","multi-sort":""},scopedSlots:e._u([{key:"item.name",fn:function(t){return[a("p",[e._v(e._s(t.item.name))])]}},{key:"item.date",fn:function(t){return[a("p",[e._v(e._s(t.item.date))])]}},{key:"item.author",fn:function(t){return[a("p",[e._v(e._s(t.item.author))])]}},{key:"item.download",fn:function(t){return[a("v-btn",{attrs:{icon:"",small:""},on:{click:function(a){return e.downloadFile(t)}}},[a("v-icon",{attrs:{color:"orange darken-4"}},[e._v("\n                        mdi-arrow-down\n                      ")])],1)]}},{key:"item.remove",fn:function(t){return[a("v-btn",{attrs:{icon:"",small:""},on:{click:function(a){return e.deleteFile(t)}}},[a("v-icon",{staticClass:"mdi mdi-trash-can-outline",attrs:{color:"grey"}})],1)]}}])})],1)],1)],1)],1)],1),a("v-col",{attrs:{cols:"3"}},[a("v-row",[a("v-col",[a("v-card",{staticClass:"pl-1 mt-14",staticStyle:{"background-color":"#7F181B"},attrs:{elevation:"1",rounded:""}},[a("v-card",{staticClass:"card-header-block pa-3",attrs:{"min-height":"175px"}},[a("v-card-text",[a("div",{staticClass:"card-header-title"},[e._v("Contact\n                    "),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.verifyAccess("update"),expression:"verifyAccess('update')"}],staticStyle:{color:"#7F181B"},attrs:{icon:""}},[a("v-icon",{staticClass:"mdi mdi-account-plus",on:{click:function(t){return e.openDialog("Add POC")}}})],1)],1),a("div",{staticClass:"card-header-subtitle"},[e._v(e._s(e.organization.contact_protocol))]),e._l(e.organization_points_of_contact,(function(t){return a("div",{key:t.id},[a("div",{ref:"first_name_"+t.personId,refInFor:!0},[a("span",{staticClass:"data"},[e._v(e._s(t.first_name)+" "+e._s(t.last_name))]),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.verifyAccess("update"),expression:"verifyAccess('update')"}],staticClass:"pl-3",attrs:{icon:"",small:""},on:{click:function(a){return e.openDialog("Edit POC",t.id)}}},[a("v-icon",{staticClass:"mdi mdi-pencil",staticStyle:{color:"#C4DFF6"},attrs:{small:""}})],1)],1),e._l(t.phones,(function(t){return a("span",{key:t.number,staticClass:"sub-data"},[a("span",{ref:"phone_"+t.id,refInFor:!0},[1==t.isPrimary?a("span",[e._v("\n                    "+e._s(t.number)+"(P)\n                  ")]):e._e()])])})),e._l(t.phones,(function(t){return a("span",{staticClass:"sub-data"},[a("span",{ref:"phone_"+t.id,refInFor:!0},[0==t.isPrimary?a("span",[e._v("\n                   | "+e._s(t.number)+"\n                  ")]):e._e()])])})),e._l(t.emails,(function(t){return a("span",{staticClass:"sub-data"},[a("span",{ref:"email_"+t.id,refInFor:!0},[1==t.isPrimary?a("span",[a("br"),e._v(e._s(t.address)+"(P)\n                  ")]):e._e()])])})),e._l(t.emails,(function(t){return a("span",{staticClass:"sub-data"},[a("span",{ref:"email_"+t.id,refInFor:!0},[0==t.isPrimary?a("span",[e._v("\n                     | "+e._s(t.address)+"\n                  ")]):e._e()])])}))],2)}))],2)],1)],1),a("v-card",{staticClass:"pl-1 mt-5",staticStyle:{"background-color":"#7F181B"},attrs:{elevation:"1",rounded:""}},[a("v-card",{staticClass:"pa-3",staticStyle:{"background-color":"#6D6E70"},attrs:{"min-height":"175px"}},[a("v-card-text",[a("div",{staticClass:"card-header-title"},[e._v("Relationship Manager\n                    "),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.verifyAccess("reassign"),expression:"verifyAccess('reassign')"}],staticStyle:{color:"#7F181B"},attrs:{icon:""}},[a("v-icon",{staticClass:"mdi mdi-account-plus",on:{click:function(t){return e.openDialog("Add RM")}}})],1)],1),e._l(e.organization_relationship_managers,(function(t){return a("div",{key:t.id},[a("div",{ref:"relationship_manager_"+t.personId,refInFor:!0,staticClass:"data"},[e._v("\n                      "+e._s(t.person.first_name)+" "+e._s(t.person.last_name)+"\n                      "),e.verifyAccess("reassign")?a("v-btn",{staticStyle:{color:"#C4DFF6"},attrs:{icon:""},on:{click:function(a){return e.openDialog("Remove RM",t.person.id)}}},[a("v-icon",{staticClass:"mdi mdi-minus",attrs:{small:""}})],1):e._e()],1),e._l(t.person.phones,(function(t){return a("div",{key:t.number,staticClass:"sub-data"},[e._v(e._s(t.number))])})),e._l(t.person.emails,(function(t){return a("div",{key:t.address,staticClass:"sub-data"},[e._v(" "+e._s(t.address))])}))],2)}))],2)],1)],1)],1)],1)],1)],1),a("v-row",[a("v-col",{staticClass:"hidden-md-and-up",attrs:{cols:"12"}},[a("v-card",[a("v-toolbar",{attrs:{color:"grey"}},[a("v-toolbar-title",{staticClass:"white--text"},[e.verifyAccess("update")?a("span",[a("a",{staticClass:"btn text-md-h2 text-sm-h5 text-capitalize",on:{click:function(t){return e.openDialog("Edit")}}},[e._v("\n                  "+e._s(e.organization.name)+"\n                ")]),a("br")]):a("span",{staticClass:"text-md-h2 text-sm-h5 text-capitalize"},[e._v("\n                  "+e._s(e.organization.name)),a("br")])])],1),a("v-card-title",[a("v-card-subtitle",[a("a",{attrs:{href:e.organization.website}},[a("span",{staticStyle:{color:"#C4DFF6"}},[e._v(" "+e._s(e.organization.website)+" ")])]),""!=e.organization.phones?a("span",[a("br"),e._v(" "+e._s(e.organization.phones[0].number))]):e._e(),a("br"),e._v("\n              "+e._s(e.organization.street_number)+" "+e._s(e.organization.street_name)+"\n              "+e._s(e.organization.city)+", "+e._s(e.organization.state)+" "+e._s(e.organization.zip)+"\n              "),a("br"),e._l(e.organization.counties,(function(t){return a("span",{key:t.id},[e._v("\n                "+e._s(t.name)+"\n              ")])}))],2)],1),a("v-divider"),a("v-card-title",[e._v("Notes")]),a("v-card-text",[e.verifyAccess("update")?a("span",[a("a",{staticClass:"btn font-weight-bold blue-grey--text",on:{click:function(t){e.contact_note_dlg=!0}}},[a("strong",[e._v("Last Contact Made: ")])])]):a("span",[a("strong",[e._v("\n                 Last Contact Made:\n              ")])]),e._v("\n            "+e._s(e.organization.last_contact)),a("br"),e.verifyAccess("update")?a("span",[a("a",{staticClass:"btn font-weight-bold blue-grey--text",on:{click:function(t){e.op_action_dlg=!0}}},[e._v("\n               Opportunities/Actions Needed to Improve Profile:\n             ")])]):a("span",[a("strong",[e._v("\n               Opportunities/Actions Needed to Improve Profile:\n              ")])]),e._v("\n            "+e._s(e.organization.action)),a("br"),e.verifyAccess("update")?a("span",[a("a",{staticClass:"btn font-weight-bold blue-grey--text",on:{click:function(t){e.add_note_dlg=!0}}},[a("strong",[e._v("Note: ")])])]):a("span",[a("strong",[e._v("\n                 Note:\n               ")])]),e._v("\n            "+e._s(e.organization.notes)+"\n          ")]),a("v-divider"),a("v-card-title",[e._v("Details")]),a("v-card-text",[a("strong",[e._v("National DCS MOU Partner: ")]),e._v(" "+e._s(e.organization.mou)),a("br"),a("strong",[e._v("Organization Service: ")]),e._v(" "+e._s(e.organization.service)),a("br"),a("strong",[e._v("Lines of Business: ")]),a("br"),e._l(e.organization.line_of_businesses,(function(t){return a("span",{key:t.id},[e._v("\n                      "+e._s(t.name)+"\n                  ")])})),a("br"),e._v(" ARC Relationship:\n            "),e._l(e.organization.arc_relationships,(function(t){return a("span",{key:t.id},[e._v("\n                      "+e._s(t.name)+"\n                  ")])})),a("br"),a("strong",[e._v("Agency Types: ")]),e._l(e.organization.agency_types,(function(t){return a("span",{key:t.id},[e._v("\n                      "+e._s(t.name)+"\n                  ")])})),a("br"),a("strong",[e._v("Service: ")]),e._v("\n            "+e._s(e.organization.service)+"\n          ")],2),a("v-divider"),a("v-card-title",[e._v("Contacts")]),a("v-card-text",[a("div",[a("strong",[e._v("Organization Contact Protocol:"),a("br")]),e._v(" "+e._s(e.organization.contact_protocol)),a("br"),a("a",{directives:[{name:"show",rawName:"v-show",value:e.verifyAccess("update"),expression:"verifyAccess('update')"}],staticClass:"btn font-weight-bold blue-grey--text",on:{click:function(t){return e.openDialog("Add POC")}}},[e._v("\n              Add New Point of Contact\n            ")])]),e._l(e.organization_points_of_contact,(function(t){return a("div",{key:t.id},[a("a",{staticClass:"btn font-weight-bold blue-grey--text",on:{click:function(a){return e.openDialog("Edit POC",t.id)}}},[a("span",{ref:"first_name_"+t.personId,refInFor:!0},[e._v(e._s(t.first_name)+" ")]),a("span",{ref:"last_name_"+t.personId,refInFor:!0},[e._v(e._s(t.last_name)+" ")])]),e._l(t.phones,(function(t){return a("span",{key:t.number,staticClass:"font-weight-thin"},[a("span",{ref:"phone_"+t.id,refInFor:!0},[1==t.isPrimary?a("span",[a("br"),e._v(e._s(t.number)+"(P)\n                    ")]):e._e()])])})),e._l(t.phones,(function(t){return a("span",{staticClass:"font-weight-thin"},[a("span",{ref:"phone_"+t.id,refInFor:!0},[0==t.isPrimary?a("span",[e._v("\n                     | "+e._s(t.number)+"\n                    ")]):e._e()])])})),e._l(t.emails,(function(t){return a("span",{staticClass:"font-weight-thin"},[a("span",{ref:"email_"+t.id,refInFor:!0},[1==t.isPrimary?a("span",[a("br"),e._v(e._s(t.address)+"(P)\n                    ")]):e._e()])])})),e._l(t.emails,(function(t){return a("span",{staticClass:"font-weight-thin"},[a("span",{ref:"email_"+t.id,refInFor:!0},[0==t.isPrimary?a("span",[e._v("\n                       | "+e._s(t.address)+"\n                    ")]):e._e()])])}))],2)}))],2),a("v-divider"),a("v-card-title",[e._v("Relationship Manager")]),a("v-card-text",[a("div",[a("a",{directives:[{name:"show",rawName:"v-show",value:e.verifyAccess("reassign"),expression:"verifyAccess('reassign')"}],staticClass:"btn font-weight-bold blue-grey--text",on:{click:function(t){return e.openDialog("Add RM")}}},[e._v("\n                Add an Organization Manager\n              ")])]),e._l(e.organization_relationship_managers,(function(t){return a("div",{key:t.id},[e.verifyAccess("reassign")?a("a",{staticClass:"btn font-weight-bold blue-grey--text",on:{click:function(a){return e.openDialog("RM",t.personId)}}},[a("div",{staticClass:"font-weight-black mt-3"},[a("strong",[a("span",{ref:"relationship_manager_"+t.personId,refInFor:!0},[e._v("\n                      "+e._s(t.person.first_name)+" "+e._s(t.person.last_name)+" (Relationship Manager)\n                    ")])])])]):a("span",{staticClass:"btn font-weight-bold blue-grey--text"},[a("div",{staticClass:"font-weight-black mt-3"},[a("strong",[a("span",{ref:"relationship_manager_"+t.personId,refInFor:!0},[e._v("\n                      "+e._s(t.person.first_name)+" "+e._s(t.person.last_name)+" (Relationship Manager)\n                    ")])])])]),e._l(t.person.phones,(function(t){return a("div",{key:t.number,staticClass:"font-weight-thin"},[e._v(e._s(t.number))])})),e._l(t.person.emails,(function(t){return a("div",{key:t.address,staticClass:"font-weight-thin"},[e._v(" "+e._s(t.address))])}))],2)}))],2)],1)],1)],1),a("POCDialog",{attrs:{poc_id:e.update_poc_id,poc_title:e.poc_dlg_title,poc_dlg_action:e.poc_dlg_action},model:{value:e.showPOCDialog,callback:function(t){e.showPOCDialog=t},expression:"showPOCDialog"}}),a("RelationshipManagerDialog",{attrs:{all_relationship_managers:e.all_relationship_managers,current_relationship_manager_id:e.current_relationship_manager_id,rm_title:e.rm_dlg_title,rm_dlg_action:e.rm_dlg_action,relationship_manager:e.current_relationship_manager},model:{value:e.showRMDialog,callback:function(t){e.showRMDialog=t},expression:"showRMDialog"}}),a("v-dialog",{attrs:{"content-class":"small-dlg"},model:{value:e.delete_relationship_manager_dialog,callback:function(t){e.delete_relationship_manager_dialog=t},expression:"delete_relationship_manager_dialog"}},[a("v-card",[a("v-card-text",[e._v("\n          Are you sure you want to remove manager from this assignment?\n        ")]),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"red text-darken-1"},on:{click:e.deleteRelationshipManager}},[e._v("\n            Yes\n          ")]),a("v-btn",{attrs:{text:"",color:"blue text-darken-1"},on:{click:function(t){e.delete_relationship_manager_dialog=!1}}},[e._v("\n            No\n          ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"400px"},model:{value:e.add_note_dlg,callback:function(t){e.add_note_dlg=t},expression:"add_note_dlg"}},[a("v-card",[a("v-form",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Organization Note")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-textarea",{attrs:{label:"Notes"},model:{value:e.organization.notes,callback:function(t){e.$set(e.organization,"notes",t)},expression:"organization.notes"}})],1)],1),a("v-card-actions",[a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.add_note_dlg=!1}}},[e._v("\n                Close\n              ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.updateOrganization}},[e._v("\n                Save\n              ")])],1)],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"300px"},model:{value:e.contact_note_dlg,callback:function(t){e.contact_note_dlg=t},expression:"contact_note_dlg"}},[a("v-card",[a("v-form",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Last Contact Made")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-text-field",{attrs:{label:"Last Contact"},model:{value:e.organization.last_contact,callback:function(t){e.$set(e.organization,"last_contact",t)},expression:"organization.last_contact"}})],1)],1),a("v-card-actions",[a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.contact_note_dlg=!1}}},[e._v("\n                Close\n              ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.updateOrganization}},[e._v("\n                Save\n              ")])],1)],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"400px"},model:{value:e.op_action_dlg,callback:function(t){e.op_action_dlg=t},expression:"op_action_dlg"}},[a("v-card",[a("v-form",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Opportunities/Actions for Improvement")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-textarea",{attrs:{label:"Opportunities"},model:{value:e.organization.action,callback:function(t){e.$set(e.organization,"action",t)},expression:"organization.action"}})],1)],1),a("v-card-actions",[a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.op_action_dlg=!1}}},[e._v("\n                Close\n              ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.updateOrganization}},[e._v("\n                Save\n              ")])],1)],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.upload_file_dlg,callback:function(t){e.upload_file_dlg=t},expression:"upload_file_dlg"}},[a("v-card",[a("form",{attrs:{id:"uploadForm"}},[a("v-card-title",[e._v("\n        Upload a file for this Partner\n      ")]),a("v-card-text",[a("v-file-input",{attrs:{id:"fileInput",label:"Upload new file","show-size":"",counter:"",dense:""},on:{change:e.filesChange}})],1),a("v-card-actions",[a("v-btn",{attrs:{depressed:"",small:"",disabled:e.upload_disabled},on:{click:e.uploadFile}},[e._v("\n            Upload\n            "),a("v-icon",{attrs:{color:"orange darken-4",right:""}},[e._v("\n              mdi-arrow-up\n            ")])],1)],1)],1)])],1),a("v-dialog",{attrs:{"max-width":"700px"},model:{value:e.organization_edit_dlg,callback:function(t){e.organization_edit_dlg=t},expression:"organization_edit_dlg"}},[a("v-card",[a("v-form",{model:{value:e.orgValid,callback:function(t){e.orgValid=t},expression:"orgValid"}},[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Partner Information")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-text-field",{attrs:{label:"*Agency Name",required:"",rules:e.businessNameRule},model:{value:e.organization.name,callback:function(t){e.$set(e.organization,"name",t)},expression:"organization.name"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-text-field",{attrs:{label:"*Street Number",required:"",rules:e.streetNumberRule},model:{value:e.organization.street_number,callback:function(t){e.$set(e.organization,"street_number",t)},expression:"organization.street_number"}})],1),a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-text-field",{attrs:{label:"*Street Name",required:"",rules:e.streetNameRule},model:{value:e.organization.street_name,callback:function(t){e.$set(e.organization,"street_name",t)},expression:"organization.street_name"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",md:"3"}},[a("v-text-field",{attrs:{label:"*City",required:"",rules:e.cityRule},model:{value:e.organization.city,callback:function(t){e.$set(e.organization,"city",t)},expression:"organization.city"}})],1),a("v-col",{attrs:{cols:"12",md:"2"}},[a("v-select",{attrs:{required:"",items:e.states,rules:e.stateRule,label:"*State"},model:{value:e.organization.state,callback:function(t){e.$set(e.organization,"state",t)},expression:"organization.state"}})],1),a("v-col",{attrs:{cols:"12",md:"2"}},[a("v-text-field",{attrs:{label:"*Zip",required:"",rules:e.zipRule},model:{value:e.organization.zip,callback:function(t){e.$set(e.organization,"zip",t)},expression:"organization.zip"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-text-field",{attrs:{label:"Website"},model:{value:e.organization.website,callback:function(t){e.$set(e.organization,"website",t)},expression:"organization.website"}})],1),a("v-col",{attrs:{cols:"3",sm:"12",md:"3"}},[a("v-text-field",{attrs:{label:"Phone",rules:e.businessPhoneRule},model:{value:e.organization.phones[0].number,callback:function(t){e.$set(e.organization.phones[0],"number",t)},expression:"organization.phones[0].number"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-select",{attrs:{multiple:"",required:"",rules:e.countyRule,items:e.all_counties,label:"*Counties"},model:{value:e.organization_counties,callback:function(t){e.organization_counties=t},expression:"organization_counties"}})],1)],1),a("v-row",[a("v-col",[a("v-select",{attrs:{items:e.mou_options,required:"",rules:e.mouRule,label:"*MOU Partner?"},model:{value:e.organization.mou,callback:function(t){e.$set(e.organization,"mou",t)},expression:"organization.mou"}})],1)],1),a("v-row",[a("v-col",[a("v-select",{attrs:{multiple:"",required:"",rules:e.mouRule,items:e.all_lines_of_business,label:"*Line of Business"},model:{value:e.organization_lines_of_business,callback:function(t){e.organization_lines_of_business=t},expression:"organization_lines_of_business"}})],1),a("v-col",[a("v-select",{attrs:{multiple:"",required:"",rules:e.arcFunctionRule,items:e.all_arc_relationships,label:"*Arc Relationships"},model:{value:e.organization_arc_relationships,callback:function(t){e.organization_arc_relationships=t},expression:"organization_arc_relationships"}})],1),a("v-col",[a("v-select",{attrs:{multiple:"",rules:e.agencyRule,items:e.all_agency_types,label:"*Agency Types"},model:{value:e.organization_agency_types,callback:function(t){e.organization_agency_types=t},expression:"organization_agency_types"}})],1)],1),a("v-row",[a("v-textarea",{attrs:{label:"Preferred Method of Contact per RM"},model:{value:e.organization.contact_protocol,callback:function(t){e.$set(e.organization,"contact_protocol",t)},expression:"organization.contact_protocol"}})],1),a("v-row",[a("v-textarea",{attrs:{required:"",rules:e.serviceDescriptionRule,label:"*Additional Notes"},model:{value:e.organization.service,callback:function(t){e.$set(e.organization,"service",t)},expression:"organization.service"}})],1)],1),a("small",[e._v("*Indicates required field")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.organization_edit_dlg=!1}}},[e._v("\n              Close\n            ")]),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){return e.openDialog("Delete")}}},[e._v("\n              Delete\n            ")]),a("v-btn",{attrs:{disabled:!e.orgValid,color:"blue darken-1",text:""},on:{click:e.updateOrganization}},[e._v("\n              Save\n            ")])],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"300"},model:{value:e.delete_organization_dialog,callback:function(t){e.delete_organization_dialog=t},expression:"delete_organization_dialog"}},[a("v-card",[a("v-card-text",[e._v("\n          Are you sure you want to delete this organization?\n        ")]),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"red text-darken-1"},on:{click:e.deleteOrganization}},[e._v("\n            Yes\n          ")]),a("v-btn",{attrs:{text:"",color:"blue text-darken-1"},on:{click:function(t){e.delete_organization_dialog=!1}}},[e._v("\n            No\n          ")])],1)],1)],1)],1)},Re=[],Pe=(a("28a5"),a("768b")),Oe=a("bd86"),Ae=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("persons")}},{key:"get",value:function(e){return d.get("/persons/".concat(e))}},{key:"create",value:function(e){return d.post("/persons",e)}},{key:"update",value:function(e,t){return d.put("/persons/".concat(e),t)}},{key:"delete",value:function(e){return d.delete("/persons/".concat(e))}},{key:"deleteAll",value:function(){return d.delete("/persons")}}]),e}(),Ie=new Ae,Ve=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("relationship_managers")}},{key:"get",value:function(e){return d.get("/relationship_managers/".concat(e))}},{key:"create",value:function(e){return d.post("/relationship_managers",e)}},{key:"update",value:function(e,t,a){return d.put("/relationship_managers/".concat(e,"/").concat(t),a)}},{key:"delete",value:function(e,t){return d.delete("/relationship_managers/".concat(e,"/").concat(t))}},{key:"deleteAll",value:function(){return d.delete("/relationship_managers")}}]),e}(),Ne=new Ve,Se=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("notes")}},{key:"get",value:function(e){return d.get("/notes/".concat(e))}},{key:"create",value:function(e){return d.post("/notes",e)}},{key:"update",value:function(e,t){return d.put("/notes/".concat(e),t)}},{key:"delete",value:function(e){return d.delete("/notes/".concat(e))}},{key:"deleteAll",value:function(){return d.delete("/notes")}}]),e}(),$e=new Se,Ee=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(e){return d.get("files/organization/".concat(e))}},{key:"get",value:function(e){return d.get("/files/".concat(e))}},{key:"upload",value:function(e){return d.post("/files",e,{headers:{"Content-Type":"multipart/form-data"}})}},{key:"download",value:function(e,t){return d.get("/files/".concat(e),t)}},{key:"update",value:function(e,t){return d.put("/files/".concat(e),t)}},{key:"delete",value:function(e){return d.delete("/files/".concat(e))}},{key:"deleteAll",value:function(){return d.delete("/files")}}]),e}(),De=new Ee,Fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("v-card",[a("v-form",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Organization Note")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-textarea",{model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){t.stopPropagation(),e.show=!1}}},[e._v("\n          Close\n        ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.addNote}},[e._v("\n          Save\n        ")])],1)],1)],1)],1)],1)},Me=[],je={data:function(){return{text:""}},props:{value:Boolean,item:Object},methods:{addNote:function(){var e={text:this.text};this.$emit("input",!1),this.$parent.addNote(e)}},computed:{show:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},Te=je,qe=Object(v["a"])(Te,Fe,Me,!1,null,null,null),Le=qe.exports;h()(qe,{VBtn:y["a"],VCard:ve["a"],VCardActions:fe["a"],VCardText:fe["c"],VCardTitle:fe["d"],VCol:T["a"],VContainer:q["a"],VDialog:ge["a"],VForm:be["a"],VRow:L["a"],VSpacer:V["a"],VTextarea:ke["a"]});var Ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("v-card",[a("v-form",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.rm_title))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("p",{directives:[{name:"show",rawName:"v-show",value:"Edit"==e.rm_dlg_action,expression:"rm_dlg_action=='Edit'"}],staticClass:"text-h4"},[e._v("\n                  "+e._s(e.relationship_manager.first_name)+" "+e._s(e.relationship_manager.last_name)+"\n                ")]),a("v-autocomplete",{directives:[{name:"show",rawName:"v-show",value:"Create"==e.rm_dlg_action,expression:"rm_dlg_action=='Create'"}],attrs:{label:"Relationship Manager",items:e.all_relationship_managers,"item-text":"name","item-value":"value","return-object":""},on:{change:e.updateSelectedManager}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){t.stopPropagation(),e.show=!1}}},[e._v("\n            Close\n          ")]),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:"Edit"==e.rm_dlg_action,expression:"rm_dlg_action=='Edit'"}],attrs:{color:"red darken-1",text:""},on:{click:function(t){return e.openDialog("Delete")}}},[e._v("\n            Remove Manager\n          ")]),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:"Create"==e.rm_dlg_action,expression:"rm_dlg_action=='Create'"}],attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.openDialog(e.rm_dlg_action)}}},[e._v("\n            Save\n          ")])],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"300"},model:{value:e.delete_relationship_manager_dialog,callback:function(t){e.delete_relationship_manager_dialog=t},expression:"delete_relationship_manager_dialog"}},[a("v-card",[a("v-card-text",[e._v("\n        Are you sure you want to remove this relationship manager?\n      ")]),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"red text-darken-1"},on:{click:e.deleteRelationshipManager}},[e._v("\n          Yes\n        ")]),a("v-btn",{attrs:{text:"",color:"blue text-darken-1"},on:{click:function(t){e.delete_relationship_manager_dialog=!1}}},[e._v("\n          No\n        ")])],1)],1)],1)],1)},Xe=[],Be={props:{value:Boolean,rm_title:String,all_relationship_managers:Array,rm_dlg_action:String,current_relationship_manager_id:String,relationship_manager:Object},data:function(){return{delete_relationship_manager_dialog:!1,save_rm_dialog:!1,updated_relationship_manager:"",organization_relationship_managers:[]}},methods:{updateSelectedManager:function(e){this.updated_relationship_manager={value:e.value}},openDialog:function(e){switch(e){case"Create":this.addRelationshipManager();break;case"Delete":this.delete_relationship_manager_dialog=!0;break;case"Edit":this.updateRelationshipManager();break}},addRelationshipManager:function(){var e={personId:this.updated_relationship_manager.value};this.$parent.addRelationshipManager(e)},updateRelationshipManager:function(){this.update_mgr_dlg=!1;var e={personId:this.updated_relationship_manager.value};this.$parent.updateRelationshipManager(e,this.current_relationship_manager_id)},deleteRelationshipManager:function(){this.update_mgr_dlg=!1,this.delete_relationship_manager_dialog=!1,this.$emit("input",!1),this.$parent.deleteRelationshipManager(this.current_relationship_manager_id)}},computed:{show:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},We=Be,He=a("c6a6"),Ye=Object(v["a"])(We,Ue,Xe,!1,null,null,null),Ze=Ye.exports;h()(Ye,{VAutocomplete:He["a"],VBtn:y["a"],VCard:ve["a"],VCardActions:fe["a"],VCardText:fe["c"],VCardTitle:fe["d"],VCol:T["a"],VContainer:q["a"],VDialog:ge["a"],VDivider:x["a"],VForm:be["a"],VRow:L["a"],VSpacer:V["a"]});var Ke=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("users")}},{key:"get",value:function(e){return d.get("/users/".concat(e))}},{key:"getByUserId",value:function(e){return d.get("/users/byUserId/".concat(e))}},{key:"getByEmail",value:function(e){return d.get("/users/email/".concat(e))}},{key:"create",value:function(e){return d.post("/users",e)}},{key:"update",value:function(e,t){return d.put("/users/".concat(e),t)}},{key:"delete",value:function(e){return d.delete("/users/".concat(e))}}]),e}(),Je=new Ke,Ge=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("contacts")}},{key:"get",value:function(e){return d.get("/contacts/".concat(e))}},{key:"create",value:function(e){return d.post("/contacts",e)}},{key:"update",value:function(e,t){return d.put("/contacts/".concat(e),t)}},{key:"delete",value:function(e){return d.delete("/contacts/".concat(e))}},{key:"deleteAll",value:function(){return d.delete("/contacts")}}]),e}(),Qe=new Ge,et=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(e){return d.get("pocs/".concat(e))}},{key:"create",value:function(e){return d.post("/pocs",e)}},{key:"update",value:function(e,t,a){return d.put("/pocs/".concat(e,"/").concat(t),a)}},{key:"delete",value:function(e,t){return d.delete("/pocs/".concat(e,"/").concat(t))}},{key:"deleteAll",value:function(e){return d.delete("/pocs/".concat(e))}}]),e}(),tt=new et,at=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("v-card",[a("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.poc_title))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-text-field",{attrs:{label:"First Name*",required:"",rules:e.nameRules},model:{value:e.first_name,callback:function(t){e.first_name=t},expression:"first_name"}})],1),a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-text-field",{attrs:{label:"Last Name*",required:"",rules:e.nameRules},model:{value:e.last_name,callback:function(t){e.last_name=t},expression:"last_name"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",md:"2"}},[a("v-text-field",{attrs:{label:"Street Number",rules:e.streetNumberRules},model:{value:e.street_number,callback:function(t){e.street_number=t},expression:"street_number"}})],1),a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-text-field",{attrs:{label:"Street Name",rules:e.nameRules},model:{value:e.street_name,callback:function(t){e.street_name=t},expression:"street_name"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",md:"3"}},[a("v-text-field",{attrs:{label:"City",rules:e.nameRules},model:{value:e.city,callback:function(t){e.city=t},expression:"city"}})],1),a("v-col",{attrs:{cols:"12",md:"2"}},[a("v-select",{attrs:{label:"State",items:e.states},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}})],1),a("v-col",{attrs:{cols:"12",md:"2"}},[a("v-text-field",{attrs:{label:"Zip",rules:e.zipRules},model:{value:e.zip,callback:function(t){e.zip=t},expression:"zip"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-text-field",{attrs:{required:"",label:"Primary Phone*",rules:e.phoneRules},model:{value:e.primary_phone,callback:function(t){e.primary_phone=t},expression:"primary_phone"}})],1),a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-text-field",{attrs:{label:"Secondary Phone",rules:e.phoneRules},model:{value:e.secondary_phone,callback:function(t){e.secondary_phone=t},expression:"secondary_phone"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-text-field",{attrs:{required:"",label:"Primary Email*",rules:e.emailRules},model:{value:e.primary_email,callback:function(t){e.primary_email=t},expression:"primary_email"}})],1),a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-text-field",{attrs:{label:"Secondary Email",rules:e.emailRules},model:{value:e.secondary_email,callback:function(t){e.secondary_email=t},expression:"secondary_email"}})],1)],1)],1),a("small",[e._v("*indicates required field")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){return e.openDialog("Delete")}}},[e._v("\n            Delete\n          ")]),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:"Create"==e.poc_dlg_action,expression:"poc_dlg_action=='Create'"}],attrs:{disabled:!e.valid,color:"blue darken-1",text:""},on:{click:e.createPOC}},[e._v("\n            Save\n          ")]),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:"Edit"==e.poc_dlg_action,expression:"poc_dlg_action=='Edit'"}],attrs:{color:"blue darken-1",text:"",disabled:!e.valid},on:{click:function(t){return e.openDialog("Update")}}},[e._v("\n            Edit\n          ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){t.stopPropagation(),e.show=!1}}},[e._v("\n            Close\n          ")])],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"300"},model:{value:e.delete_poc_dialog,callback:function(t){e.delete_poc_dialog=t},expression:"delete_poc_dialog"}},[a("v-card",[a("v-card-text",[e._v("\n        Are you sure you want to delete this point of contact?\n      ")]),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"red text-darken-1"},on:{click:e.deletePOC}},[e._v("\n          Yes\n        ")]),a("v-btn",{attrs:{text:"",color:"blue text-darken-1"},on:{click:function(t){e.delete_poc_dialog=!1}}},[e._v("\n          No\n        ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"300"},model:{value:e.update_poc_dialog,callback:function(t){e.update_poc_dialog=t},expression:"update_poc_dialog"}},[a("v-card",[a("v-card-text",[e._v("\n        Save changes?\n      ")]),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"red text-darken-1"},on:{click:e.updatePOC}},[e._v("\n          Yes\n        ")]),a("v-btn",{attrs:{text:"",color:"blue text-darken-1"},on:{click:function(t){e.update_poc_dialog=!1}}},[e._v("\n          No\n        ")])],1)],1)],1)],1)},nt=[],it={props:{value:Boolean,poc_id:String,poc_title:String,poc_dlg_action:String},data:function(){return{valid:!1,update_poc_dialog:!1,delete_poc_dialog:!1,save_poc_dialog:!1,first_name:"",last_name:"",street_number:"",street_name:"",city:"",state:"",zip:"",primary_phone:"",secondary_phone:"",primary_email:"",secondary_email:"",nameRules:[function(e){return!!e||"A contact name is required"}],emailRules:[function(e){return/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e)||"Please, input a valid email address"}],phoneRules:[function(e){return/^(1-)?\d{3}-\d{3}-\d{4}$/.test(e)||"Please, input a valid phone number with format XXX-XXX-XXXX"}],streetNumberRules:[function(e){return/\S\d$/.test(e)||"Street number must be valid"}],zipRules:[function(e){return/(^\d{5}$)|(^\d{9}$)|(^\d{5}-\d{4}$)/.test(e)||"Please, input a valid zip code"}],states:["AK","AL","AR","AS","AZ","CA","CO","CT","DC","DE","FL","GA","GU","HI","IA","ID","IL","IN","KS","KY","LA","MA","MD","ME","MI","MN","MO","MP","MS","MT","NC","ND","NE","NH","NJ","NM","NV","NY","OH","OK","OR","PA","PR","RI","SC","SD","TN","TX","UM","UT","VA","VI","VT","WA","WI","WV","WY"]}},methods:{openDialog:function(e){switch(e){case"Save":this.save_poc_dialog=!0;break;case"Delete":this.delete_poc_dialog=!0;break;case"Update":this.update_poc_dialog=!0;break}},deletePOC:function(){this.delete_poc_dialog=!1,this.$emit("input",!1),this.$parent.deletePOC(this.poc_id)},createPOC:function(){var e={first_name:this.first_name,last_name:this.last_name,street_number:this.street_number,street_name:this.street_name,city:this.city,state:this.state,zip:this.zip,primary_phone:this.primary_phone,secondary_phone:this.secondary_phone,primary_email:this.primary_email,secondary_email:this.secondary_email};this.$emit("input",!1),this.$parent.createPOC(e)},updatePOC:function(){this.update_poc_dialog=!1;var e={first_name:this.first_name,last_name:this.last_name,street_number:this.street_number,street_name:this.street_name,city:this.city,state:this.state,zip:this.zip,primary_phone:this.primary_phone,secondary_phone:this.secondary_phone,primary_email:this.primary_email,secondary_email:this.secondary_email};this.$emit("input",!1),this.$parent.updatePOC(this.poc_id,e)},validate:function(){this.$refs.form.validate()}},computed:{show:{get:function(){var e=this;return"Edit"==this.poc_dlg_action&&Ie.get(this.poc_id).then((function(t){e.first_name=t.data.first_name,e.last_name=t.data.last_name,e.street_number=t.data.street_number,e.street_name=t.data.street_name,e.city=t.data.city,e.state=t.data.state,e.zip=t.data.zip,t.data.phones.forEach((function(t){t.isPrimary?e.primary_phone=t.number:e.secondary_phone=t.number})),t.data.emails.forEach((function(t){t.isPrimary?e.primary_email=t.address:e.secondary_email=t.address}))})).catch((function(e){console.log(e)})),this.value},set:function(e){this.$emit("input",e)}}}},ot=it,st=Object(v["a"])(ot,at,nt,!1,null,null,null),rt=st.exports;h()(st,{VBtn:y["a"],VCard:ve["a"],VCardActions:fe["a"],VCardText:fe["c"],VCardTitle:fe["d"],VCol:T["a"],VContainer:q["a"],VDialog:ge["a"],VDivider:x["a"],VForm:be["a"],VRow:L["a"],VSelect:ye["a"],VSpacer:V["a"],VTextField:xe["a"]});var lt=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"getAll",value:function(){return d.get("emails")}},{key:"get",value:function(e){return d.get("/emails/".concat(e))}},{key:"create",value:function(e){return d.post("/emails",e)}},{key:"update",value:function(e,t){return d.put("/emails/".concat(e),t)}},{key:"delete",value:function(e){return d.delete("/emails/".concat(e))}},{key:"deleteAll",value:function(){return d.delete("/emails")}}]),e}(),ct=new lt,dt=(a("d5da"),0),ut=1,pt=2,mt=3,_t={name:"organization",components:{POCDialog:rt,NoteDialog:Le,RelationshipManagerDialog:Ze},data:function(){var e;return e={currentUserId:"",isOwner:!1,permissions:[],confirm_delete:!1,orgValid:!0,businessNameRule:[function(e){return!!e||"A business name is required"}],contactNameRule:[function(e){return!!e||"A contact name is required"}],streetNumberRule:[function(e){return/^[0-9]+$/.test(e)||"The street number is required and must only be numeric"}],streetNameRule:[function(e){return!!e||"A street name is required"}],cityRule:[function(e){return!!e||"A city must be selected"}],stateRule:[function(e){return!!e||"A state must be selected"}],countyRule:[function(e){return!!e||"At least one county must be selected"}],zipRule:[function(e){return!!e||"A zip code is required"},function(e){return/(^\d{5}$)|(^\d{9}$)|(^\d{5}-\d{4}$)/.test(e)||"Please, input a valid zip code"}],businessPhoneRule:[function(e){return/^((1-)?\d{3}-\d{3}-\d{4}){0,1}$/.test(e)||"Please, input a valid phone number with format XXX-XXX-XXXX"}],email:[function(e){return/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e)||"Please, input a valid email address"}],mouRule:[function(e){return!!e||"MOU must be selected"}],lobRule:[function(e){return!!e||"A line of business must be selected"}],arcFunctionRule:[function(e){return!!e||"ARC type must be selected"}],serviceDescriptionRule:[function(e){return!!e||"Please provide a service description"}],agencyRule:[function(e){return!!e||"An agency type must be selected"}]},Object(Oe["a"])(e,"arcFunctionRule",[function(e){return!!e||"ARC type must be selected"}]),Object(Oe["a"])(e,"all_counties",[]),Object(Oe["a"])(e,"organization_counties",[]),Object(Oe["a"])(e,"unmapped_counties",[]),Object(Oe["a"])(e,"organization_state",""),Object(Oe["a"])(e,"states",["AK","AL","AR","AS","AZ","CA","CO","CT","DC","DE","FL","GA","GU","HI","IA","ID","IL","IN","KS","KY","LA","MA","MD","ME","MI","MN","MO","MP","MS","MT","NC","ND","NE","NH","NJ","NM","NV","NY","OH","OK","OR","PA","PR","RI","SC","SD","TN","TX","UM","UT","VA","VI","VT","WA","WI","WV","WY"]),Object(Oe["a"])(e,"mou_options",["Yes","No","Maybe"]),Object(Oe["a"])(e,"contact_note_dlg",!1),Object(Oe["a"])(e,"op_action_dlg",!1),Object(Oe["a"])(e,"all_lines_of_business",[]),Object(Oe["a"])(e,"organization_lines_of_business",[]),Object(Oe["a"])(e,"unmapped_lines_of_business",[]),Object(Oe["a"])(e,"all_arc_relationships",[]),Object(Oe["a"])(e,"organization_arc_relationships",[]),Object(Oe["a"])(e,"unmapped_arc_relationships",[]),Object(Oe["a"])(e,"all_agency_types",[]),Object(Oe["a"])(e,"organization_agency_types",[]),Object(Oe["a"])(e,"unmapped_agency_types",[]),Object(Oe["a"])(e,"organization",""),Object(Oe["a"])(e,"organization_edit_dlg",!1),Object(Oe["a"])(e,"delete_organization_dialog",""),Object(Oe["a"])(e,"delete_relationship_manager_dialog",!1),Object(Oe["a"])(e,"update_mgr_dlg",!1),Object(Oe["a"])(e,"add_mgr_dlg",!1),Object(Oe["a"])(e,"showRMDialog",!1),Object(Oe["a"])(e,"rm_dlg_action",""),Object(Oe["a"])(e,"rm_dlg_title",""),Object(Oe["a"])(e,"updated_relationship_manager",""),Object(Oe["a"])(e,"current_relationship_manager_id",""),Object(Oe["a"])(e,"current_relationship_manager",{}),Object(Oe["a"])(e,"all_relationship_managers",[]),Object(Oe["a"])(e,"organization_relationship_managers",[]),Object(Oe["a"])(e,"delete_poc_dialog",!1),Object(Oe["a"])(e,"save_poc_dialog",!1),Object(Oe["a"])(e,"showPOCDialog",!1),Object(Oe["a"])(e,"poc",{}),Object(Oe["a"])(e,"update_poc_id",""),Object(Oe["a"])(e,"edit_contact_id",""),Object(Oe["a"])(e,"poc_dlg_title",""),Object(Oe["a"])(e,"poc_dlg_action",""),Object(Oe["a"])(e,"updated_point_of_contact",""),Object(Oe["a"])(e,"all_points_of_contact",[]),Object(Oe["a"])(e,"organization_points_of_contact",[]),Object(Oe["a"])(e,"files",[]),Object(Oe["a"])(e,"uploadedFiles",[]),Object(Oe["a"])(e,"upload_file_dlg",!1),Object(Oe["a"])(e,"uploadError",null),Object(Oe["a"])(e,"currentStatus",null),Object(Oe["a"])(e,"uploadFieldName","files"),Object(Oe["a"])(e,"file_upload",""),Object(Oe["a"])(e,"upload_disabled",!0),Object(Oe["a"])(e,"search",""),Object(Oe["a"])(e,"latest_note",""),Object(Oe["a"])(e,"add_note_dlg",!1),Object(Oe["a"])(e,"valid_note",!0),Object(Oe["a"])(e,"add_note_form",{text:""}),e},methods:{openDialog:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(e){case"Add RM":this.rm_dlg_action="Create",this.rm_dlg_title="Assign Relationship Manager",this.current_relationship_manager_id="",this.showRMDialog=!0;break;case"RM":Ie.get(a).then((function(e){t.current_relationship_manager=e.data})).catch((function(e){console.log(e)})),this.rm_dlg_title="Change Relationship Manager",this.current_relationship_manager_id=a,this.rm_dlg_action="Edit",this.showRMDialog=!0;break;case"Remove RM":this.delete_relationship_manager_dialog=!0,this.current_relationship_manager_id=a,console.log(a);break;case"Edit POC":this.update_poc_id=a,this.showPOCDialog=!0,this.poc_dlg_title="Edit Point of Contact",this.poc_dlg_action="Edit";break;case"Add POC":this.showPOCDialog=!0,this.poc_dlg_title="Add Point of Contact",this.poc_dlg_action="Create";break;case"Edit":this.organization_edit_dlg=!0;break;case"Delete":this.organization_edit_dlg=!1,this.delete_organization_dialog=!0;break}},addNote:function(e){var t=this;e.organizationId=this.organization.id,e.personId=this.currentUserId,e.type="general",$e.create(e).then((function(e){t.setOrganization(t.organization.id)})).catch((function(e){console.log(e)})),this.add_note_dlg=!1},downloadFile:function(e){var t={fileId:e.item.id};De.download(e.item.filepath,t).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.setAttribute("download","file.pdf"),document.body.appendChild(a),a.click()})).catch((function(e){console.log(e)}))},deleteFile:function(e){var t=this,a={filePath:e.item.filePath};De.delete(e.item.id,a).then((function(e){t.populateFiles(t.organization.id)})).catch((function(e){console.log(e)}))},reset:function(){this.currentStatus=dt,this.uploadedFiles=[],this.uploadError=null},uploadFile:function(){var e=this,t=new FormData;t.append("file",this.file_upload),t.append("organizationId",this.organization.id),t.append("personId",this.currentUserId),this.formData=t,this.currentStatus=ut,De.upload(this.formData).then((function(t){e.uploadedFiles=[].concat(t),e.currentStatus=pt})).catch((function(t){e.uploadError=t.response,e.currentStatus=mt})),this.formData="",this.upload_disabled=!0,this.populateFiles(this.organization.id);var a=document.getElementById("uploadForm");a.reset(),this.reset()},filesChange:function(e){this.file_upload=e,this.upload_disabled=!1},deleteOrganization:function(){var e=this;H.delete(this.organization.id).then((function(t){e.confirm_delete=!1})).catch((function(e){console.log(e)})),this.$router.push({path:"/organizations"}).catch((function(e){console.log(e)})),this.$toasted.show("Organization has been successfully deleted",{theme:"bubble"}).goAway(1e3)},populateFiles:function(e){var t=this;De.getAll(e).then((function(e){t.files=e.data.map((function(e){var t=Intl.DateTimeFormat("en-US").format(new Date(e.createdAt));return{filepath:e.filePath.substr(e.filePath.indexOf("/")+1,e.filePath.length),date:t,author:e.person.first_name+" "+e.person.last_name,name:e.fileName,id:e.id}}))})).catch((function(e){console.log(e)}))},updateOrganization:function(){var e=this;this.organization_edit_dlg=!1;var t={name:this.organization.name,street_number:this.organization.street_number,street_name:this.organization.street_name,city:this.organization.city,state:this.organization.state,zip:this.organization.zip,county:this.organization.county,website:this.organization.website,mou:this.organization.mou,contact_protocol:this.organization.contact_protocol,last_contact:this.organization.last_contact,service:this.organization.service,notes:this.organization.notes,action:this.organization.action};H.update(this.organization.id,t).then().catch((function(e){console.log(e)})),ie.update(this.organization.phones[0].id,{number:this.organization.phones[0].number}).then().catch((function(e){console.log(e)})),se.deleteOrganizationCounties(this.organization.id).then((function(t){e.unmapped_counties.forEach((function(t){if(e.organization_counties.includes(t.name)){var a={organizationId:e.organization.id,countyId:t.id};se.create(a).then((function(t){e.setOrganization()})).catch((function(e){console.log(e)}))}}))})).catch((function(e){console.log(e)})),le.deleteOrganizationLinesOfBusiness(this.organization.id).then((function(t){e.unmapped_lines_of_business.forEach((function(t){if(e.organization_lines_of_business.includes(t.name)){var a={organizationId:e.organization.id,lineOfBusinessId:t.id};le.create(a).then((function(t){e.setOrganization()})).catch((function(e){console.log(e)}))}}))})).catch((function(e){console.log(e)})),de.deleteOrganizationArcRelationships(this.organization.id).then((function(t){e.unmapped_arc_relationships.forEach((function(t){if(e.organization_arc_relationships.includes(t.name)){var a={organizationId:e.organization.id,arcRelationshipId:t.id};de.create(a).then((function(t){e.setOrganization()})).catch((function(e){console.log(e)}))}}))})).catch((function(e){console.log(e)})),pe.deleteOrganizationAgencyTypes(this.organization.id).then((function(t){e.unmapped_agency_types.forEach((function(t){if(e.organization_agency_types.includes(t.name)){var a={organizationId:e.organization.id,agencyTypeId:t.id};pe.create(a).then((function(t){e.setOrganization()})).catch((function(e){console.log(e)}))}}))})).catch((function(e){console.log(e)}))},setOrganization:function(){var e=this;H.get(this.$route.params.organizationId).then((function(t){t.data.counties.forEach((function(t){e.organization_counties.push(t.name)})),t.data.line_of_businesses.forEach((function(t){e.organization_lines_of_business.push(t.name)})),t.data.arc_relationships.forEach((function(t){e.organization_arc_relationships.push(t.name)})),t.data.agency_types.forEach((function(t){e.organization_agency_types.push(t.name)})),tt.getAll(t.data.id).then(e.setPOC).catch((function(e){console.log(e)})),e.organization=t.data,0==e.organization.phones.length&&(e.organization.phones[0]=""),e.organization_state=t.data.state,e.organization_relationship_managers=t.data.relationship_managers,e.populateFiles(e.organization.id),e.setOwnerStatus()})).catch((function(e){console.log(e)})),this.add_note_dlg=!1,this.contact_note_dlg=!1,this.op_action_dlg=!1},populateCounties:function(){var e=this;K.getAll().then((function(t){e.all_counties=t.data.map((function(e){return e.name})),e.unmapped_counties=t.data})).catch((function(e){console.log(e)}))},populateLinesOfBusiness:function(){var e=this;G.getAll().then((function(t){e.all_lines_of_business=t.data.map((function(e){return e.name})),e.unmapped_lines_of_business=t.data})).catch((function(e){console.log(e)}))},populateArcRelationships:function(){var e=this;ee.getAll().then((function(t){e.all_arc_relationships=t.data.map((function(e){return e.name})),e.unmapped_arc_relationships=t.data})).catch((function(e){console.log(e)}))},populateAgencyTypes:function(){var e=this;ae.getAll().then((function(t){e.all_agency_types=t.data.map((function(e){return e.name})),e.unmapped_agency_types=t.data})).catch((function(e){console.log(e)}))},setPOC:function(e){0==e.data.length?this.openDialog("Add POC"):this.organization_points_of_contact=e.data},populateRelationshipManagersList:function(){var e=this;Je.getAll().then((function(t){e.all_relationship_managers=t.data.map((function(e){return{name:e.first_name+" "+e.last_name,value:e.id}}))})).catch((function(e){console.log(e)}))},updateSelectedManager:function(e){this.updated_relationship_manager={value:e.value}},addRelationshipManager:function(e){var t=this;this.showRMDialog=!1,e.organizationId=this.organization.id,Ne.create(e).then((function(e){t.organization.relationship_managers=e.data,t.setOrganization()})).catch((function(e){console.log(e)}))},updateRelationshipManager:function(e,t){var a=this;this.showRMDialog=!1,e.organizationId=this.organization.id,Ne.update(this.organization.id,t,e).then((function(e){a.organization.relationship_managers=e.data,a.setOrganization()})).catch((function(e){console.log(e)}))},deleteRelationshipManager:function(){var e=this;this.delete_relationship_manager_dialog=!1,Ne.delete(this.organization.id,this.current_relationship_manager_id).then((function(t){e.setOrganization()})).catch((function(e){console.log(e)}))},updateContactInfo:function(e,t,a){var n=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;t.isPrimary=e,0!=i?a.update(i,t).then((function(e){n.setOrganization()})).catch((function(e){console.log(e)})):a.create(t).then((function(e){n.setOrganization()})).catch((function(e){console.log(e)}))},deletePOC:function(e){var t=this;Ie.get(e).then((function(e){var t=e.data;return t.phones.forEach((function(e){ie.delete(e.id).catch((function(e){console.log(e)}))})),t.emails.forEach((function(e){ct.delete(e.id).catch((function(e){console.log(e)}))})),t.id})).then((function(e){console.log("called"),Ie.delete(e).catch((function(e){console.log(e)})),t.setOrganization()})).catch((function(e){console.log(e)}))},updatePOC:function(e,t){var a=this;Ie.get(e).then((function(e){var n=e.data,i={};if(t.primary_phone){i={number:t.primary_phone};var o=n.phones.filter((function(e){return e.isPrimary}));o.length>0?a.updateContactInfo(!0,i,ie,o[0].id):(i.personId=n.id,a.updateContactInfo(!0,i,ie))}if(t.secondary_phone){i={number:t.secondary_phone};var s=n.phones.filter((function(e){return 0==e.isPrimary}));s.length>0?a.updateContactInfo(!1,i,ie,s[0].id):(i.personId=n.id,a.updateContactInfo(!1,i,ie))}var r={};if(t.primary_email){r={address:t.primary_email};var l=n.emails.filter((function(e){return e.isPrimary}));l.length>0?a.updateContactInfo(!0,r,ct,l[0].id):(r.personId=n.id,a.updateContactInfo(!0,r,ct))}if(t.secondary_email){r={address:t.secondary_email};var c=n.emails.filter((function(e){return 0==e.isPrimary}));c.length>0?a.updateContactInfo(!1,r,ct,c[0].id):(r.personId=n.id,a.updateContactInfo(!1,r,ct))}})).catch((function(e){console.log(e)})),Ie.update(e,t).then().catch((function(e){console.log(e)}))},createPOC:function(e){var t=this;Ie.create(e).then((function(a){var n=a.data.id,i={personId:n,organizationId:t.organization.id};if(e.primary_phone){var o={personId:n,number:e.primary_phone,isPrimary:!0};ie.create(o).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}if(e.secondary_phone){var s={personId:n,number:e.secondary_phone,isPrimary:!1};ie.create(s).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}if(e.primary_email){var r={personId:n,address:e.primary_email,isPrimary:!0};ct.create(r).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}if(e.secondary_email){var l={personId:n,address:e.secondary_email,isPrimary:!1};ct.create(l).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}tt.create(i).then((function(e){t.setOrganization()})).catch((function(e){console.log(e)}))}))},setEditContact:function(e){this.edit_contact_id=e},populatePointOfContactList:function(){var e=this;Qe.getAll().then((function(t){e.all_points_of_contact=t.data.map((function(e){return{name:e.first_name+" "+e.last_name,value:e.id}}))})).catch((function(e){console.log(e)}))},updateSelectedPointOfContact:function(e){this.updated_point_of_contact={value:e.value}},addPointOfContact:function(){var e=this;this.assign_poc_dlg=!1;var t=this.organization.id,a={organizationId:t,personId:this.updated_point_of_contact.value};tt.create(a).then((function(t){e.setOrganization()})).catch((function(e){console.log(e)}))},updatePointOfContact:function(){var e=this;this.assign_poc_dlg=!1;var t={},a=this.organization_points_of_contact[0].id;Ie.update(a,t).then((function(t){e.setOrganization()})).catch((function(e){console.log(e)}))},formatDate:function(e){if(!e)return null;var t=e.split("-"),a=Object(Pe["a"])(t,3),n=a[0],i=a[1],o=a[2];return"".concat(i,"/").concat(o,"/").concat(n)},verifyAccess:function(e){switch(e){case"read":return!!this.permissions.includes("readAllOrgs");case"update":return!!this.permissions.includes("editAllOrgs")||!(!this.permissions.includes("editOwnOrgs")||!this.isOwner);case"delete":return!!this.permissions.includes("deleteAllOrgs")||!(!this.permissions.includes("deleteOwnOrgs")||!this.isOwner);case"reassign":return this.permissions.includes("reassignAccountOwner");default:return!1}},setPagePermissions:function(){var e=this,t=this.$session.get("userRole");p.get(t).then((function(t){e.permissions=t.data.permissions.map((function(e){return e.name}))})).catch((function(e){console.log(e)}))},setOwnerStatus:function(){var e=this,t=this.$session.get("userID");Je.getByUserId(t).then((function(t){var a=t.data.person.id,n=e.organization.relationship_managers.map((function(e){return e.person.id}));e.isOwner=n.includes(a)})).catch((function(e){console.log(e)}))},setCurrentUser:function(){var e=this,t=this.$session.get("userID");Je.getByUserId(t).then((function(t){e.currentUserId=t.data.person.id})).catch((function(e){console.log(e)}))},validate:function(){this.$refs.form.validate()}},computed:{headers:function(){var e=[{text:"File Name",value:"name",width:"80px"},{text:"Date",value:"date",width:"80px"},{text:"Author",value:"author",width:"100px"},{text:"",value:"download",width:"100px"},{text:"",value:"remove",width:"100px"}];return e}},mounted:function(){this.reset(),this.setOrganization(),this.populateRelationshipManagersList(),this.populatePointOfContactList(),this.populateCounties(),this.populateLinesOfBusiness(),this.populateArcRelationships(),this.populateAgencyTypes(),this.setPagePermissions(),this.setCurrentUser()}},vt=_t,ft=a("23a7"),ht=a("71d9"),gt=a("269a"),bt=a.n(gt),yt=a("f977"),xt=Object(v["a"])(vt,Ce,Re,!1,null,null,null),kt=xt.exports;h()(xt,{VBtn:y["a"],VCard:ve["a"],VCardActions:fe["a"],VCardSubtitle:fe["b"],VCardText:fe["c"],VCardTitle:fe["d"],VCol:T["a"],VContainer:q["a"],VDataTable:he["a"],VDialog:ge["a"],VDivider:x["a"],VFileInput:ft["a"],VForm:be["a"],VIcon:k["a"],VRow:L["a"],VSelect:ye["a"],VSpacer:V["a"],VTextField:xe["a"],VTextarea:ke["a"],VToolbar:ht["a"],VToolbarTitle:N["a"]}),bt()(xt,{Scroll:yt["b"]});var wt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-card",{staticClass:"pa-3 mt-8",attrs:{outlined:"",elevation:"3 text-wrap"}},[a("v-card",{staticClass:"pa-7",staticStyle:{"margin-top":"-40px",width:"100%"},attrs:{color:"#6D6E70",rounded:""}},[a("v-toolbar-title",{staticClass:"card-header-title"},[e._v("Contacts")])],1),a("v-card-text",[a("v-row",[a("v-btn",{staticClass:"ml-3",attrs:{fab:"",elevation:"3",small:"",color:"white"},on:{click:function(t){e.add_person_dlg=!0}}},[a("v-icon",{staticClass:"mdi mdi-dark mdi-plus"})],1),a("v-spacer"),a("v-text-field",{staticClass:"shrink mt-3 mr-3",attrs:{label:"Search","append-icon":"mdi-magnify","single-line":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{staticClass:"text-capitalize",attrs:{headers:e.headers,items:e.volunteers,search:e.search,"item-key":"id","multi-sort":""},on:{"click:row":e.nav},scopedSlots:e._u([{key:"item.name",fn:function(t){var n=t.item;return[null!==n.first_name?[a("span",{staticClass:"black--text"},[e._v(e._s(n.name))])]:e._e()]}},{key:"item.address",fn:function(t){var n=t.item;return[a("address",[a("span",{staticClass:"black--text"},[e._v(e._s(n.address))])])]}},{key:"item.emails",fn:function(t){t.item;return[e._v("\n                "+e._s(e.email.address)+"\n            ")]}},{key:"item.phones",fn:function(t){t.item;return[e._v("\n                "+e._s(e.phone.number)+"\n            ")]}},{key:"item.actions",fn:function(t){var n=t.item;return[a("v-icon",{attrs:{small:""},on:{click:function(t){return e.removePerson(n)}}},[e._v("mdi-delete")])]}}],null,!0)})],1)],1),a("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.add_person_dlg,callback:function(t){e.add_person_dlg=t},expression:"add_person_dlg"}},[a("v-card",[a("v-form",{attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Contact Information")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"First Name",required:"",rules:e.nameRules},model:{value:e.add_person.firstname,callback:function(t){e.$set(e.add_person,"firstname",t)},expression:"add_person.firstname"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Last Name",required:"",rules:e.nameRules},model:{value:e.add_person.lastname,callback:function(t){e.$set(e.add_person,"lastname",t)},expression:"add_person.lastname"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}})],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Street Number",rules:e.streetNumberRules},model:{value:e.add_person.street_number,callback:function(t){e.$set(e.add_person,"street_number",t)},expression:"add_person.street_number"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Street Name",rules:e.nameRules},model:{value:e.add_person.street_name,callback:function(t){e.$set(e.add_person,"street_name",t)},expression:"add_person.street_name"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"3",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"City",rules:e.nameRules},model:{value:e.add_person.city,callback:function(t){e.$set(e.add_person,"city",t)},expression:"add_person.city"}})],1),a("v-col",{attrs:{cols:"2"}},[a("v-select",{attrs:{label:"State",rules:e.nameRules,items:e.states},model:{value:e.add_person.state,callback:function(t){e.$set(e.add_person,"state",t)},expression:"add_person.state"}})],1),a("v-col",{attrs:{cols:"3"}},[a("v-text-field",{attrs:{label:"Zip",rules:e.zipRules},model:{value:e.add_person.zip,callback:function(t){e.$set(e.add_person,"zip",t)},expression:"add_person.zip"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"County",rules:e.nameRules},model:{value:e.add_person.county,callback:function(t){e.$set(e.add_person,"county",t)},expression:"add_person.county"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"Primary Phone",placeholder:"(XXX) XXX-XXXX",rules:e.phoneRules},on:{keyup:e.formatPrimaryPhone},model:{value:e.add_person.primaryPhone,callback:function(t){e.$set(e.add_person,"primaryPhone",t)},expression:"add_person.primaryPhone"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"Secondary Phone",placeholder:"(XXX) XXX-XXXX",rules:e.phoneRules},on:{keyup:e.formatSecondaryPhone},model:{value:e.add_person.secondaryPhone,callback:function(t){e.$set(e.add_person,"secondaryPhone",t)},expression:"add_person.secondaryPhone"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"Primary Email",rules:e.emailRules},model:{value:e.add_person.primaryEmail,callback:function(t){e.$set(e.add_person,"primaryEmail",t)},expression:"add_person.primaryEmail"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"Secondary Email",rules:e.emailRules},model:{value:e.add_person.secondaryEmail,callback:function(t){e.$set(e.add_person,"secondaryEmail",t)},expression:"add_person.secondaryEmail"}})],1)],1)],1),a("small",[e._v("*indicates required field")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.add_person_dlg=!1}}},[e._v("\n                Close\n              ")]),a("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:!e.valid},on:{click:e.addPerson}},[e._v("\n                Save\n              ")])],1)],1)],1)],1)],1)],1)],1)},zt=[],Ct={name:"volunteers-list",data:function(){return{volunteers:[],add_person_dlg:!1,phone1:"",phone2:"",currentVolunteer:null,search:"",currentIndex:-1,name:"",add_person:{firstname:"",lastname:"",street_number:"",street_name:"",city:"",state:"",zip:"",county:"",organization:"",primaryPhone:"",secondaryPhone:"",primaryEmail:"",secondaryEmail:""},view_person:{firstname:"",lastname:"",street_number:"",street_name:"",city:"",state:"",zip:"",county:"",organization:"",primaryPhone:"",secondaryPhone:"",primaryEmail:"",secondaryEmail:""},states:["AK","AL","AR","AS","AZ","CA","CO","CT","DC","DE","FL","GA","GU","HI","IA","ID","IL","IN","KS","KY","LA","MA","MD","ME","MI","MN","MO","MP","MS","MT","NC","ND","NE","NH","NJ","NM","NV","NY","OH","OK","OR","PA","PR","RI","SC","SD","TN","TX","UM","UT","VA","VI","VT","WA","WI","WV","WY"],nameRules:[function(e){return!!e||"Required"},function(e){return/\D\S$/.test(e)||"No white or empty spaces"}],emailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],phoneRules:[function(e){return!!e||"Required"},function(e){return/\S\d$/.test(e)||"Phone number must be valid"}],streetNumberRules:[function(e){return!!e||"Required"},function(e){return/\S\d$/.test(e)||"Street number must be valid"}],zipRules:[function(e){return!!e||"Required"},function(e){return/\S\d$/.test(e)||"Zip number must be valid"}],show1:!1,rules:{required:function(e){return!!e||"Required."},min:function(e){return e&&e.length>=1||"Min 5 characters"}}}},computed:{headers:function(){var e=[{text:"Name",value:"name",width:"80px",class:"red--text text--darken-3"},{text:"Address",value:"address",width:"100px",class:"red--text text--darken-3"},{text:"Email",value:"email",width:"80px",class:"red--text text--darken-3"},{text:"Phone",value:"phone",width:"100px",class:"red--text text--darken-3"},{text:"County",value:"county",width:"80px",class:"red--text text--darken-3"},{text:"Organization",value:"organization_names",width:"80px",class:"red--text text--darken-3"},{text:"Delete",value:"actions",width:"1%"}];return e}},methods:{nav:function(e){this.$router.push({path:"contact/"+e.id})},retrieveVolunteers:function(){var e=this;Qe.getAll().then((function(t){e.volunteers=t.data.filter((function(e){return null==e.user})),e.volunteers.forEach((function(e){e.address=e.street_number+" "+e.street_name+"\n"+e.city+", "+e.state+" "+e.zip,e.name=e.first_name+" "+e.last_name;var t="";e.emails.forEach((function(e){1==e.isPrimary&&(t+=e.address+"\n")})),e.email=t;var a="";e.phones.forEach((function(e){1==e.isPrimary&&(a+=e.number+"\n")}));var n="";e.organizations.forEach((function(e){n+=e.name+"\n"})),e.email=t,e.organization_names=n,e.phone=a}))})).catch((function(e){console.log(e.message)}))},refreshList:function(){this.retrieveVolunteers(),this.currentVolunteers=null,this.currentIndex=-1},setActiveVolunteer:function(e,t){this.currentVolunteer=e,this.currentIndex=t},searchTitle:function(){var e=this;Qe.findByName(this.first_name).then((function(t){e.volunteers=t.data,console.log(t.data)})).catch((function(e){console.log(e)}))},addPerson:function(){var e=this,t={first_name:this.add_person.firstname,last_name:this.add_person.lastname,street_number:this.add_person.street_number,street_name:this.add_person.street_name,city:this.add_person.city,state:this.add_person.state,zip:this.add_person.zip,county:this.add_person.county};t.services=this.add_person.services,Qe.create(t).then((function(a){console.log(a);var n=t.first_name+" "+t.last_name,i="created";return e.addToLog(n,i),e.retrieveVolunteers(),e.add_organization_dlg=!1,a.data.id})).then((function(t){var a={personId:t,address:e.add_person.primaryEmail,isPrimary:!0},n={personId:t,address:e.add_person.secondaryEmail,isPrimary:!1},i={personId:t,number:e.add_person.primaryPhone,isPrimary:!0},o={personId:t,number:e.add_person.secondaryPhone,isPrimary:!1};ct.create(a),ct.create(n),ie.create(i),ie.create(o),e.retrieveVolunteers()})).catch((function(e){console.log(e)})),this.add_person_dlg=!1,this.refreshList()},removePerson:function(e){var t=this;confirm("Are you sure you want to remove "+name+" from the table?")&&Qe.delete(e.id).then((function(a){console.log(a);var n="deleted",i=e.first_name+" "+e.last_name;t.addToLog(i,n),t.refreshList()})).catch((function(e){console.log(e)})),this.refreshList()},addToLog:function(e,t){var a,n={entry:""};Je.getByUserId(this.$session.get("userID")).then((function(i){a=i.data.person.first_name+" "+i.data.person.last_name,n.entry=e+" was "+t+" by "+a,console.log(n.entry)})).catch((function(e){console.log(e.message)}))},formatPrimaryPhone:function(){this.add_person.primaryPhone=this.add_person.primaryPhone.replace(/[^0-9]/g,"").replace(/^(\d{3})?(\d{3})?(\d{4})?/g,"($1)$2-$3").substr(0,13)},formatSecondaryPhone:function(){this.add_person.secondaryPhone=this.add_person.secondaryPhone.replace(/[^0-9]/g,"").replace(/^(\d{3})?(\d{3})?(\d{4})?/g,"($1)$2-$3").substr(0,13)}},mounted:function(){this.retrieveVolunteers()}},Rt=Ct,Pt=(a("7347"),Object(v["a"])(Rt,wt,zt,!1,null,"0c09ff42",null)),Ot=Pt.exports;h()(Pt,{VBtn:y["a"],VCard:ve["a"],VCardActions:fe["a"],VCardText:fe["c"],VCardTitle:fe["d"],VCol:T["a"],VContainer:q["a"],VDataTable:he["a"],VDialog:ge["a"],VForm:be["a"],VIcon:k["a"],VRow:L["a"],VSelect:ye["a"],VSpacer:V["a"],VTextField:xe["a"],VToolbarTitle:N["a"]});var At=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"7"}},[a("v-row",[a("v-col",{staticClass:"offset-1 col-0"},[a("v-card",{staticClass:"pa-1 mx-7",attrs:{outlined:"",elevation:"3 text-wrap"}},[a("v-card",{staticClass:"pa-7",staticStyle:{"margin-top":"-15px",width:"100%"},attrs:{color:"#6D6E70",rounded:""}},[a("v-card-text",[a("div",{staticClass:"card-header-title"},[e._v(e._s(e.edit_person.first_name+" "+e.edit_person.last_name)+"\n                    "),a("v-btn",{staticClass:"pl-3",attrs:{icon:"",small:""},on:{click:function(t){e.edit_person_dlg=!0}}},[a("v-icon",{staticClass:"mdi mdi-pencil",staticStyle:{color:"#C4DFF6"},attrs:{small:""}})],1)],1),a("div",{staticClass:"card-header-subtitle"},[e._v("\n                    "+e._s(e.edit_person.primaryPhone)+" | "+e._s(e.edit_person.primaryEmail)+"\n                  ")]),a("div",{staticClass:"card-header-subtitle"},[e._v("\n                    "+e._s(e.edit_person.street_number)+" "+e._s(e.edit_person.street_name)),a("br"),e._v("\n                    "+e._s(e.edit_person.city)+", "+e._s(e.edit_person.state)+"\n                    "+e._s(e.edit_person.zip)),a("br"),e._v("\n                    "+e._s(e.edit_person.county+" County")),a("br"),e._v("\n                    Affiliated Organizations: "+e._s(e.edit_person.organization_names)+"\n                    "),a("br"),e._v("\n                    Alternate Contact Info:\n                    "+e._s(e.edit_person.secondaryPhone)+"\n                    "+e._s(e.edit_person.secondaryEmail)+"\n                  ")]),a("div",{staticClass:"card-header-subtitle"},[e._v("\n                    "+e._s(e.edit_person.person_notes)+"\n                    "),a("v-btn",{staticClass:"pl-3",attrs:{icon:"",small:""},on:{click:function(t){e.add_note_dlg=!0}}},[a("v-icon",{staticClass:"mdi mdi-comment-outline",staticStyle:{color:"#C4DFF6"},attrs:{small:""}})],1)],1)])],1)],1)],1)],1)],1),a("v-col",[a("NoteDialog",{attrs:{item:e.view_note_item},model:{value:e.showNoteDialog,callback:function(t){e.showNoteDialog=t},expression:"showNoteDialog"}}),[a("v-card")]],2)],1),a("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.edit_person_dlg,callback:function(t){e.edit_person_dlg=t},expression:"edit_person_dlg"}},[a("v-card",[a("v-form",{attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Contact Information")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"First Name",required:"",rules:e.nameRules},model:{value:e.edit_person.first_name,callback:function(t){e.$set(e.edit_person,"first_name",t)},expression:"edit_person.first_name"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Last Name",required:"",rules:e.nameRules},model:{value:e.edit_person.last_name,callback:function(t){e.$set(e.edit_person,"last_name",t)},expression:"edit_person.last_name"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}})],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Street Number",rules:e.nameRules},model:{value:e.edit_person.street_number,callback:function(t){e.$set(e.edit_person,"street_number",t)},expression:"edit_person.street_number"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Street Name",rules:e.nameRules},model:{value:e.edit_person.street_name,callback:function(t){e.$set(e.edit_person,"street_name",t)},expression:"edit_person.street_name"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"3",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"City",rules:e.nameRules},model:{value:e.edit_person.city,callback:function(t){e.$set(e.edit_person,"city",t)},expression:"edit_person.city"}})],1),a("v-col",{attrs:{cols:"2"}},[a("v-select",{attrs:{label:"State",rules:e.nameRules,items:e.states},model:{value:e.edit_person.state,callback:function(t){e.$set(e.edit_person,"state",t)},expression:"edit_person.state"}})],1),a("v-col",{attrs:{cols:"3"}},[a("v-text-field",{attrs:{label:"Zip",rules:e.zipRules},model:{value:e.edit_person.zip,callback:function(t){e.$set(e.edit_person,"zip",t)},expression:"edit_person.zip"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"County",rules:e.nameRules},model:{value:e.edit_person.county,callback:function(t){e.$set(e.edit_person,"county",t)},expression:"edit_person.county"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"Primary Phone",rules:e.phoneRules},model:{value:e.edit_person.primaryPhone,callback:function(t){e.$set(e.edit_person,"primaryPhone",t)},expression:"edit_person.primaryPhone"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"Secondary Phone",rules:e.phoneRules},model:{value:e.edit_person.secondaryPhone,callback:function(t){e.$set(e.edit_person,"secondaryPhone",t)},expression:"edit_person.secondaryPhone"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"Primary Email",rules:e.emailRules},model:{value:e.edit_person.primaryEmail,callback:function(t){e.$set(e.edit_person,"primaryEmail",t)},expression:"edit_person.primaryEmail"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"Secondary Email",rules:e.emailRules},model:{value:e.edit_person.secondaryEmail,callback:function(t){e.$set(e.edit_person,"secondaryEmail",t)},expression:"edit_person.secondaryEmail"}})],1)],1)],1),a("small",[e._v("*indicates required field")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.edit_person_dlg=!1}}},[e._v("\n              Close\n            ")]),a("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:!e.valid},on:{click:e.updatePerson}},[e._v("\n              Save\n            ")])],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.add_note_dlg,callback:function(t){e.add_note_dlg=t},expression:"add_note_dlg"}},[a("v-form",{ref:"new_note_form",model:{value:e.valid_note,callback:function(t){e.valid_note=t},expression:"valid_note"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Note")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{staticClass:"col-3"},[a("v-autocomplete",{attrs:{items:e.add_note_form.types,label:"Type"},model:{value:e.add_note_form.type,callback:function(t){e.$set(e.add_note_form,"type",t)},expression:"add_note_form.type"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-textarea",{attrs:{rules:e.note_text_rule},model:{value:e.add_note_form.text,callback:function(t){e.$set(e.add_note_form,"text",t)},expression:"add_note_form.text"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.add_note_dlg=!1}}},[e._v("\n              Close\n            ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.addNote}},[e._v("\n              Save\n            ")])],1)],1)],1)],1)],1)},It=[],Vt={name:"contact",components:{NoteDialog:Le},data:function(){return{edit_person_dlg:!1,showNoteDialog:!1,phoneId:"",phone2Id:"",emailId:"",email2Id:"",states:["AK","AL","AR","AS","AZ","CA","CO","CT","DC","DE","FL","GA","GU","HI","IA","ID","IL","IN","KS","KY","LA","MA","MD","ME","MI","MN","MO","MP","MS","MT","NC","ND","NE","NH","NJ","NM","NV","NY","OH","OK","OR","PA","PR","RI","SC","SD","TN","TX","UM","UT","VA","VI","VT","WA","WI","WV","WY"],edit_person:{first_name:"",last_name:"",street_number:"",street_name:"",city:"",state:"",zip:"",county:"",organization_names:"",primaryPhone:"",secondaryPhone:"",primaryEmail:"",secondaryEmail:"",person_notes:""},view_note_item:{},note_search:"",history_switch:!0,notes:[],add_note_dlg:!1,valid_note:!0,note_text_rule:[function(e){return!!e||"Text is required"}],add_note_form:{types:["General","Contact"],text:"",type:"General"},view_note_dlg:!1,notes_type_selected:{general:!1,contact:!0},menu1:!1,menu2:!1,start_date:(new Date).toISOString().substr(0,10),end_date:(new Date).toISOString().substr(0,10),formattedStartDate:"",formattedEndDate:"",tab:"",nameRules:[function(e){return!!e||"Required"},function(e){return/\D\S$/.test(e)||"No white or empty spaces"}],emailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],phoneRules:[function(e){return!!e||"Required"},function(e){return/\S\d$/.test(e)||"Phone number must be valid"}],streetNumberRules:[function(e){return!!e||"Required"},function(e){return/\S\d$/.test(e)||"Street number must be valid"}],zipRules:[function(e){return!!e||"Required"},function(e){return/\S\d$/.test(e)||"Zip number must be valid"}],show1:!1,rules:{required:function(e){return!!e||"Required."},min:function(e){return e&&e.length>=1||"Min 5 characters"}}}},methods:{showDialog:function(){this.edit_person_dlg=!0},setPerson:function(){var e=this;Ie.get(this.$route.params.personId).then((function(t){e.edit_person=t.data,console.log("logging response"),console.log(t),t.data.phones.forEach((function(t){t.isPrimary?(e.edit_person.primaryPhone=t.number,e.phoneId=t.id):(e.edit_person.secondaryPhone=t.number,e.phone2Id=t.id)})),t.data.emails.forEach((function(t){t.isPrimary?(e.edit_person.primaryEmail=t.address,e.emailId=t.id):(e.edit_person.secondaryEmail=t.address,e.email2Id=t.id)})),e.edit_person.organization_names="",t.data.organizations.forEach((function(t){e.edit_person.organization_names+=t.name+"\n"}))})).catch((function(e){console.log(e.message)}))},updatePerson:function(){var e=this,t={first_name:this.edit_person.first_name,last_name:this.edit_person.last_name,street_number:this.edit_person.street_number,street_name:this.edit_person.street_name,city:this.edit_person.city,state:this.edit_person.state,zip:this.edit_person.zip,county:this.edit_person.county};console.log(t);var a=this.$route.params.personId;Ie.update(a,t).then((function(e){return e.data.id})).then((function(t){console.log(t);var a={address:e.edit_person.primaryEmail,isPrimary:!0},n={address:e.edit_person.secondaryEmail,isPrimary:!1},i={number:e.edit_person.primaryPhone,isPrimary:!0},o={number:e.edit_person.secondaryPhone,isPrimary:!1};console.log(o),ct.update(e.emailId,a),ct.update(e.email2Id,n),ie.update(e.phoneId,i),ie.update(e.phone2Id,o).then((function(e){console.log(e)}))})).catch((function(e){console.log(e)})),this.edit_person_dlg=!1},addNote:function(e){var t=this;if(console.log(e),this.$refs.new_note_form.validate()){var a={first_name:this.edit_person.first_name,last_name:this.edit_person.last_name,street_number:this.edit_person.street_number,street_name:this.edit_person.street_name,city:this.edit_person.city,state:this.edit_person.state,zip:this.edit_person.zip,county:this.edit_person.county,person_notes:this.add_note_form.text},n=this.$route.params.personId;Ie.update(n,a).then((function(e){console.log(e),t.setPerson()})).catch((function(e){console.log(e)})),this.add_note_dlg=!1}},deleteNote:function(e){var t=this;$e.delete(e.id).then((function(e){t.setPerson(t.$route.params.personId),console.log(e)})).catch((function(e){console.log(e)})),this.showNoteDialog=!1},close_note_dlg:function(){this.view_note_dlg=!1},openNoteDialog:function(e){this.showNoteDialog=!0,this.view_note_item=e},setModal:function(e){this.view_note_item=e,this.open_note_dlg()},switch_label:function(){return this.history_switch?"Contact History":"General History"},set_notes_view:function(){this.notes_type_selected.general=!this.history_switch,this.notes_type_selected.contact=this.history_switch}},computed:{},mounted:function(){this.setPerson()}},Nt=Vt,St=Object(v["a"])(Nt,At,It,!1,null,null,null),$t=St.exports;h()(St,{VAutocomplete:He["a"],VBtn:y["a"],VCard:ve["a"],VCardActions:fe["a"],VCardText:fe["c"],VCardTitle:fe["d"],VCol:T["a"],VContainer:q["a"],VDialog:ge["a"],VForm:be["a"],VIcon:k["a"],VRow:L["a"],VSelect:ye["a"],VSpacer:V["a"],VTextField:xe["a"],VTextarea:ke["a"]});var Et=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("v-app",[a("v-dialog",{attrs:{persistent:"","max-width":"600px","min-width":"360px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("div",[a("v-tabs",{attrs:{"show-arrows":"","background-color":"red","icons-and-text":"",dark:"",grow:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"purple darken-4"}}),e._l(e.tabs,(function(t){return a("v-tab",{key:t.name},[a("v-icon",{attrs:{large:""}},[e._v(e._s(t.icon))]),a("div",{staticClass:"caption py-1"},[e._v(e._s(t.name))])],1)})),a("v-tab-item",[a("v-card",{staticClass:"px-4"},[a("v-card-text",[a("v-form",{ref:"loginForm",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{rules:e.loginEmailRules,label:"E-mail",required:""},model:{value:e.loginEmail,callback:function(t){e.loginEmail=t},expression:"loginEmail"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{"append-icon":e.show1?"eye":"eye-off",rules:[e.rules.required,e.rules.min],type:e.show1?"text":"password",name:"input-10-1",label:"Password",hint:"At least 8 characters",counter:""},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.loginPassword,callback:function(t){e.loginPassword=t},expression:"loginPassword"}})],1),a("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6",xsm:"12"}}),a("v-spacer"),a("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"3",xsm:"12","align-end":""}},[a("v-btn",{attrs:{"x-large":"",block:"",disabled:!e.valid,color:"success"},on:{click:e.validate}},[e._v("\n                        Login\n                      ")])],1)],1)],1)],1)],1)],1),a("v-tab-item",[a("v-card",{staticClass:"px-4"},[a("v-card-text",[a("v-form",{ref:"registerForm",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{rules:[e.rules.required],label:"First Name",maxlength:"20",required:""},model:{value:e.FirstName,callback:function(t){e.FirstName=t},expression:"FirstName"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{rules:[e.rules.required],label:"Last Name",maxlength:"20",required:""},model:{value:e.LastName,callback:function(t){e.LastName=t},expression:"LastName"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{rules:[e.rules.required],label:"User ID",maxlength:"20",required:""},model:{value:e.UserId,callback:function(t){e.UserId=t},expression:"UserId"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{rules:e.emailRules,label:"E-mail",required:""},model:{value:e.Email,callback:function(t){e.Email=t},expression:"Email"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{"append-icon":e.show1?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.rules.min],type:e.show1?"text":"Password",name:"input-10-1",label:"Password",hint:"At least 8 characters",counter:""},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.Password,callback:function(t){e.Password=t},expression:"Password"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{block:"","append-icon":e.show1?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.passwordMatch],type:e.show1?"text":"Password",name:"input-10-1",label:"Confirm Password",counter:""},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.verify,callback:function(t){e.verify=t},expression:"verify"}})],1),a("v-spacer"),a("v-col",{staticClass:"d-flex ml-auto",attrs:{cols:"12",sm:"3",xsm:"12"}},[a("v-btn",{attrs:{"x-large":"",block:"",disabled:!e.valid,color:"success"},on:{click:e.validate}},[e._v("Register")])],1)],1)],1)],1)],1)],1)],2)],1)])],1)],1)},Dt=[],Ft={computed:{passwordMatch:function(){var e=this;return function(){return e.Password===e.verify||"Password must match"}}},methods:{validate:function(){this.$refs.loginForm.validate()&&axios.post("localhost:3000/Users",{userId:JSON.stringify(this.UserId),firstName:JSON.stringify(this.FirstName),lastName:JSON.stringify(this.LastName),password:JSON.stringify(this.Password),emailAddress:JSON.stringify(this.Email)}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()}},data:function(){return{dialog:!0,tab:0,tabs:[{name:"Login",icon:"mdi-account"},{name:"Register",icon:"mdi-account-outline"}],valid:!0,FirstName:"",UserId:"",LastName:"",Email:"",Password:"",verify:"",loginPassword:"",loginEmail:"",loginEmailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],emailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],show1:!1,show2:!1,rules:{required:function(e){return!!e||"Required."},min:function(e){return e&&e.length>=8||"Min 8 characters"}}}}},Mt=Ft,jt=a("71a3"),Tt=a("c671"),qt=a("fe57"),Lt=a("9a96"),Ut=Object(v["a"])(Mt,Et,Dt,!1,null,null,null),Xt=Ut.exports;h()(Ut,{VApp:g["a"],VBtn:y["a"],VCard:ve["a"],VCardText:fe["c"],VCol:T["a"],VDialog:ge["a"],VForm:be["a"],VIcon:k["a"],VRow:L["a"],VSpacer:V["a"],VTab:jt["a"],VTabItem:Tt["a"],VTabs:qt["a"],VTabsSlider:Lt["a"],VTextField:xe["a"]});var Bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"7"}},[a("v-card",{staticClass:"pa-1 mx-7",attrs:{outlined:"",elevation:"3 text-wrap"}},[a("v-card",{staticClass:"pa-7",staticStyle:{"margin-top":"-15px",width:"100%"},attrs:{color:"#6D6E70",rounded:""}},[a("v-card-text",[a("div",{staticClass:"card-header-title"},[e._v(e._s(e.edit_person.first_name+" "+e.edit_person.last_name)+"\n                  "),a("v-btn",{staticClass:"pl-3",attrs:{icon:"",small:""},on:{click:function(t){e.edit_person_dlg=!0}}},[a("v-icon",{staticClass:"mdi mdi-pencil",staticStyle:{color:"#C4DFF6"},attrs:{small:""}})],1)],1),a("div",{staticClass:"card-header-subtitle"},[e._v(e._s(e.view_role.role)+"\n                ")])])],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.edit_person_dlg,callback:function(t){e.edit_person_dlg=t},expression:"edit_person_dlg"}},[a("v-card",[a("v-form",{attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("User Information")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"First Name",required:"",rules:e.nameRules},model:{value:e.edit_person.first_name,callback:function(t){e.$set(e.edit_person,"first_name",t)},expression:"edit_person.first_name"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Last Name",required:"",rules:e.nameRules},model:{value:e.edit_person.last_name,callback:function(t){e.$set(e.edit_person,"last_name",t)},expression:"edit_person.last_name"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}})],1),a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"Email",rules:e.emailRules},model:{value:e.edit_user.email,callback:function(t){e.$set(e.edit_user,"email",t)},expression:"edit_user.email"}})],1)],1),a("v-row",[a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-autocomplete",{attrs:{label:"User Role",items:e.role,"item-text":"name","item-value":"id"},model:{value:e.view_role.role,callback:function(t){e.$set(e.view_role,"role",t)},expression:"view_role.role"}},[e._v("\n                    "+e._s(e.view_role.role)+"\n                  ")])],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"Phone",rules:e.phoneRules},model:{value:e.edit_contact.phone,callback:function(t){e.$set(e.edit_contact,"phone",t)},expression:"edit_contact.phone"}})],1)],1)],1)],1),a("small",[e._v("*indicates required field")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.edit_person_dlg=!1}}},[e._v("\n            Close\n          ")]),a("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:!e.valid},on:{click:e.updatePerson}},[e._v("\n            Save\n          ")])],1)],1)],1)],1)],1)},Wt=[],Ht=(a("6b54"),function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,[{key:"create",value:function(e){return d.post("/user_roles/",e)}},{key:"update",value:function(e,t,a){return d.put("/user_roles/".concat(e,"/").concat(t),a)}},{key:"get",value:function(e,t){return d.get("/user_roles/".concat(e),t)}}]),e}()),Yt=new Ht,Zt=a("1c46"),Kt={data:function(){return{selectedRole:"",role:["Admin","User"],edit_person_dlg:!1,person:{first_name:"",last_name:""},edit_person:{first_name:"",last_name:""},edit_user:{email:""},edit_role:{role:"",userId:""},view_role:{role:""},edit_contact:{phone:""},contact_id:{phone:"",email:""},nameRules:[function(e){return!!e||"Required"},function(e){return/\D\S$/.test(e)||"No white or empty spaces"}],emailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],phoneRules:[function(e){return!!e||"Required"},function(e){return/\S\d$/.test(e)||"Phone number must be valid"}],show1:!1,rules:{required:function(e){return!!e||"Required."},min:function(e){return e&&e.length>=1||"Min 5 characters"}}}},methods:{updateSelectedRole:function(e){var t="",a="";"User"===e?(t=2,a=1):(t=1,a=2);var n={userId:this.edit_role.userId,roleId:a},i={roleId:t};Yt.update(n.userId,n.roleId,i).then((function(e){})).catch((function(e){console.log(e)}))},populateRoles:function(){var e=this;p.getAll().then((function(t){e.roles=t.data})).catch((function(e){console.log(e)}))},showDialog:function(){this.edit_person_dlg=!0},setPerson:function(){var e=this;this.populateRoles(),Je.get(this.$route.params.personId).then((function(t){var a=t.data.user.roles[0].user_roles.roleId;e.edit_role.userId=t.data.user.id,e.edit_person=t.data,e.edit_user=t.data.user,e.edit_contact.phone=t.data.phones[0].number,e.contact_id.phone=t.data.phones[0].id,e.contact_id.email=t.data.emails[0].id,e.view_role.role=2==a?"User":"Admin"})).catch((function(e){console.log(e)}))},generateSalt:function(){return Zt.randomBytes(16).toString("base64")},encryptPassword:function(e,t){return Zt.createHash("sha256").update(e).update(t).digest("hex")},updatePerson:function(){var e={first_name:this.edit_person.first_name,last_name:this.edit_person.last_name,email:this.edit_user.email},t=this.$route.params.personId,a={number:this.edit_contact.phone,isPrimary:!0},n={address:this.edit_user.email,isPrimary:!0};ie.update(this.contact_id.phone,a),ct.update(this.contact_id.email,n),Je.update(t,e).then((function(e){console.log(e)})).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),this.edit_person_dlg=!1,this.updateSelectedRole(this.view_role.role)}},mounted:function(){this.setPerson()}},Jt=Kt,Gt=Object(v["a"])(Jt,Bt,Wt,!1,null,null,null),Qt=Gt.exports;h()(Gt,{VAutocomplete:He["a"],VBtn:y["a"],VCard:ve["a"],VCardActions:fe["a"],VCardText:fe["c"],VCardTitle:fe["d"],VCol:T["a"],VContainer:q["a"],VDialog:ge["a"],VForm:be["a"],VIcon:k["a"],VRow:L["a"],VSpacer:V["a"],VTextField:xe["a"]});var ea=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-card",{staticClass:"pa-3 mt-8",attrs:{outlined:"",elevation:"3 text-wrap"}},[a("v-card",{staticClass:"pa-7",staticStyle:{"margin-top":"-40px",width:"100%"},attrs:{color:"#6D6E70",rounded:""}},[a("v-toolbar-title",{staticClass:"card-header-title"},[e._v("Users")])],1),a("v-card-text",[a("v-row",[a("v-btn",{staticClass:"ml-3",attrs:{fab:"",elevation:"3",small:"",color:"white"},on:{click:function(t){e.add_person_dlg=!0}}},[a("v-icon",{staticClass:"mdi mdi-dark mdi-plus"})],1),a("v-spacer"),a("v-text-field",{staticClass:"shrink mt-3 mr-3",attrs:{label:"Search","append-icon":"mdi-magnify"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{staticClass:"text-capitalize",attrs:{headers:e.headers,items:e.volunteers,search:e.search,"item-key":"id","multi-sort":""},on:{"click:row":e.nav},scopedSlots:e._u([{key:"item.name",fn:function(t){var n=t.item;return[null!==n.first_name?a("div",[a("span",{staticClass:"black--text"},[e._v(" "+e._s(n.name))])]):e._e()]}},{key:"item.address",fn:function(t){var n=t.item;return[a("address",[e._v("\n                "+e._s(n.address)+"\n              ")])]}},{key:"item.email",fn:function(t){var n=t.item;return[a("span",{staticClass:"black--text"},[e._v("\n                  "+e._s(n.user.email)+"\n                ")])]}},{key:"item.roles",fn:function(t){var n=t.item;return[a("span",{staticClass:"black--text"},[e._v(e._s(n.role))])]}},{key:"item.actions",fn:function(t){var n=t.item;return[a("v-icon",{attrs:{small:""},on:{click:function(t){return e.removePerson(n)}}},[e._v("mdi-delete")])]}}],null,!0)})],1)],1),a("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.add_person_dlg,callback:function(t){e.add_person_dlg=t},expression:"add_person_dlg"}},[a("v-card",[a("v-form",{attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Add User")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-text-field",{attrs:{required:"",label:"First Name",rules:e.nameRules},model:{value:e.add_person.firstname,callback:function(t){e.$set(e.add_person,"firstname",t)},expression:"add_person.firstname"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Last Name",required:"",rules:e.nameRules},model:{value:e.add_person.lastname,callback:function(t){e.$set(e.add_person,"lastname",t)},expression:"add_person.lastname"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}})],1),a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"Email",rules:e.emailRules},model:{value:e.add_person.email,callback:function(t){e.$set(e.add_person,"email",t)},expression:"add_person.email"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"Password"},model:{value:e.add_person.password,callback:function(t){e.$set(e.add_person,"password",t)},expression:"add_person.password"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:"Phone",rules:e.phoneRules},model:{value:e.add_person.phone,callback:function(t){e.$set(e.add_person,"phone",t)},expression:"add_person.phone"}})],1)],1)],1),a("small",[e._v("*indicates required field")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.add_person_dlg=!1}}},[e._v("\n                Close\n              ")]),a("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:!e.valid},on:{click:e.addPerson}},[e._v("\n                Save\n              ")])],1)],1)],1)],1)],1)],1)],1)},ta=[],aa={name:"users",data:function(){return{volunteers:[],add_person_dlg:!1,currentVolunteer:null,search:"",currentIndex:-1,name:"",role:"",add_person:{firstname:"",lastname:"",email:"",password:"",phone:""},add_role:{roles:""},view_person:{firstname:"",lastname:""},nameRules:[function(e){return!!e||"Required"},function(e){return/\D\S$/.test(e)||"No white or empty spaces"}],emailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],phoneRules:[function(e){return!!e||"Required"},function(e){return/\S\d$/.test(e)||"Phone number must be valid"}],show1:!1,rules:{required:function(e){return!!e||"Required."},min:function(e){return e&&e.length>=1||"Min 5 characters"}}}},computed:{headers:function(){var e=[{text:"Name",value:"name",width:"80px",class:"red--text text--darken-3"},{text:"Email",value:"email",width:"80px",class:"red--text text--darken-3"},{text:"Roles",value:"role",width:"100px",class:"red--text text--darken-3"},{text:"Delete",value:"actions",width:"1%"}];return e}},methods:{nav:function(e){this.$router.push({path:"User/"+e.id})},retrieveVolunteers:function(){var e=this;Je.getAll().then((function(t){console.log(t.data),e.volunteers=t.data,e.volunteers.forEach((function(e){e.name=e.first_name+" "+e.last_name,console.log(e.name);var t=e.user.roles[0].id,a="";console.log(t),a=2==t?"User":"Admin",console.log(a),e.role=a}))})).catch((function(e){console.log(e.message)}))},refreshList:function(){this.retrieveVolunteers(),this.currentVolunteers=null,this.currentIndex=-1},setActiveVolunteer:function(e,t){this.currentVolunteer=e,this.currentIndex=t},addPerson:function(){var e=this,t={first_name:this.add_person.firstname,last_name:this.add_person.lastname,email:this.add_person.email,password:this.add_person.password};this.add_role.roles;t.services=this.add_person.services,Je.create(t).then((function(t){console.log(t.data.personId);var a={userId:t.data.userId,roleId:2},n={personId:t.data.personId,number:e.add_person.phone,isPrimary:!0},i={personId:t.data.personId,address:e.add_person.email,isPrimary:!0};ie.create(n),ct.create(i),Yt.create(a).then((function(t){e.refreshList()})).catch((function(e){console.log(e)})),e.refreshList()})).catch((function(e){console.log(e)})),this.add_person_dlg=!1},removePerson:function(e){var t=this;confirm("Are you sure you want to remove "+e.first_name+" "+e.last_name+" from the table?")&&Je.delete(e.id).then((function(e){t.refreshList()})).catch((function(e){console.log(e)}))}},mounted:function(){this.retrieveVolunteers()}},na=aa,ia=(a("6bfb"),Object(v["a"])(na,ea,ta,!1,null,"13a5fa07",null)),oa=ia.exports;h()(ia,{VBtn:y["a"],VCard:ve["a"],VCardActions:fe["a"],VCardText:fe["c"],VCardTitle:fe["d"],VCol:T["a"],VContainer:q["a"],VDataTable:he["a"],VDialog:ge["a"],VForm:be["a"],VIcon:k["a"],VRow:L["a"],VSpacer:V["a"],VTextField:xe["a"],VToolbarTitle:N["a"]});var sa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("v-app",[a("v-dialog",{attrs:{persistent:"","max-width":"600px","min-width":"360px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("div",[a("v-tabs",{attrs:{"show-arrows":"","background-color":"red","icons-and-text":"",dark:"",grow:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"purple darken-4"}}),e._l(e.tabs,(function(t){return a("v-tab",{key:t.name},[a("v-icon",{attrs:{large:""}},[e._v(e._s(t.icon))]),a("div",{staticClass:"caption py-1"},[e._v(e._s(t.name))])],1)})),a("v-tab-item",[a("v-card",{staticClass:"px-4"},[a("v-card-text",[a("v-form",{ref:"loginForm",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{rules:e.loginEmailRules,label:"E-mail",required:""},model:{value:e.loginEmail,callback:function(t){e.loginEmail=t},expression:"loginEmail"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{"append-icon":e.show1?"eye":"eye-off",rules:[e.rules.required,e.rules.min],type:e.show1?"text":"password",name:"input-10-1",label:"Password",counter:""},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.loginPassword,callback:function(t){e.loginPassword=t},expression:"loginPassword"}}),e.FailedLogin?a("v-alert",{attrs:{color:"red",dense:"",dismissible:"",type:"error"}},[e._v("Invalid Credentials")]):e._e()],1),a("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6",xsm:"12"}}),a("v-spacer"),a("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"3",xsm:"12","align-end":""}},[a("v-btn",{attrs:{"x-large":"",block:"",disabled:!e.valid,color:"success"},on:{click:e.validate}},[e._v("\n                        Login\n                      ")])],1)],1)],1)],1)],1)],1),a("v-tab-item",[a("v-card",{staticClass:"px-4"},[a("v-card-text",[a("v-form",{attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{rules:e.nameRules,label:"First Name",maxlength:"20",required:""},model:{value:e.FirstName,callback:function(t){e.FirstName=t},expression:"FirstName"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{rules:e.nameRules,label:"Last Name",maxlength:"20",required:""},model:{value:e.LastName,callback:function(t){e.LastName=t},expression:"LastName"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{rules:e.emailRules,label:"Email",maxlength:"20",required:""},model:{value:e.Email,callback:function(t){e.Email=t},expression:"Email"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{rules:e.phoneRules,label:"Phone",maxlength:"20",required:""},model:{value:e.Phone,callback:function(t){e.Phone=t},expression:"Phone"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{"append-icon":e.show1?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.rules.min],type:e.show1?"text":"Password",name:"input-10-1",label:"Password",counter:""},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.Password,callback:function(t){e.Password=t},expression:"Password"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{block:"","append-icon":e.show2?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.passwordMatch],type:e.show2?"text":"Password",name:"input-10-1",label:"Confirm Password",counter:""},on:{"click:append":function(t){e.show2=!e.show2}},model:{value:e.verify,callback:function(t){e.verify=t},expression:"verify"}}),e.RegisteredUser?a("v-alert",{attrs:{color:this.RegisteredColor,dense:"",dismissible:"",type:this.RegisteredType}},[e._v(e._s(this.RegisteredMessage))]):e._e()],1),a("v-spacer"),a("v-col",{staticClass:"d-flex ml-auto",attrs:{cols:"12",sm:"3",xsm:"12"}},[a("v-btn",{attrs:{"x-large":"",block:"",disabled:!e.valid,color:"success"},on:{click:e.register}},[e._v("Register")])],1)],1)],1)],1)],1)],1)],2)],1)])],1)],1)},ra=[],la=a("1c46"),ca={name:"Login",computed:{passwordMatch:function(){var e=this;return function(){return e.Password===e.verify||"Password must match"}}},methods:{generateSalt:function(){return la.randomBytes(16).toString("base64")},encryptPassword:function(e,t){return la.createHash("sha256").update(e).update(t).digest("hex")},testPassword:function(e,t,a){var n=this.encryptPassword(a,e);return t==n},checkCredentials:function(){var e=this;Je.getByEmail(this.loginEmail).then((function(t){console.log(t);var a=t.data[0].user.password,n=t.data[0].user.salt;e.UserId=t.data[0].user.id,e.PersonId=t.data[0].id,e.UserRole=t.data[0].user.roles[0].id;var i=e.testPassword(n,a,e.loginPassword);e.$authenticated=i,e.login()})).catch((function(t){e.FailedLogin=!0,console.log(t)}))},validate:function(){var e=this;this.$refs.loginForm.validate()&&Je.getAll().then((function(t){e.checkCredentials()})).catch((function(e){console.log(e)}))},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},login:function(){this.error=!0,this.$authenticated?(this.$session.start(),this.$session.set("personId",this.PersonId),this.$session.set("userID",this.UserId),this.$session.set("userRole",this.UserRole),this.$router.replace({name:"organizations"})):(console.log("Test"),this.FailedLogin=!0)},register:function(){var e=this,t={first_name:this.FirstName,last_name:this.LastName,email:this.Email,password:this.Password};Je.create(t).then((function(t){console.log(t.data.personId);var a={userId:t.data.userId,roleId:2},n={personId:t.data.personId,number:e.Phone,isPrimary:!0},i={personId:t.data.personId,address:e.Email,isPrimary:!0};ie.create(n),ct.create(i),Yt.create(a).then((function(t){e.RegisteredUser=!0,e.RegisteredColor="green",e.RegisteredType="success",e.RegisteredMessage="Successfully Registered."})).catch((function(t){e.RegisteredUser=!0,e.RegisteredColor="red",e.RegisteredType="alert",e.RegisteredMessage="Something went wrong, please contact your administrator."})),e.refreshList()})).catch((function(e){console.log(e)})),this.add_person_dlg=!1}},data:function(){return{dialog:!0,tab:0,tabs:[{name:"Login",icon:"mdi-account"},{name:"Register",icon:"mdi-account-outline"}],valid:!0,FailedLogin:!1,Registered:"",RegisteredType:"",RegisteredColor:"",RegisteredMessage:"",FirstName:"",UserId:"",PersonId:"",UserRole:"",LastName:"",Email:"",Password:"",verify:"",loginPassword:"",loginEmail:"",Phone:"",phoneRules:[function(e){return!!e||"Required"},function(e){return/\S\d$/.test(e)||"Phone number must be valid"}],nameRules:[function(e){return!!e||"Required"},function(e){return/\D\S$/.test(e)||"No white or empty spaces"}],loginEmailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],emailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],show1:!1,show2:!1,rules:{required:function(e){return!!e||"Required."},min:function(e){return e&&e.length>=1||"Min 5 characters"}}}}},da=ca,ua=a("0798"),pa=Object(v["a"])(da,sa,ra,!1,null,null,null),ma=pa.exports;h()(pa,{VAlert:ua["a"],VApp:g["a"],VBtn:y["a"],VCard:ve["a"],VCardText:fe["c"],VCol:T["a"],VDialog:ge["a"],VForm:be["a"],VIcon:k["a"],VRow:L["a"],VSpacer:V["a"],VTab:jt["a"],VTabItem:Tt["a"],VTabs:qt["a"],VTabsSlider:Lt["a"],VTextField:xe["a"]});var _a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("div",{staticClass:"red--text text--darken-4 page-title",attrs:{align:"center"}},[e._v("\n        Welcome "+e._s(this.FirstName)+"\n      ")])])],1)],1)],1)},va=[],fa={name:"userpage",data:function(){return{FirstName:"",LastName:""}},methods:{retrieveUserInfo:function(){var e=this,t=this.$session.get("personId");Je.get(t).then((function(t){e.FirstName=t.data.first_name,console.log(e.FirstName),console.log(t)})).catch((function(e){console.log(e.message)}))}},mounted:function(){this.retrieveUserInfo()}},ha=fa,ga=Object(v["a"])(ha,_a,va,!1,null,null,null),ba=ga.exports;h()(ga,{VApp:g["a"],VCol:T["a"],VContainer:q["a"],VRow:L["a"]}),n["a"].use(E["a"]);var ya=new E["a"]({mode:"history",base:"/",routes:[{path:"/",name:"login",get component(){return this.$authenticated?ze:ma}},{path:"/home",name:"organizations",component:ze},{path:"/register",name:"register",component:Xt},{path:"/organizations",name:"organizations",component:ze},{path:"/organization/:organizationId",name:"organization",component:kt},{path:"/contacts",name:"contacts",component:Ot},{path:"/contact/:personId",name:"contact",component:$t},{path:"/users",name:"users",component:oa},{path:"/user/:personId",name:"user",component:Qt},{path:"/userpage",name:"userpage",component:ba}]}),xa=a("f309"),ka=new xa["a"]({rtl:!1,theme:{dark:!1,themes:{dark:{primary:"#E57373",accent:"#FF4081",secondary:"#ffe18d",success:"#4CAF50",info:"#2196F3",warning:"#FB8C00",error:"#FF5252"},light:{primary:"#E8E8E0",accent:"#C62828",secondary:"#30b1dc",success:"#4CAF50",info:"#2196F3",warning:"#FB8C00",error:"#FF5252"}}}});n["a"].use(xa["a"]);var wa=a("a65d"),za=a.n(wa),Ca=a("0628"),Ra=a.n(Ca);a("d1e7");n["a"].use(Ra.a),n["a"].use(za.a),n["a"].config.productionTip=!1,n["a"].prototype.$authenticated=!1,new n["a"]({router:ya,vuetify:ka,render:function(e){return e($)}}).$mount("#app")},6:function(e,t){},"64a9":function(e,t,a){},"6bfb":function(e,t,a){"use strict";var n=a("6c0c"),i=a.n(n);i.a},"6c0c":function(e,t,a){},7:function(e,t){},7347:function(e,t,a){"use strict";var n=a("0857"),i=a.n(n);i.a},8:function(e,t){},9:function(e,t){},a140:function(e,t,a){e.exports=a.p+"img/red_crescent_trprnt.917cc466.png"},c1c3:function(e,t,a){},d5da:function(e,t,a){}});
//# sourceMappingURL=app.a00f53d5.js.map